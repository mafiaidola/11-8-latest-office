{
  "total_tests": 11,
  "successful_tests": 11,
  "failed_tests": 0,
  "success_rate": 100.0,
  "execution_time": 0.5377192497253418,
  "test_results": [
    {
      "test": "تسجيل دخول الأدمن",
      "success": true,
      "message": "تم تسجيل الدخول بنجاح للمستخدم: اسم محدث للاختبار (admin)",
      "details": "Response time: 21.67ms",
      "timestamp": "2025-08-05T10:49:10.788926"
    },
    {
      "test": "GET /api/users - عرض جميع المستخدمين",
      "success": true,
      "message": "تم جلب 21 مستخدم بنجاح (أكثر من 3 كما مطلوب)",
      "details": {
        "total_users": 21,
        "active_users": 21,
        "real_users_count": 21,
        "test_users_count": 0,
        "roles_distribution": {
          "admin": 1,
          "manager": 2,
          "medical_rep": 5,
          "warehouse_manager": 4,
          "accounting": 3,
          "gm": 1,
          "area_manager": 2,
          "line_manager": 1,
          "sales_rep": 1,
          "warehouse_keeper": 1
        },
        "sample_real_users": [
          "اسم محدث للاختبار",
          "مدير التجريبي",
          "مندوب المبيعات التجريبي",
          "مدير مخزن شامل",
          "مندوب المبيعات التجريبي"
        ],
        "response_time_ms": "12.32"
      },
      "timestamp": "2025-08-05T10:49:10.802169"
    },
    {
      "test": "إنشاء مستخدم تجريبي للحذف",
      "success": true,
      "message": "تم إنشاء المستخدم: مستخدم تجريبي للحذف",
      "details": {
        "user_id": "f6a6f91d-e469-477f-be0c-3e76d88a24b6"
      },
      "timestamp": "2025-08-05T10:49:10.815474"
    },
    {
      "test": "DELETE /api/users/{user_id} - حذف نهائي",
      "success": true,
      "message": "تم حذف المستخدم 'مستخدم تجريبي للحذف' نهائياً من النظام",
      "details": {
        "deleted_user": {
          "id": "f6a6f91d-e469-477f-be0c-3e76d88a24b6",
          "username": "test_user_1754390950",
          "full_name": "مستخدم تجريبي للحذف",
          "was_test_user": true
        },
        "users_before_deletion": 22,
        "users_after_deletion": 21,
        "hard_delete_confirmed": true,
        "response_message": "تم حذف المستخدم 'مستخدم تجريبي للحذف' نهائياً من النظام"
      },
      "timestamp": "2025-08-05T10:49:10.948681"
    },
    {
      "test": "منع الحذف الذاتي",
      "success": true,
      "message": "تم منع المستخدم من حذف نفسه بنجاح",
      "details": {
        "status_code": 403,
        "message": "لا يمكنك حذف نفسك"
      },
      "timestamp": "2025-08-05T10:49:10.988219"
    },
    {
      "test": "حذف مستخدم غير موجود",
      "success": true,
      "message": "تم التعامل مع حذف مستخدم غير موجود بشكل صحيح",
      "details": {
        "status_code": 404,
        "message": "المستخدم غير موجود"
      },
      "timestamp": "2025-08-05T10:49:10.999311"
    },
    {
      "test": "GET /api/products - عرض جميع المنتجات",
      "success": true,
      "message": "تم جلب 1 منتج بنجاح",
      "details": {
        "total_products": 1,
        "active_products": 1,
        "categories_distribution": {
          "أدوية القلب والأوعية الدموية": 1
        },
        "lines_distribution": {
          "Line_1": 1
        },
        "total_stock": 100,
        "sample_products": [
          "دواء الضغط الجديد - أملوديبين 10 مجم"
        ],
        "response_time_ms": "52.37"
      },
      "timestamp": "2025-08-05T10:49:11.052367"
    },
    {
      "test": "إنشاء منتج تجريبي للحذف",
      "success": true,
      "message": "تم إنشاء المنتج: منتج تجريبي للحذف 1754390951",
      "details": {
        "product_id": "f67479d3-ffad-4fd3-99d2-2677e4280c66"
      },
      "timestamp": "2025-08-05T10:49:11.118160"
    },
    {
      "test": "DELETE /api/products/{product_id} - حذف نهائي",
      "success": true,
      "message": "تم حذف المنتج 'منتج تجريبي للحذف 1754390951' نهائياً من النظام (HARD DELETE)",
      "details": {
        "products_before_deletion": 2,
        "products_after_deletion": 1,
        "hard_delete_confirmed": true,
        "response_message": "تم حذف المنتج نهائياً من النظام",
        "deleted_product_id": "f67479d3-ffad-4fd3-99d2-2677e4280c66"
      },
      "timestamp": "2025-08-05T10:49:11.203630"
    },
    {
      "test": "حذف منتج غير موجود",
      "success": true,
      "message": "تم التعامل مع حذف منتج غير موجود بشكل صحيح (404 error)",
      "details": {
        "status_code": 404,
        "message": "المنتج غير موجود"
      },
      "timestamp": "2025-08-05T10:49:11.214229"
    },
    {
      "test": "اختبار تكامل قاعدة البيانات",
      "success": true,
      "message": "جميع الأنظمة تعمل بشكل طبيعي بعد عمليات الحذف",
      "details": {
        "المستخدمين": {
          "count": 21,
          "status": "متاح",
          "response_time": "9.86ms"
        },
        "المنتجات": {
          "count": 1,
          "status": "متاح",
          "response_time": "51.01ms"
        },
        "العيادات": {
          "count": 40,
          "status": "متاح",
          "response_time": "12.36ms"
        },
        "الطلبات": {
          "count": 25,
          "status": "متاح",
          "response_time": "12.14ms"
        }
      },
      "timestamp": "2025-08-05T10:49:11.304081"
    }
  ]
}