{
  "total_tests": 11,
  "successful_tests": 11,
  "failed_tests": 0,
  "success_rate": 100.0,
  "execution_time": 0.4538915157318115,
  "test_results": [
    {
      "test": "تسجيل دخول الأدمن",
      "success": true,
      "message": "تم تسجيل الدخول بنجاح للمستخدم: اسم محدث للاختبار (admin)",
      "details": "Response time: 20.73ms",
      "timestamp": "2025-08-05T10:49:45.348225"
    },
    {
      "test": "GET /api/users - عرض جميع المستخدمين",
      "success": true,
      "message": "تم جلب 21 مستخدم بنجاح (أكثر من 3 كما مطلوب)",
      "details": {
        "total_users": 21,
        "active_users": 21,
        "real_users_count": 21,
        "test_users_count": 0,
        "roles_distribution": {
          "admin": 1,
          "manager": 2,
          "medical_rep": 5,
          "warehouse_manager": 4,
          "accounting": 3,
          "gm": 1,
          "area_manager": 2,
          "line_manager": 1,
          "sales_rep": 1,
          "warehouse_keeper": 1
        },
        "sample_real_users": [
          "اسم محدث للاختبار",
          "مدير التجريبي",
          "مندوب المبيعات التجريبي",
          "مدير مخزن شامل",
          "مندوب المبيعات التجريبي"
        ],
        "response_time_ms": "12.26"
      },
      "timestamp": "2025-08-05T10:49:45.361453"
    },
    {
      "test": "إنشاء مستخدم تجريبي للحذف",
      "success": true,
      "message": "تم إنشاء المستخدم: مستخدم تجريبي للحذف",
      "details": {
        "user_id": "71979031-b6f1-4428-b0b3-a08dfb67ab4c"
      },
      "timestamp": "2025-08-05T10:49:45.374251"
    },
    {
      "test": "DELETE /api/users/{user_id} - حذف نهائي",
      "success": true,
      "message": "تم حذف المستخدم 'مستخدم تجريبي للحذف' نهائياً من النظام",
      "details": {
        "deleted_user": {
          "id": "71979031-b6f1-4428-b0b3-a08dfb67ab4c",
          "username": "test_user_1754390985",
          "full_name": "مستخدم تجريبي للحذف",
          "was_test_user": true
        },
        "users_before_deletion": 22,
        "users_after_deletion": 21,
        "hard_delete_confirmed": true,
        "response_message": "تم حذف المستخدم 'مستخدم تجريبي للحذف' نهائياً من النظام"
      },
      "timestamp": "2025-08-05T10:49:45.462699"
    },
    {
      "test": "منع الحذف الذاتي",
      "success": true,
      "message": "تم منع المستخدم من حذف نفسه بنجاح",
      "details": {
        "status_code": 403,
        "message": "لا يمكنك حذف نفسك"
      },
      "timestamp": "2025-08-05T10:49:45.502144"
    },
    {
      "test": "حذف مستخدم غير موجود",
      "success": true,
      "message": "تم التعامل مع حذف مستخدم غير موجود بشكل صحيح",
      "details": {
        "status_code": 404,
        "message": "المستخدم غير موجود"
      },
      "timestamp": "2025-08-05T10:49:45.513331"
    },
    {
      "test": "GET /api/products - عرض جميع المنتجات",
      "success": true,
      "message": "تم جلب 2 منتج بنجاح",
      "details": {
        "total_products": 2,
        "active_products": 2,
        "categories_distribution": {
          "أدوية القلب والأوعية الدموية": 2
        },
        "lines_distribution": {
          "Line_1": 2
        },
        "total_stock": 250,
        "sample_products": [
          "دواء الضغط الجديد - أملوديبين 10 مجم",
          "كونكور 5 مجم أقراص"
        ],
        "response_time_ms": "10.34"
      },
      "timestamp": "2025-08-05T10:49:45.524776"
    },
    {
      "test": "إنشاء منتج تجريبي للحذف",
      "success": true,
      "message": "تم إنشاء المنتج: منتج تجريبي للحذف 1754390985",
      "details": {
        "product_id": "9b3396bd-9d8d-4837-a268-32f066cb5ce7"
      },
      "timestamp": "2025-08-05T10:49:45.550059"
    },
    {
      "test": "DELETE /api/products/{product_id} - حذف نهائي",
      "success": true,
      "message": "تم حذف المنتج 'منتج تجريبي للحذف 1754390985' نهائياً من النظام (HARD DELETE)",
      "details": {
        "products_before_deletion": 3,
        "products_after_deletion": 2,
        "hard_delete_confirmed": true,
        "response_message": "تم حذف المنتج نهائياً من النظام",
        "deleted_product_id": "9b3396bd-9d8d-4837-a268-32f066cb5ce7"
      },
      "timestamp": "2025-08-05T10:49:45.677257"
    },
    {
      "test": "حذف منتج غير موجود",
      "success": true,
      "message": "تم التعامل مع حذف منتج غير موجود بشكل صحيح (404 error)",
      "details": {
        "status_code": 404,
        "message": "المنتج غير موجود"
      },
      "timestamp": "2025-08-05T10:49:45.687467"
    },
    {
      "test": "اختبار تكامل قاعدة البيانات",
      "success": true,
      "message": "جميع الأنظمة تعمل بشكل طبيعي بعد عمليات الحذف",
      "details": {
        "المستخدمين": {
          "count": 21,
          "status": "متاح",
          "response_time": "11.27ms"
        },
        "المنتجات": {
          "count": 2,
          "status": "متاح",
          "response_time": "51.24ms"
        },
        "العيادات": {
          "count": 40,
          "status": "متاح",
          "response_time": "12.97ms"
        },
        "الطلبات": {
          "count": 26,
          "status": "متاح",
          "response_time": "13.07ms"
        }
      },
      "timestamp": "2025-08-05T10:49:45.780597"
    }
  ]
}