{
  "total_tests": 11,
  "successful_tests": 11,
  "failed_tests": 0,
  "success_rate": 100.0,
  "execution_time": 0.3905050754547119,
  "test_results": [
    {
      "test": "تسجيل دخول الأدمن",
      "success": true,
      "message": "تم تسجيل الدخول بنجاح للمستخدم: اسم محدث للاختبار (admin)",
      "details": "Response time: 24.07ms",
      "timestamp": "2025-08-05T10:50:26.588592"
    },
    {
      "test": "GET /api/users - عرض جميع المستخدمين",
      "success": true,
      "message": "تم جلب 21 مستخدم بنجاح (أكثر من 3 كما مطلوب)",
      "details": {
        "total_users": 21,
        "active_users": 21,
        "real_users_count": 21,
        "test_users_count": 0,
        "roles_distribution": {
          "admin": 1,
          "manager": 2,
          "medical_rep": 5,
          "warehouse_manager": 4,
          "accounting": 3,
          "gm": 1,
          "area_manager": 2,
          "line_manager": 1,
          "sales_rep": 1,
          "warehouse_keeper": 1
        },
        "sample_real_users": [
          "اسم محدث للاختبار",
          "مدير التجريبي",
          "مندوب المبيعات التجريبي",
          "مدير مخزن شامل",
          "مندوب المبيعات التجريبي"
        ],
        "response_time_ms": "10.42"
      },
      "timestamp": "2025-08-05T10:50:26.600194"
    },
    {
      "test": "إنشاء مستخدم تجريبي للحذف",
      "success": true,
      "message": "تم إنشاء المستخدم: مستخدم تجريبي للحذف",
      "details": {
        "user_id": "4346394f-6d72-4497-af9d-d5d4a9d4e242"
      },
      "timestamp": "2025-08-05T10:50:26.619237"
    },
    {
      "test": "DELETE /api/users/{user_id} - حذف نهائي",
      "success": true,
      "message": "تم حذف المستخدم 'مستخدم تجريبي للحذف' نهائياً من النظام",
      "details": {
        "deleted_user": {
          "id": "4346394f-6d72-4497-af9d-d5d4a9d4e242",
          "username": "test_user_1754391026",
          "full_name": "مستخدم تجريبي للحذف",
          "was_test_user": true
        },
        "users_before_deletion": 22,
        "users_after_deletion": 21,
        "hard_delete_confirmed": true,
        "response_message": "تم حذف المستخدم 'مستخدم تجريبي للحذف' نهائياً من النظام"
      },
      "timestamp": "2025-08-05T10:50:26.669191"
    },
    {
      "test": "منع الحذف الذاتي",
      "success": true,
      "message": "تم منع المستخدم من حذف نفسه بنجاح",
      "details": {
        "status_code": 403,
        "message": "لا يمكنك حذف نفسك"
      },
      "timestamp": "2025-08-05T10:50:26.710895"
    },
    {
      "test": "حذف مستخدم غير موجود",
      "success": true,
      "message": "تم التعامل مع حذف مستخدم غير موجود بشكل صحيح",
      "details": {
        "status_code": 404,
        "message": "المستخدم غير موجود"
      },
      "timestamp": "2025-08-05T10:50:26.762578"
    },
    {
      "test": "GET /api/products - عرض جميع المنتجات",
      "success": true,
      "message": "تم جلب 3 منتج بنجاح",
      "details": {
        "total_products": 3,
        "active_products": 3,
        "categories_distribution": {
          "أدوية القلب والأوعية الدموية": 3
        },
        "lines_distribution": {
          "Line_1": 3
        },
        "total_stock": 400,
        "sample_products": [
          "دواء الضغط الجديد - أملوديبين 10 مجم",
          "كونكور 5 مجم أقراص",
          "كونكور 5 مجم أقراص"
        ],
        "response_time_ms": "11.04"
      },
      "timestamp": "2025-08-05T10:50:26.774369"
    },
    {
      "test": "إنشاء منتج تجريبي للحذف",
      "success": true,
      "message": "تم إنشاء المنتج: منتج تجريبي للحذف 1754391026",
      "details": {
        "product_id": "16543f5c-81c2-4e47-9b97-e92eaf26a21c"
      },
      "timestamp": "2025-08-05T10:50:26.801253"
    },
    {
      "test": "DELETE /api/products/{product_id} - حذف نهائي",
      "success": true,
      "message": "تم حذف المنتج 'منتج تجريبي للحذف 1754391026' نهائياً من النظام (HARD DELETE)",
      "details": {
        "products_before_deletion": 4,
        "products_after_deletion": 3,
        "hard_delete_confirmed": true,
        "response_message": "تم حذف المنتج نهائياً من النظام",
        "deleted_product_id": "16543f5c-81c2-4e47-9b97-e92eaf26a21c"
      },
      "timestamp": "2025-08-05T10:50:26.889850"
    },
    {
      "test": "حذف منتج غير موجود",
      "success": true,
      "message": "تم التعامل مع حذف منتج غير موجود بشكل صحيح (404 error)",
      "details": {
        "status_code": 404,
        "message": "المنتج غير موجود"
      },
      "timestamp": "2025-08-05T10:50:26.901743"
    },
    {
      "test": "اختبار تكامل قاعدة البيانات",
      "success": true,
      "message": "جميع الأنظمة تعمل بشكل طبيعي بعد عمليات الحذف",
      "details": {
        "المستخدمين": {
          "count": 21,
          "status": "متاح",
          "response_time": "11.53ms"
        },
        "المنتجات": {
          "count": 3,
          "status": "متاح",
          "response_time": "11.06ms"
        },
        "العيادات": {
          "count": 40,
          "status": "متاح",
          "response_time": "12.84ms"
        },
        "الطلبات": {
          "count": 28,
          "status": "متاح",
          "response_time": "12.48ms"
        }
      },
      "timestamp": "2025-08-05T10:50:26.954213"
    }
  ]
}