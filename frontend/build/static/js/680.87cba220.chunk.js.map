{"version":3,"file":"static/js/680.87cba220.chunk.js","mappings":"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","sources":["components/Users/UserManagement.js","utils/activityLogger.js"],"sourcesContent":["// Enhanced User Management Component - إدارة المستخدمين المحسنة - FIXED VERSION\nimport React, { useState, useEffect } from 'react';\nimport { useTranslation } from '../../localization/translations.js';\nimport axios from 'axios';\nimport { activityLogger } from '../../utils/activityLogger.js';\n\nconst UserManagement = ({ user, language, isRTL }) => {\n  const [users, setUsers] = useState([]);\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [showUserCard, setShowUserCard] = useState(false);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedUsers, setSelectedUsers] = useState([]);\n  const [showBulkActions, setShowBulkActions] = useState(false);\n  \n  const { t } = useTranslation(language);\n  const API = (process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001') + '/api';\n\n  useEffect(() => {\n    loadUsers();\n    \n    // Log system access\n    activityLogger.logSystemAccess('إدارة المستخدمين', {\n      previousSection: sessionStorage.getItem('previousSection') || '',\n      accessMethod: 'navigation',\n      userRole: user?.role\n    });\n    \n    sessionStorage.setItem('previousSection', 'إدارة المستخدمين');\n  }, []);\n\n  const loadUsers = async () => {\n    setLoading(true);\n    try {\n      const token = localStorage.getItem('access_token');\n      const response = await axios.get(`${API}/admin/users`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      if (response.data && Array.isArray(response.data)) {\n        setUsers(response.data);\n      } else {\n        // Use fallback mock data\n        setUsers([\n          {\n            id: 'user_001',\n            full_name: 'أحمد محمد علي',\n            username: 'ahmed.mohamed',\n            email: 'ahmed@epgroup.com',\n            phone: '+201234567890',\n            role: 'medical_rep',\n            area: 'القاهرة - مدينة نصر',\n            status: 'active',\n            stats_last_30_days: {\n              visits: 45,\n              orders: 12,\n              revenue: 45000,\n              rating: 4.8,\n              performance_percentage: 87\n            }\n          },\n          {\n            id: 'user_002',\n            full_name: 'فاطمة أحمد السيد',\n            username: 'fatima.ahmed',\n            email: 'fatima@epgroup.com', \n            phone: '+201098765432',\n            role: 'admin',\n            area: 'الإسكندرية',\n            status: 'active',\n            stats_last_30_days: {\n              visits: 0,\n              orders: 0,\n              revenue: 0,\n              rating: 5.0,\n              performance_percentage: 95\n            }\n          }\n        ]);\n      }\n    } catch (error) {\n      console.error('Error loading users:', error);\n      \n      // Fallback: Use mock data if API fails\n      setUsers([\n        {\n          id: 'user_001',\n          full_name: 'أحمد محمد علي',\n          username: 'ahmed.mohamed',\n          email: 'ahmed@epgroup.com',\n          phone: '+201234567890',\n          role: 'medical_rep',\n          area: 'القاهرة - مدينة نصر',\n          status: 'active',\n          stats_last_30_days: {\n            visits: 45,\n            orders: 12,\n            revenue: 45000,\n            rating: 4.8,\n            performance_percentage: 87\n          }\n        }\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Helper functions\n  const getRoleLabel = (role) => {\n    const roleLabels = {\n      admin: language === 'ar' ? 'مدير النظام' : 'Admin',\n      manager: language === 'ar' ? 'مدير' : 'Manager',\n      medical_rep: language === 'ar' ? 'مندوب طبي' : 'Medical Rep',\n      accountant: language === 'ar' ? 'محاسب' : 'Accountant',\n      warehouse_keeper: language === 'ar' ? 'أمين مخزن' : 'Warehouse Keeper'\n    };\n    return roleLabels[role] || role;\n  };\n\n  const getRoleColor = (role) => {\n    const roleColors = {\n      admin: 'bg-red-500/20 border-red-500/30',\n      manager: 'bg-purple-500/20 border-purple-500/30',\n      medical_rep: 'bg-blue-500/20 border-blue-500/30',\n      accountant: 'bg-green-500/20 border-green-500/30',\n      warehouse_keeper: 'bg-orange-500/20 border-orange-500/30'\n    };\n    return roleColors[role] || 'bg-gray-500/20 border-gray-500/30';\n  };\n\n  const getRoleTextColor = (role) => {\n    const roleTextColors = {\n      admin: 'text-red-300',\n      manager: 'text-purple-300',\n      medical_rep: 'text-blue-300',\n      accountant: 'text-green-300',\n      warehouse_keeper: 'text-orange-300'\n    };\n    return roleTextColors[role] || 'text-gray-300';\n  };\n\n  const handleViewPerformance = (userData) => {\n    setSelectedUser(userData);\n    setShowUserCard(true);\n  };\n\n  const handleEditUser = (userId) => {\n    console.log('Edit user:', userId);\n    alert('تحرير المستخدم قيد التطوير');\n  };\n\n  const handleDeleteUser = (userId) => {\n    console.log('Delete user:', userId);\n    alert('حذف المستخدم قيد التطوير');\n  };\n\n  const handleToggleSelection = (userId) => {\n    setSelectedUsers(prev => \n      prev.includes(userId) \n        ? prev.filter(id => id !== userId)\n        : [...prev, userId]\n    );\n  };\n\n  const filteredUsers = users.filter(user =>\n    user.full_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.username?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.email?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className=\"user-management-container p-6 space-y-6\" dir={isRTL ? 'rtl' : 'ltr'}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold mb-2 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent\">\n            {language === 'ar' ? 'إدارة المستخدمين' : 'User Management'}\n          </h1>\n          <p className=\"text-lg opacity-75\">\n            {language === 'ar' ? 'إدارة شاملة لجميع المستخدمين في النظام' : 'Comprehensive management of all system users'}\n          </p>\n        </div>\n        \n        <div className=\"flex items-center gap-4\">\n          <button\n            onClick={() => setShowAddModal(true)}\n            className=\"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-300 flex items-center gap-2 font-medium shadow-lg\"\n          >\n            <span>➕</span>\n            {language === 'ar' ? 'إضافة مستخدم جديد' : 'Add New User'}\n          </button>\n        </div>\n      </div>\n\n      {/* Search and Filters */}\n      <div className=\"search-section bg-white/5 backdrop-blur-lg rounded-xl p-6 border border-white/20\">\n        <div className=\"flex items-center gap-4 mb-4\">\n          <div className=\"flex-1\">\n            <input\n              type=\"text\"\n              placeholder={language === 'ar' ? 'البحث في المستخدمين...' : 'Search users...'}\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-white placeholder-white/60\"\n            />\n          </div>\n        </div>\n        <div className=\"text-sm text-white/70\">\n          {language === 'ar' ? `إجمالي المستخدمين: ${users.length}` : `Total Users: ${users.length}`}\n        </div>\n      </div>\n\n      {/* Users Grid */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-12\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n            <p className=\"text-white/70\">{language === 'ar' ? 'جاري تحميل المستخدمين...' : 'Loading users...'}</p>\n          </div>\n        </div>\n      ) : (\n        <div className=\"users-grid grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\n          {filteredUsers.map(userData => (\n            <div\n              key={userData.id}\n              className=\"user-card bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300 hover:scale-105 hover:shadow-xl\"\n            >\n              {/* User Header */}\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-center gap-4\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedUsers.includes(userData.id)}\n                    onChange={() => handleToggleSelection(userData.id)}\n                    className=\"w-5 h-5 text-blue-600 rounded border-2 border-white/30\"\n                  />\n                  \n                  <div className=\"relative\">\n                    {userData.photo ? (\n                      <img \n                        src={userData.photo} \n                        alt={userData.full_name}\n                        className=\"w-16 h-16 rounded-full object-cover border-3 border-white/30 shadow-lg\"\n                      />\n                    ) : (\n                      <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 flex items-center justify-center text-white font-bold text-xl shadow-lg border-3 border-white/30\">\n                        {userData.full_name?.charAt(0) || userData.username?.charAt(0) || '؟'}\n                      </div>\n                    )}\n                    \n                    <div className={`absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-2 border-white ${\n                      userData.status === 'active' ? 'bg-green-500' : \n                      userData.status === 'inactive' ? 'bg-gray-500' : 'bg-red-500'\n                    } shadow-lg`}></div>\n                  </div>\n                  \n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-bold text-white\">{userData.full_name}</h3>\n                    <p className=\"text-sm text-white/70\">@{userData.username}</p>\n                    \n                    <div className=\"flex items-center gap-2 mt-2\">\n                      <span className={`px-3 py-1 rounded-full text-xs font-semibold border ${getRoleColor(userData.role)} ${getRoleTextColor(userData.role)}`}>\n                        {getRoleLabel(userData.role)}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Performance Stats */}\n              <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                <div className=\"bg-green-500/10 rounded-xl p-4 border border-green-500/20\">\n                  <div className=\"text-2xl font-bold text-green-400\">{userData.stats_last_30_days?.visits || 0}</div>\n                  <div className=\"text-xs text-green-200/80\">زيارة شهرياً</div>\n                </div>\n                \n                <div className=\"bg-blue-500/10 rounded-xl p-4 border border-blue-500/20\">\n                  <div className=\"text-2xl font-bold text-blue-400\">{userData.stats_last_30_days?.orders || 0}</div>\n                  <div className=\"text-xs text-blue-200/80\">طلب شهرياً</div>\n                </div>\n              </div>\n\n              {/* Contact Information */}\n              <div className=\"bg-white/5 rounded-xl p-4 mb-4 border border-white/10\">\n                <div className=\"space-y-2 text-sm\">\n                  {userData.email && (\n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"text-blue-400\">📧</span>\n                      <span className=\"text-white/80\">{userData.email}</span>\n                    </div>\n                  )}\n                  {userData.phone && (\n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"text-green-400\">📱</span>\n                      <span className=\"text-white/80\">{userData.phone}</span>\n                    </div>\n                  )}\n                  {userData.area && (\n                    <div className=\"flex items-center gap-3\">\n                      <span className=\"text-yellow-400\">📍</span>\n                      <span className=\"text-white/80\">{userData.area}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Action Buttons */}\n              <div className=\"grid grid-cols-3 gap-2\">\n                <button\n                  onClick={() => handleViewPerformance(userData)}\n                  className=\"bg-blue-600 text-white py-2 px-3 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center justify-center gap-1\"\n                >\n                  <span>📊</span>\n                  التفاصيل\n                </button>\n                \n                <button\n                  onClick={() => handleEditUser(userData.id)}\n                  className=\"bg-green-600 text-white py-2 px-3 rounded-lg hover:bg-green-700 transition-colors text-sm font-medium flex items-center justify-center gap-1\"\n                >\n                  <span>✏️</span>\n                  تعديل\n                </button>\n                \n                <button\n                  onClick={() => handleDeleteUser(userData.id)}\n                  className=\"bg-red-600 text-white py-2 px-3 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium flex items-center justify-center gap-1\"\n                >\n                  <span>🗑️</span>\n                  حذف\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* User Details Modal */}\n      {showUserCard && selectedUser && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content max-w-4xl\">\n            <div className=\"modal-header\">\n              <h3 className=\"text-2xl font-bold\">تفاصيل المستخدم: {selectedUser.full_name}</h3>\n              <button onClick={() => setShowUserCard(false)} className=\"modal-close\">×</button>\n            </div>\n            \n            <div className=\"modal-body\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div className=\"space-y-4\">\n                  <h4 className=\"text-lg font-semibold\">المعلومات الأساسية</h4>\n                  <div className=\"space-y-2\">\n                    <p><strong>الاسم:</strong> {selectedUser.full_name}</p>\n                    <p><strong>اسم المستخدم:</strong> {selectedUser.username}</p>\n                    <p><strong>البريد الإلكتروني:</strong> {selectedUser.email}</p>\n                    <p><strong>الهاتف:</strong> {selectedUser.phone}</p>\n                    <p><strong>الدور:</strong> {getRoleLabel(selectedUser.role)}</p>\n                    <p><strong>المنطقة:</strong> {selectedUser.area}</p>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-4\">\n                  <h4 className=\"text-lg font-semibold\">إحصائيات الأداء</h4>\n                  <div className=\"space-y-2\">\n                    <p><strong>الزيارات (آخر 30 يوم):</strong> {selectedUser.stats_last_30_days?.visits || 0}</p>\n                    <p><strong>الطلبات (آخر 30 يوم):</strong> {selectedUser.stats_last_30_days?.orders || 0}</p>\n                    <p><strong>الإيرادات (آخر 30 يوم):</strong> {selectedUser.stats_last_30_days?.revenue || 0} ج.م</p>\n                    <p><strong>التقييم:</strong> {selectedUser.stats_last_30_days?.rating || 0}/5</p>\n                    <p><strong>نسبة الأداء:</strong> {selectedUser.stats_last_30_days?.performance_percentage || 0}%</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"modal-footer\">\n              <button\n                onClick={() => setShowUserCard(false)}\n                className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors\"\n              >\n                إغلاق\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default UserManagement;","// Activity Logger Utility - أداة تسجيل الأنشطة\n// المطلوب: تسجيل تلقائي لجميع الأنشطة مع GPS والتفاصيل\n\nimport axios from 'axios';\n\nclass ActivityLogger {\n  constructor() {\n    this.API = (process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001') + '/api';\n    this.isEnabled = true;\n    this.currentPosition = null;\n    this.retryQueue = [];\n  }\n\n  // الحصول على الموقع الحالي\n  async getCurrentPosition() {\n    if (!navigator.geolocation) {\n      console.warn('Geolocation is not supported');\n      return null;\n    }\n\n    try {\n      const position = await new Promise((resolve, reject) => {\n        navigator.geolocation.getCurrentPosition(\n          resolve,\n          reject,\n          {\n            enableHighAccuracy: true,\n            timeout: 15000,\n            maximumAge: 300000 // 5 minutes cache\n          }\n        );\n      });\n\n      this.currentPosition = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        accuracy: position.coords.accuracy,\n        altitude: position.coords.altitude,\n        speed: position.coords.speed,\n        heading: position.coords.heading,\n        timestamp: new Date().toISOString()\n      };\n\n      // محاولة الحصول على العنوان\n      try {\n        const address = await this.getAddressFromCoordinates(\n          position.coords.latitude,\n          position.coords.longitude\n        );\n        this.currentPosition.address = address.formatted_address;\n        this.currentPosition.city = address.city;\n        this.currentPosition.area = address.area;\n        this.currentPosition.country = address.country;\n      } catch (error) {\n        console.warn('Failed to get address from coordinates:', error);\n        this.currentPosition.address = `${position.coords.latitude.toFixed(4)}, ${position.coords.longitude.toFixed(4)}`;\n      }\n\n      return this.currentPosition;\n    } catch (error) {\n      console.warn('Failed to get current position:', error);\n      return null;\n    }\n  }\n\n  // تحويل الإحداثيات إلى عنوان\n  async getAddressFromCoordinates(lat, lng) {\n    const GOOGLE_MAPS_API_KEY = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\n    \n    if (!GOOGLE_MAPS_API_KEY) {\n      return {\n        formatted_address: `${lat.toFixed(4)}, ${lng.toFixed(4)}`,\n        city: '',\n        area: '',\n        country: 'مصر'\n      };\n    }\n\n    try {\n      const response = await fetch(\n        `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=${GOOGLE_MAPS_API_KEY}&language=ar`\n      );\n      const data = await response.json();\n      \n      if (data.results && data.results.length > 0) {\n        const result = data.results[0];\n        return {\n          formatted_address: result.formatted_address,\n          city: this.extractAddressComponent(result, 'locality') || \n                this.extractAddressComponent(result, 'administrative_area_level_2'),\n          area: this.extractAddressComponent(result, 'administrative_area_level_3') ||\n                this.extractAddressComponent(result, 'sublocality'),\n          country: this.extractAddressComponent(result, 'country') || 'مصر'\n        };\n      }\n    } catch (error) {\n      console.warn('Geocoding failed:', error);\n    }\n\n    return {\n      formatted_address: `${lat.toFixed(4)}, ${lng.toFixed(4)}`,\n      city: '',\n      area: '',\n      country: 'مصر'\n    };\n  }\n\n  // استخراج مكونات العنوان\n  extractAddressComponent(result, type) {\n    const component = result.address_components.find(\n      comp => comp.types.includes(type)\n    );\n    return component ? component.long_name : '';\n  }\n\n  // الحصول على معلومات الجهاز\n  getDeviceInfo() {\n    const ua = navigator.userAgent;\n    \n    return {\n      device_type: this.getDeviceType(),\n      operating_system: this.getOperatingSystem(),\n      browser: this.getBrowserInfo(),\n      browser_version: this.getBrowserVersion(),\n      user_agent: ua,\n      screen_resolution: `${window.screen.width}x${window.screen.height}`,\n      viewport_size: `${window.innerWidth}x${window.innerHeight}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      language: navigator.language,\n      online: navigator.onLine\n    };\n  }\n\n  getDeviceType() {\n    const ua = navigator.userAgent;\n    if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) {\n      return 'tablet';\n    } else if (/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) {\n      return 'mobile';\n    }\n    return 'desktop';\n  }\n\n  getOperatingSystem() {\n    const ua = navigator.userAgent;\n    const os = [\n      { name: 'Windows 11', regex: /Windows NT 10\\.0.*rv:91/ },\n      { name: 'Windows 10', regex: /Windows NT 10\\.0/ },\n      { name: 'Windows 8.1', regex: /Windows NT 6\\.3/ },\n      { name: 'Windows 8', regex: /Windows NT 6\\.2/ },\n      { name: 'Windows 7', regex: /Windows NT 6\\.1/ },\n      { name: 'macOS', regex: /Mac OS X/ },\n      { name: 'iOS', regex: /(iPhone|iPad|iPod)/ },\n      { name: 'Android', regex: /Android/ },\n      { name: 'Linux', regex: /Linux/ },\n      { name: 'Unix', regex: /X11/ }\n    ];\n\n    for (const o of os) {\n      if (o.regex.test(ua)) {\n        return o.name;\n      }\n    }\n    return 'Unknown';\n  }\n\n  getBrowserInfo() {\n    const ua = navigator.userAgent;\n    const browsers = [\n      { name: 'Chrome', regex: /Chrome/ },\n      { name: 'Firefox', regex: /Firefox/ },\n      { name: 'Safari', regex: /Safari/ },\n      { name: 'Edge', regex: /Edge/ },\n      { name: 'Opera', regex: /Opera/ },\n      { name: 'Internet Explorer', regex: /MSIE/ }\n    ];\n\n    for (const browser of browsers) {\n      if (browser.regex.test(ua)) {\n        return browser.name;\n      }\n    }\n    return 'Unknown';\n  }\n\n  getBrowserVersion() {\n    const ua = navigator.userAgent;\n    const match = ua.match(/(Chrome|Firefox|Safari|Edge|Opera)\\/(\\d+\\.\\d+)/);\n    return match ? match[2] : 'Unknown';\n  }\n\n  // تسجيل نشاط\n  async logActivity(type, action, targetType = null, targetId = null, targetName = null, details = {}) {\n    if (!this.isEnabled) return;\n\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) {\n        console.warn('No access token available for activity logging');\n        return;\n      }\n\n      // الحصول على الموقع (optional)\n      const location = await this.getCurrentPosition();\n\n      const activityData = {\n        type,\n        action,\n        target_type: targetType,\n        target_id: targetId,\n        target_name: targetName,\n        location: location,\n        device_info: this.getDeviceInfo(),\n        details: {\n          ...details,\n          page_url: window.location.href,\n          page_title: document.title,\n          referrer: document.referrer,\n          session_storage_length: sessionStorage.length,\n          local_storage_length: localStorage.length\n        },\n        metadata: {\n          logged_at: new Date().toISOString(),\n          user_agent: navigator.userAgent,\n          connection_type: navigator.connection?.effectiveType || 'unknown',\n          battery_level: navigator.getBattery ? await navigator.getBattery().then(b => b.level) : null\n        }\n      };\n\n      const response = await axios.post(`${this.API}/activities`, activityData, {\n        headers: { \n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        timeout: 10000\n      });\n\n      console.log('Activity logged successfully:', response.data);\n      return response.data;\n\n    } catch (error) {\n      console.error('Failed to log activity:', error);\n      \n      // إضافة إلى queue للمحاولة مرة أخرى لاحقاً\n      this.retryQueue.push({\n        type, action, targetType, targetId, targetName, details,\n        timestamp: new Date().toISOString(),\n        retryCount: 0\n      });\n\n      // محاولة إعادة الإرسال بعد فترة\n      this.scheduleRetry();\n    }\n  }\n\n  // جدولة إعادة المحاولة\n  scheduleRetry() {\n    if (this.retryQueue.length === 0) return;\n\n    setTimeout(async () => {\n      const failedActivity = this.retryQueue.shift();\n      if (failedActivity && failedActivity.retryCount < 3) {\n        failedActivity.retryCount++;\n        try {\n          await this.logActivity(\n            failedActivity.type,\n            failedActivity.action,\n            failedActivity.targetType,\n            failedActivity.targetId,\n            failedActivity.targetName,\n            failedActivity.details\n          );\n        } catch (error) {\n          if (failedActivity.retryCount < 3) {\n            this.retryQueue.push(failedActivity);\n          }\n        }\n      }\n    }, 5000); // محاولة مرة أخرى بعد 5 ثوان\n  }\n\n  // تسجيل أنشطة محددة\n  async logVisitRegistration(clinicId, clinicName, visitDetails = {}) {\n    return this.logActivity(\n      'visit_registration',\n      'تسجيل زيارة عيادة',\n      'clinic',\n      clinicId,\n      clinicName,\n      {\n        visit_duration: visitDetails.duration || null,\n        doctor_present: visitDetails.doctorPresent || null,\n        samples_given: visitDetails.samplesGiven || 0,\n        notes: visitDetails.notes || '',\n        visit_type: visitDetails.type || 'routine',\n        ...visitDetails\n      }\n    );\n  }\n\n  async logClinicRegistration(clinicId, clinicName, clinicDetails = {}) {\n    return this.logActivity(\n      'clinic_registration',\n      'تسجيل عيادة جديدة',\n      'clinic',\n      clinicId,\n      clinicName,\n      {\n        doctor_name: clinicDetails.doctorName || '',\n        specialty: clinicDetails.specialty || '',\n        classification: clinicDetails.classification || '',\n        phone: clinicDetails.phone || '',\n        address: clinicDetails.address || '',\n        ...clinicDetails\n      }\n    );\n  }\n\n  async logOrderCreation(orderId, orderDetails = {}) {\n    return this.logActivity(\n      'order_creation',\n      'إنشاء طلب جديد',\n      'order',\n      orderId,\n      `طلب رقم ${orderId}`,\n      {\n        order_value: orderDetails.totalValue || 0,\n        items_count: orderDetails.itemsCount || 0,\n        clinic_name: orderDetails.clinicName || '',\n        payment_method: orderDetails.paymentMethod || '',\n        ...orderDetails\n      }\n    );\n  }\n\n  async logProductUpdate(productId, productName, updateDetails = {}) {\n    return this.logActivity(\n      'product_update',\n      'تحديث منتج',\n      'product',\n      productId,\n      productName,\n      {\n        old_price: updateDetails.oldPrice || null,\n        new_price: updateDetails.newPrice || null,\n        change_reason: updateDetails.changeReason || '',\n        update_type: updateDetails.updateType || 'general',\n        ...updateDetails\n      }\n    );\n  }\n\n  async logUserCreation(userId, userName, userDetails = {}) {\n    return this.logActivity(\n      'user_creation',\n      'إنشاء مستخدم جديد',\n      'user',\n      userId,\n      userName,\n      {\n        user_role: userDetails.role || '',\n        department: userDetails.department || '',\n        permissions: userDetails.permissions || [],\n        ...userDetails\n      }\n    );\n  }\n\n  async logSystemAccess(section, sectionDetails = {}) {\n    return this.logActivity(\n      'system_access',\n      `دخول قسم ${section}`,\n      'system',\n      section,\n      `قسم ${section}`,\n      {\n        access_time: new Date().toISOString(),\n        previous_section: sectionDetails.previousSection || '',\n        access_method: sectionDetails.accessMethod || 'navigation',\n        ...sectionDetails\n      }\n    );\n  }\n\n  async logLogin(loginDetails = {}) {\n    return this.logActivity(\n      'login',\n      'تسجيل دخول',\n      'system',\n      'login',\n      'نظام EP Group',\n      {\n        login_method: loginDetails.method || 'password',\n        biometric_verified: loginDetails.biometricVerified || false,\n        failed_attempts: loginDetails.failedAttempts || 0,\n        remember_me: loginDetails.rememberMe || false,\n        ...loginDetails\n      }\n    );\n  }\n\n  // تعطيل/تفعيل التسجيل\n  enable() {\n    this.isEnabled = true;\n  }\n\n  disable() {\n    this.isEnabled = false;\n  }\n\n  // مسح queue إعادة المحاولة\n  clearRetryQueue() {\n    this.retryQueue = [];\n  }\n}\n\n// إنشاء instance واحد للاستخدام في جميع أنحاء التطبيق\nexport const activityLogger = new ActivityLogger();\n\nexport default activityLogger;"],"names":["_ref","_selectedUser$stats_l","_selectedUser$stats_l2","_selectedUser$stats_l3","_selectedUser$stats_l4","_selectedUser$stats_l5","user","language","isRTL","users","setUsers","useState","selectedUser","setSelectedUser","showUserCard","setShowUserCard","showAddModal","setShowAddModal","loading","setLoading","searchTerm","setSearchTerm","selectedUsers","setSelectedUsers","showBulkActions","setShowBulkActions","t","useTranslation","useEffect","loadUsers","activityLogger","logSystemAccess","previousSection","sessionStorage","getItem","accessMethod","userRole","role","setItem","async","token","localStorage","response","axios","get","concat","headers","Authorization","data","Array","isArray","id","full_name","username","email","phone","area","status","stats_last_30_days","visits","orders","revenue","rating","performance_percentage","error","console","getRoleLabel","admin","manager","medical_rep","accountant","warehouse_keeper","getRoleTextColor","filteredUsers","filter","_user$full_name","_user$username","_user$email","toLowerCase","includes","_jsxs","className","dir","children","_jsx","onClick","type","placeholder","value","onChange","e","target","length","map","userData","_userData$full_name","_userData$username","_userData$stats_last_","_userData$stats_last_2","checked","handleToggleSelection","userId","prev","photo","src","alt","charAt","handleViewPerformance","handleEditUser","log","alert","handleDeleteUser","constructor","this","API","isEnabled","currentPosition","retryQueue","getCurrentPosition","navigator","geolocation","warn","position","Promise","resolve","reject","enableHighAccuracy","timeout","maximumAge","latitude","coords","longitude","accuracy","altitude","speed","heading","timestamp","Date","toISOString","address","getAddressFromCoordinates","formatted_address","city","country","toFixed","lat","lng","GOOGLE_MAPS_API_KEY","process","fetch","json","results","result","extractAddressComponent","component","address_components","find","comp","types","long_name","getDeviceInfo","ua","userAgent","device_type","getDeviceType","operating_system","getOperatingSystem","browser","getBrowserInfo","browser_version","getBrowserVersion","user_agent","screen_resolution","window","screen","width","height","viewport_size","innerWidth","innerHeight","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","online","onLine","test","os","name","regex","o","browsers","match","logActivity","action","targetType","arguments","undefined","targetId","targetName","details","_navigator$connection","activityData","target_type","target_id","target_name","location","device_info","_objectSpread","page_url","href","page_title","document","title","referrer","session_storage_length","local_storage_length","metadata","logged_at","connection_type","connection","effectiveType","battery_level","getBattery","then","b","level","post","push","retryCount","scheduleRetry","setTimeout","failedActivity","shift","logVisitRegistration","clinicId","clinicName","visitDetails","visit_duration","duration","doctor_present","doctorPresent","samples_given","samplesGiven","notes","visit_type","logClinicRegistration","clinicDetails","doctor_name","doctorName","specialty","classification","logOrderCreation","orderId","orderDetails","order_value","totalValue","items_count","itemsCount","clinic_name","payment_method","paymentMethod","logProductUpdate","productId","productName","updateDetails","old_price","oldPrice","new_price","newPrice","change_reason","changeReason","update_type","updateType","logUserCreation","userName","userDetails","user_role","department","permissions","section","sectionDetails","access_time","previous_section","access_method","logLogin","loginDetails","login_method","method","biometric_verified","biometricVerified","failed_attempts","failedAttempts","remember_me","rememberMe","enable","disable","clearRetryQueue"],"sourceRoot":""}