"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[299],{299:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var s=n(555),i=n(424),a=n(474),r=n(579);const o=e=>{let{clinic:t,onClose:n,language:s,isRTL:o}=e;const[c,l]=(0,i.useState)("overview"),[d,m]=(0,i.useState)({orders:[],debts:[],visits:[],payments:[]}),[u,x]=(0,i.useState)(!0),{t:h}=(0,a.Bd)(s);(0,i.useEffect)((()=>{null!==t&&void 0!==t&&t.id&&g()}),[null===t||void 0===t?void 0:t.id]);const g=async()=>{try{x(!0);localStorage.getItem("access_token");m({orders:[{id:"order-001",order_number:"ORD-2024-001",date:"2024-02-01T10:30:00Z",total_amount:1250,status:"delivered",items_count:5,rep_name:"\u0645\u062d\u0645\u062f \u0639\u0644\u064a \u0623\u062d\u0645\u062f"},{id:"order-002",order_number:"ORD-2024-002",date:"2024-01-28T14:15:00Z",total_amount:850,status:"pending",items_count:3,rep_name:"\u0633\u0627\u0631\u0629 \u0645\u062d\u0645\u0648\u062f"},{id:"order-003",order_number:"ORD-2024-003",date:"2024-01-25T09:45:00Z",total_amount:650,status:"cancelled",items_count:2,rep_name:"\u0623\u062d\u0645\u062f \u062d\u0633\u0627\u0645"}],debts:[{id:"debt-001",invoice_number:"INV-2024-001",due_date:"2024-02-15T00:00:00Z",original_amount:1250,paid_amount:750,remaining_amount:500,days_overdue:0,status:"partial"},{id:"debt-002",invoice_number:"INV-2024-002",due_date:"2024-01-30T00:00:00Z",original_amount:850,paid_amount:0,remaining_amount:850,days_overdue:5,status:"overdue"}],visits:[{id:"visit-001",visit_date:"2024-02-01T09:30:00Z",rep_name:"\u0645\u062d\u0645\u062f \u0639\u0644\u064a \u0623\u062d\u0645\u062f",visit_type:"routine",duration_minutes:45,order_created:!0,order_value:1250,notes:"\u0632\u064a\u0627\u0631\u0629 \u0631\u0648\u062a\u064a\u0646\u064a\u0629\u060c \u062a\u0645 \u0639\u0631\u0636 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u062c\u062f\u064a\u062f\u0629"},{id:"visit-002",visit_date:"2024-01-28T11:00:00Z",rep_name:"\u0633\u0627\u0631\u0629 \u0645\u062d\u0645\u0648\u062f",visit_type:"follow_up",duration_minutes:30,order_created:!1,order_value:0,notes:"\u0645\u062a\u0627\u0628\u0639\u0629 \u0627\u0644\u0637\u0644\u0628 \u0627\u0644\u0633\u0627\u0628\u0642"},{id:"visit-003",visit_date:"2024-01-25T14:30:00Z",rep_name:"\u0623\u062d\u0645\u062f \u062d\u0633\u0627\u0645",visit_type:"presentation",duration_minutes:60,order_created:!0,order_value:650,notes:"\u0639\u0631\u0636 \u0645\u0646\u062a\u062c\u0627\u062a \u062c\u062f\u064a\u062f\u0629 \u0644\u0644\u0645\u0648\u0633\u0645"}],payments:[{id:"pay-001",payment_date:"2024-02-02T15:20:00Z",amount:750,method:"cash",invoice_number:"INV-2024-001",reference:"REF-001"},{id:"pay-002",payment_date:"2024-01-20T10:30:00Z",amount:1e3,method:"bank_transfer",invoice_number:"INV-2023-025",reference:"TRF-445"}]})}catch(e){console.error("\u062e\u0637\u0623 \u0641\u064a \u062c\u0644\u0628 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u064a\u0627\u062f\u0629:",e)}finally{x(!1)}},p=e=>new Intl.NumberFormat("ar-EG",{style:"currency",currency:"EGP",minimumFractionDigits:2}).format(e),v=e=>new Date(e).toLocaleDateString("ar-EG",{year:"numeric",month:"short",day:"numeric"}),b=e=>{let n="";const s=t.clinic_name||"\u0639\u064a\u0627\u062f\u0629 \u063a\u064a\u0631 \u0645\u062d\u062f\u062f\u0629";switch(e){case"orders":n="\n\u062a\u0642\u0631\u064a\u0631 \u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0639\u064a\u0627\u062f\u0629\n====================\n\n\u0627\u0644\u0639\u064a\u0627\u062f\u0629: ".concat(s,"\n\u0627\u0644\u0637\u0628\u064a\u0628: ").concat(t.doctor_name,"\n\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0642\u0631\u064a\u0631: ").concat((new Date).toLocaleDateString("ar-EG"),"\n\n\u0627\u0644\u0637\u0644\u0628\u0627\u062a:\n--------\n").concat(d.orders.map(((e,t)=>"\n".concat(t+1,". ").concat(e.order_number,"\n   \u0627\u0644\u062a\u0627\u0631\u064a\u062e: ").concat(v(e.date),"\n   \u0627\u0644\u0645\u0628\u0644\u063a: ").concat(p(e.total_amount),"\n   \u0639\u062f\u062f \u0627\u0644\u0639\u0646\u0627\u0635\u0631: ").concat(e.items_count,"\n   \u0627\u0644\u0645\u0646\u062f\u0648\u0628: ").concat(e.rep_name,"\n   \u0627\u0644\u062d\u0627\u0644\u0629: ").concat(_(e.status),"\n"))).join("\n"),"\n\n\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a: ").concat(d.orders.length," \u0637\u0644\u0628\n\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0642\u064a\u0645\u0629: ").concat(p(f().totalOrderValue),"\n        ");break;case"debts":n="\n\u062a\u0642\u0631\u064a\u0631 \u0645\u062f\u064a\u0648\u0646\u064a\u0627\u062a \u0627\u0644\u0639\u064a\u0627\u062f\u0629\n=====================\n\n\u0627\u0644\u0639\u064a\u0627\u062f\u0629: ".concat(s,"\n\u0627\u0644\u0637\u0628\u064a\u0628: ").concat(t.doctor_name,"\n\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0642\u0631\u064a\u0631: ").concat((new Date).toLocaleDateString("ar-EG"),"\n\n\u0627\u0644\u0645\u062f\u064a\u0648\u0646\u064a\u0627\u062a:\n-----------\n").concat(d.debts.map(((e,t)=>"\n".concat(t+1,". ").concat(e.invoice_number,"\n   \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0633\u062a\u062d\u0642\u0627\u0642: ").concat(v(e.due_date),"\n   \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0623\u0635\u0644\u064a: ").concat(p(e.original_amount),"\n   \u0627\u0644\u0645\u062f\u0641\u0648\u0639: ").concat(p(e.paid_amount),"\n   \u0627\u0644\u0645\u062a\u0628\u0642\u064a: ").concat(p(e.remaining_amount),"\n   \u0627\u0644\u062d\u0627\u0644\u0629: ").concat("overdue"===e.status?"\u0645\u062a\u0623\u062e\u0631 ".concat(e.days_overdue," \u064a\u0648\u0645"):e.status,"\n"))).join("\n"),"\n\n\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u064a\u0648\u0646\u064a\u0627\u062a: ").concat(p(f().totalDebt),"\n        ");break;case"visits":n="\n\u062a\u0642\u0631\u064a\u0631 \u0632\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0639\u064a\u0627\u062f\u0629\n===================\n\n\u0627\u0644\u0639\u064a\u0627\u062f\u0629: ".concat(s,"\n\u0627\u0644\u0637\u0628\u064a\u0628: ").concat(t.doctor_name,"\n\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0642\u0631\u064a\u0631: ").concat((new Date).toLocaleDateString("ar-EG"),"\n\n\u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a:\n---------\n").concat(d.visits.map(((e,t)=>"\n".concat(t+1,". ").concat(j(e.visit_date),"\n   \u0627\u0644\u0645\u0646\u062f\u0648\u0628: ").concat(e.rep_name,"\n   \u0627\u0644\u0646\u0648\u0639: ").concat("routine"===e.visit_type?"\u0631\u0648\u062a\u064a\u0646\u064a\u0629":"follow_up"===e.visit_type?"\u0645\u062a\u0627\u0628\u0639\u0629":"presentation"===e.visit_type?"\u0639\u0631\u0636 \u0645\u0646\u062a\u062c\u0627\u062a":e.visit_type,"\n   \u0627\u0644\u0645\u062f\u0629: ").concat(e.duration_minutes," \u062f\u0642\u064a\u0642\u0629\n   \u0637\u0644\u0628: ").concat(e.order_created?"\u062a\u0645 - ".concat(p(e.order_value)):"\u0644\u0645 \u064a\u062a\u0645","\n   ").concat(e.notes?"\u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0627\u062a: ".concat(e.notes):"","\n"))).join("\n"),"\n\n\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a: ").concat(f().totalVisits,"\n        ")}const i=new Blob([n],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(i),r=document.createElement("a");r.href=a,r.download="".concat(s,"_").concat(e,"_").concat((new Date).toISOString().split("T")[0],".txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),alert("\u062a\u0645 \u062a\u0635\u062f\u064a\u0631 \u062a\u0642\u0631\u064a\u0631 ".concat("orders"===e?"\u0627\u0644\u0637\u0644\u0628\u0627\u062a":"debts"===e?"\u0627\u0644\u0645\u062f\u064a\u0648\u0646\u064a\u0627\u062a":"\u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a"," \u0628\u0646\u062c\u0627\u062d!"))},y=e=>{const n=window.open("","_blank"),s=t.clinic_name||"\u0639\u064a\u0627\u062f\u0629 \u063a\u064a\u0631 \u0645\u062d\u062f\u062f\u0629";let i="";switch(e){case"orders":i="\n          <h2>\u062a\u0642\u0631\u064a\u0631 \u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0639\u064a\u0627\u062f\u0629</h2>\n          <p><strong>\u0627\u0644\u0639\u064a\u0627\u062f\u0629:</strong> ".concat(s,"</p>\n          <p><strong>\u0627\u0644\u0637\u0628\u064a\u0628:</strong> ").concat(t.doctor_name,"</p>\n          <p><strong>\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0642\u0631\u064a\u0631:</strong> ").concat((new Date).toLocaleDateString("ar-EG"),'</p>\n          <table border="1" style="width: 100%; border-collapse: collapse;">\n            <tr>\n              <th>\u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628</th>\n              <th>\u0627\u0644\u062a\u0627\u0631\u064a\u062e</th>\n              <th>\u0627\u0644\u0645\u0628\u0644\u063a</th>\n              <th>\u0639\u062f\u062f \u0627\u0644\u0639\u0646\u0627\u0635\u0631</th>\n              <th>\u0627\u0644\u0645\u0646\u062f\u0648\u0628</th>\n              <th>\u0627\u0644\u062d\u0627\u0644\u0629</th>\n            </tr>\n            ').concat(d.orders.map((e=>"\n              <tr>\n                <td>".concat(e.order_number,"</td>\n                <td>").concat(v(e.date),"</td>\n                <td>").concat(p(e.total_amount),"</td>\n                <td>").concat(e.items_count,"</td>\n                <td>").concat(e.rep_name,"</td>\n                <td>").concat(_(e.status),"</td>\n              </tr>\n            "))).join(""),"\n          </table>\n        ");break;case"debts":case"visits":i="<h2>\u062a\u0642\u0631\u064a\u0631 ".concat("debts"===e?"\u0627\u0644\u0645\u062f\u064a\u0648\u0646\u064a\u0627\u062a":"\u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a","</h2>")}n.document.write('\n      <html dir="rtl">\n        <head>\n          <title>'.concat(s," - \u062a\u0642\u0631\u064a\u0631 ").concat(e,"</title>\n          <style>\n            body { font-family: Arial, sans-serif; margin: 20px; }\n            table { width: 100%; border-collapse: collapse; }\n            th, td { border: 1px solid #ddd; padding: 8px; text-align: right; }\n            th { background-color: #f2f2f2; }\n          </style>\n        </head>\n        <body>").concat(i,"</body>\n      </html>\n    ")),n.document.close(),n.print()},j=e=>new Date(e).toLocaleString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),_=e=>({pending:"\u0645\u0639\u0644\u0642",approved:"\u0645\u0639\u062a\u0645\u062f",delivered:"\u062a\u0645 \u0627\u0644\u062a\u0633\u0644\u064a\u0645",cancelled:"\u0645\u0644\u063a\u064a"}[e]||e),f=()=>({totalOrders:d.orders.length,totalOrderValue:d.orders.reduce(((e,t)=>e+t.total_amount),0),totalDebt:d.debts.reduce(((e,t)=>e+t.remaining_amount),0),totalVisits:d.visits.length,totalPayments:d.payments.reduce(((e,t)=>e+t.amount),0)}),w=f();return u?(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-8 border border-white/20",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0645\u0644\u0641 \u0627\u0644\u0639\u064a\u0627\u062f\u0629..."})]})})}):(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-white/20",children:[(0,r.jsx)("div",{className:"sticky top-0 bg-white/10 backdrop-blur-lg border-b border-white/20 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold",children:"\u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u062a\u0639\u0631\u064a\u0641\u064a \u0644\u0644\u0639\u064a\u0627\u062f\u0629"}),(0,r.jsx)("button",{onClick:n,className:"text-white/70 hover:text-white text-2xl",children:"\u2715"})]})}),(0,r.jsx)("div",{className:"border-b border-white/10",children:(0,r.jsx)("div",{className:"flex overflow-x-auto",children:[{id:"overview",name:"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629",icon:"\ud83d\udcca"},{id:"orders",name:"\u0627\u0644\u0637\u0644\u0628\u0627\u062a",icon:"\ud83d\udce6"},{id:"debts",name:"\u0627\u0644\u0645\u062f\u064a\u0648\u0646\u064a\u0627\u062a",icon:"\ud83d\udcb3"},{id:"visits",name:"\u0633\u062c\u0644 \u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a",icon:"\ud83c\udfe5"}].map((e=>(0,r.jsxs)("button",{onClick:()=>l(e.id),className:"flex items-center gap-2 px-6 py-4 font-medium transition-colors whitespace-nowrap ".concat(c===e.id?"text-blue-300 border-b-2 border-blue-400 bg-white/5":"text-white/70 hover:text-white hover:bg-white/5"),children:[(0,r.jsx)("span",{children:e.icon}),e.name]},e.id)))})}),(0,r.jsxs)("div",{className:"p-6",children:["overview"===c&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white/5 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl text-white",children:"\ud83c\udfe5"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-xl font-bold",children:t.clinic_name}),(0,r.jsx)("p",{className:"text-lg opacity-75",children:t.doctor_name}),(0,r.jsx)("p",{className:"text-sm opacity-60",children:t.specialty}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,r.jsxs)("span",{className:"px-2 py-1 rounded text-xs ".concat(t.classification?"A"===t.classification?"bg-green-500/20 text-green-300":"B"===t.classification?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300":"bg-gray-500/20 text-gray-300"),children:["\u062a\u0635\u0646\u064a\u0641 ",t.classification||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]}),(0,r.jsxs)("span",{className:"px-2 py-1 rounded text-xs ".concat("good"===t.credit_status?"bg-green-500/20 text-green-300":"average"===t.credit_status?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"),children:["\u062d\u0627\u0644\u0629 \u0627\u0626\u062a\u0645\u0627\u0646\u064a\u0629: ","good"===t.credit_status?"\u062c\u064a\u062f\u0629":"average"===t.credit_status?"\u0645\u062a\u0648\u0633\u0637\u0629":"\u0636\u0639\u064a\u0641\u0629"]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-bold text-lg",children:w.totalOrders}),(0,r.jsx)("div",{className:"opacity-75",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0637\u0644\u0628\u0627\u062a"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-bold text-lg text-green-400",children:p(w.totalOrderValue)}),(0,r.jsx)("div",{className:"opacity-75",children:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062a"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-bold text-lg text-red-400",children:p(w.totalDebt)}),(0,r.jsx)("div",{className:"opacity-75",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u064a\u0648\u0646\u064a\u0629"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"font-bold text-lg",children:w.totalVisits}),(0,r.jsx)("div",{className:"opacity-75",children:"\u0639\u062f\u062f \u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)("div",{className:"bg-white/5 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\ud83d\udce6"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"\u0622\u062e\u0631 \u0637\u0644\u0628"}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:d.orders.length>0?"".concat(d.orders[0].order_number," - ").concat(p(d.orders[0].total_amount)):"\u0644\u0627 \u062a\u0648\u062c\u062f \u0637\u0644\u0628\u0627\u062a"})]})]})}),(0,r.jsx)("div",{className:"bg-white/5 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\ud83c\udfe5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"\u0622\u062e\u0631 \u0632\u064a\u0627\u0631\u0629"}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:d.visits.length>0?"".concat(v(d.visits[0].visit_date)," - ").concat(d.visits[0].rep_name):"\u0644\u0627 \u062a\u0648\u062c\u062f \u0632\u064a\u0627\u0631\u0627\u062a"})]})]})}),(0,r.jsx)("div",{className:"bg-white/5 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-2xl",children:"\ud83d\udcb0"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:"\u0622\u062e\u0631 \u062f\u0641\u0639\u0629"}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:d.payments.length>0?"".concat(v(d.payments[0].payment_date)," - ").concat(p(d.payments[0].amount)):"\u0644\u0627 \u062a\u0648\u062c\u062f \u062f\u0641\u0639\u0627\u062a"})]})]})})]})]}),"orders"===c&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h4",{className:"text-lg font-bold",children:["\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0639\u064a\u0627\u062f\u0629 (",d.orders.length,")"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>b("orders"),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udcc4"}),"\u062a\u0635\u062f\u064a\u0631 PDF"]}),(0,r.jsxs)("button",{onClick:()=>y("orders"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udda8\ufe0f"}),"\u0637\u0628\u0627\u0639\u0629"]})]})]}),0===d.orders.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udce6"}),(0,r.jsx)("p",{className:"text-gray-400",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0637\u0644\u0628\u0627\u062a"})]}):d.orders.map((e=>{return(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors cursor-pointer",onClick:()=>(e=>{const n="\n\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0637\u0644\u0628: ".concat(e.order_number,"\n\n\u0627\u0644\u062a\u0627\u0631\u064a\u062e: ").concat(v(e.date),"\n\u0627\u0644\u0645\u0628\u0644\u063a: ").concat(p(e.total_amount),"\n\u0639\u062f\u062f \u0627\u0644\u0639\u0646\u0627\u0635\u0631: ").concat(e.items_count,"\n\u0627\u0644\u0645\u0646\u062f\u0648\u0628: ").concat(e.rep_name,"\n\u062d\u0627\u0644\u0629 \u0627\u0644\u0637\u0644\u0628: ").concat(_(e.status),"\n\n\u0627\u0644\u0639\u064a\u0627\u062f\u0629: ").concat(t.clinic_name,"\n\u0627\u0644\u0637\u0628\u064a\u0628: ").concat(t.doctor_name,"\n    ");alert(n)})(e),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"font-medium text-blue-400",children:e.order_number}),(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat((n=e.status,{pending:"bg-yellow-500/20 text-yellow-300",approved:"bg-blue-500/20 text-blue-300",delivered:"bg-green-500/20 text-green-300",cancelled:"bg-red-500/20 text-red-300"}[n]||"bg-gray-500/20 text-gray-300")),children:_(e.status)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e:"}),(0,r.jsx)("div",{children:v(e.date)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u0627\u0644\u0645\u0628\u0644\u063a:"}),(0,r.jsx)("div",{className:"font-medium",children:p(e.total_amount)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u0639\u062f\u062f \u0627\u0644\u0639\u0646\u0627\u0635\u0631:"}),(0,r.jsx)("div",{children:e.items_count})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u0627\u0644\u0645\u0646\u062f\u0648\u0628:"}),(0,r.jsx)("div",{children:e.rep_name})]})]}),(0,r.jsxs)("div",{className:"mt-2 text-xs text-blue-300 flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\ud83d\udc46"}),"\u0627\u0636\u063a\u0637 \u0644\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0643\u0627\u0645\u0644\u0629"]})]},e.id);var n}))]}),"debts"===c&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h4",{className:"text-lg font-bold",children:["\u0645\u062f\u064a\u0648\u0646\u064a\u0627\u062a \u0627\u0644\u0639\u064a\u0627\u062f\u0629 (",d.debts.length,")"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>b("debts"),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udcc4"}),"\u062a\u0635\u062f\u064a\u0631 PDF"]}),(0,r.jsxs)("button",{onClick:()=>y("debts"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udda8\ufe0f"}),"\u0637\u0628\u0627\u0639\u0629"]})]})]}),0===d.debts.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcb3"}),(0,r.jsx)("p",{className:"text-gray-400",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u062f\u064a\u0648\u0646\u064a\u0627\u062a"})]}):d.debts.map((e=>{return(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors cursor-pointer",onClick:()=>(e=>{const n="\n\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u062f\u064a\u0648\u0646\u064a\u0629: ".concat(e.invoice_number,"\n\n\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0633\u062a\u062d\u0642\u0627\u0642: ").concat(v(e.due_date),"\n\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0623\u0635\u0644\u064a: ").concat(p(e.original_amount),"\n\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639: ").concat(p(e.paid_amount),"\n\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a: ").concat(p(e.remaining_amount),"\n\u0627\u0644\u062d\u0627\u0644\u0629: ").concat("overdue"===e.status?"\u0645\u062a\u0623\u062e\u0631 ".concat(e.days_overdue," \u064a\u0648\u0645"):e.status,"\n\n\u0627\u0644\u0639\u064a\u0627\u062f\u0629: ").concat(t.clinic_name,"\n\u0627\u0644\u0637\u0628\u064a\u0628: ").concat(t.doctor_name,"\n\n").concat("overdue"===e.status?"\u26a0\ufe0f \u062a\u0646\u0628\u064a\u0647: \u0647\u0630\u0647 \u0627\u0644\u0645\u062f\u064a\u0648\u0646\u064a\u0629 \u0645\u062a\u0623\u062e\u0631\u0629 ".concat(e.days_overdue," \u064a\u0648\u0645!"):"\u2705 \u0627\u0644\u0645\u062f\u064a\u0648\u0646\u064a\u0629 \u0636\u0645\u0646 \u0627\u0644\u0645\u062f\u0629 \u0627\u0644\u0645\u0633\u0645\u0648\u062d\u0629","\n    ");alert(n)})(e),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"font-medium text-orange-400",children:e.invoice_number}),(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat((n=e.status,{paid:"bg-green-500/20 text-green-300",partial:"bg-yellow-500/20 text-yellow-300",pending:"bg-blue-500/20 text-blue-300",overdue:"bg-red-500/20 text-red-300"}[n]||"bg-gray-500/20 text-gray-300")),children:"overdue"===e.status?"\u0645\u062a\u0623\u062e\u0631 ".concat(e.days_overdue," \u064a\u0648\u0645"):e.status})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0633\u062a\u062d\u0642\u0627\u0642:"}),(0,r.jsx)("div",{children:v(e.due_date)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0623\u0635\u0644\u064a:"}),(0,r.jsx)("div",{children:p(e.original_amount)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639:"}),(0,r.jsx)("div",{className:"text-green-400",children:p(e.paid_amount)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a:"}),(0,r.jsx)("div",{className:"text-red-400 font-medium",children:p(e.remaining_amount)})]})]}),(0,r.jsxs)("div",{className:"mt-2 text-xs text-orange-300 flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\ud83d\udc46"}),"\u0627\u0636\u063a\u0637 \u0644\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0643\u0627\u0645\u0644\u0629 \u0648\u0627\u0644\u0645\u062d\u0627\u0633\u0628\u0629"]})]},e.id);var n}))]}),"visits"===c&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h4",{className:"text-lg font-bold",children:["\u0633\u062c\u0644 \u0632\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u0639\u064a\u0627\u062f\u0629 (",d.visits.length,")"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("button",{onClick:()=>b("visits"),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udcc4"}),"\u062a\u0635\u062f\u064a\u0631 PDF"]}),(0,r.jsxs)("button",{onClick:()=>y("visits"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udda8\ufe0f"}),"\u0637\u0628\u0627\u0639\u0629"]})]})]}),0===d.visits.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udfe5"}),(0,r.jsx)("p",{className:"text-gray-400",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0632\u064a\u0627\u0631\u0627\u062a"})]}):d.visits.map((e=>(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors cursor-pointer",onClick:()=>(e=>{const n="routine"===e.visit_type?"\u0631\u0648\u062a\u064a\u0646\u064a\u0629":"follow_up"===e.visit_type?"\u0645\u062a\u0627\u0628\u0639\u0629":"presentation"===e.visit_type?"\u0639\u0631\u0636 \u0645\u0646\u062a\u062c\u0627\u062a":e.visit_type,s="\n\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0632\u064a\u0627\u0631\u0629: ".concat(j(e.visit_date),"\n\n\u0627\u0644\u0645\u0646\u062f\u0648\u0628: ").concat(e.rep_name,"\n\u0646\u0648\u0639 \u0627\u0644\u0632\u064a\u0627\u0631\u0629: ").concat(n,"\n\u0645\u062f\u0629 \u0627\u0644\u0632\u064a\u0627\u0631\u0629: ").concat(e.duration_minutes," \u062f\u0642\u064a\u0642\u0629\n\n\u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628: ").concat(e.order_created?"\u062a\u0645 - ".concat(p(e.order_value)):"\u0644\u0645 \u064a\u062a\u0645","\n\n\u0627\u0644\u0639\u064a\u0627\u062f\u0629: ").concat(t.clinic_name,"\n\u0627\u0644\u0637\u0628\u064a\u0628: ").concat(t.doctor_name,"\n\n").concat(e.notes?"\u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0627\u062a:\n".concat(e.notes):"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0644\u0627\u062d\u0638\u0627\u062a","\n    ");alert(s)})(e),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("div",{className:"font-medium",children:j(e.visit_date)}),(0,r.jsx)("div",{className:"text-sm",children:"routine"===e.visit_type?"\ud83d\udccb \u0631\u0648\u062a\u064a\u0646\u064a\u0629":"follow_up"===e.visit_type?"\ud83d\udd04 \u0645\u062a\u0627\u0628\u0639\u0629":"presentation"===e.visit_type?"\ud83d\udcca \u0639\u0631\u0636 \u0645\u0646\u062a\u062c\u0627\u062a":e.visit_type})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u0627\u0644\u0645\u0646\u062f\u0648\u0628:"}),(0,r.jsx)("div",{children:e.rep_name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u0627\u0644\u0645\u062f\u0629:"}),(0,r.jsxs)("div",{children:[e.duration_minutes," \u062f\u0642\u064a\u0642\u0629"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"opacity-75",children:"\u0637\u0644\u0628:"}),(0,r.jsx)("div",{className:e.order_created?"text-green-400":"text-gray-400",children:e.order_created?"\u2705 \u062a\u0645 - ".concat(p(e.order_value)):"\u274c \u0644\u0645 \u064a\u062a\u0645"})]})]}),e.notes&&(0,r.jsxs)("div",{className:"text-sm opacity-75 bg-white/5 rounded p-2 mb-2",children:[(0,r.jsx)("div",{className:"opacity-75 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a:"}),(0,r.jsx)("div",{children:e.notes})]}),(0,r.jsxs)("div",{className:"mt-2 text-xs text-blue-300 flex items-center gap-1",children:[(0,r.jsx)("span",{children:"\ud83d\udc46"}),"\u0627\u0636\u063a\u0637 \u0644\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0643\u0627\u0645\u0644\u0629 \u0644\u0644\u0632\u064a\u0627\u0631\u0629"]})]},e.id)))]})]})]})})};var c=n(722),l=n(269);const d=e=>{let{clinic:t,areas:n,onClose:a,onSave:o,language:c}=e;const[l,d]=(0,i.useState)({clinic_name:(null===t||void 0===t?void 0:t.clinic_name)||"",doctor_name:(null===t||void 0===t?void 0:t.doctor_name)||"",specialty:(null===t||void 0===t?void 0:t.specialty)||"",phone:(null===t||void 0===t?void 0:t.phone)||"",address:(null===t||void 0===t?void 0:t.address)||"",area_id:(null===t||void 0===t?void 0:t.area_id)||"",classification:(null===t||void 0===t?void 0:t.classification)||"C",credit_status:(null===t||void 0===t?void 0:t.credit_status)||"average",monthly_target:(null===t||void 0===t?void 0:t.monthly_target)||"",monthly_achieved:(null===t||void 0===t?void 0:t.monthly_achieved)||"",is_active:void 0===(null===t||void 0===t?void 0:t.is_active)||t.is_active}),m=e=>{const{name:t,value:n,type:i,checked:a}=e.target;d((e=>(0,s.A)((0,s.A)({},e),{},{[t]:"checkbox"===i?a:n})))};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-white/20",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-2xl font-bold",children:t?"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u064a\u0627\u062f\u0629":"\u0625\u0636\u0627\u0641\u0629 \u0639\u064a\u0627\u062f\u0629 \u062c\u062f\u064a\u062f\u0629"}),(0,r.jsx)("button",{onClick:a,className:"text-white/70 hover:text-white text-2xl",children:"\u2715"})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=(0,s.A)((0,s.A)({},l),{},{monthly_target:parseFloat(l.monthly_target)||0,monthly_achieved:parseFloat(l.monthly_achieved)||0});o(t)},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0633\u0645 \u0627\u0644\u0639\u064a\u0627\u062f\u0629 *"}),(0,r.jsx)("input",{type:"text",name:"clinic_name",value:l.clinic_name,onChange:m,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0633\u0645 \u0627\u0644\u0637\u0628\u064a\u0628 *"}),(0,r.jsx)("input",{type:"text",name:"doctor_name",value:l.doctor_name,onChange:m,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u062a\u062e\u0635\u0635"}),(0,r.jsxs)("select",{name:"specialty",value:l.specialty,onChange:m,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u062a\u062e\u0635\u0635"}),(0,r.jsx)("option",{value:"\u0623\u0645\u0631\u0627\u0636 \u0628\u0627\u0637\u0646\u0629",children:"\u0623\u0645\u0631\u0627\u0636 \u0628\u0627\u0637\u0646\u0629"}),(0,r.jsx)("option",{value:"\u0623\u0637\u0641\u0627\u0644",children:"\u0623\u0637\u0641\u0627\u0644"}),(0,r.jsx)("option",{value:"\u0639\u064a\u0648\u0646",children:"\u0639\u064a\u0648\u0646"}),(0,r.jsx)("option",{value:"\u0623\u0646\u0641 \u0648\u0623\u0630\u0646",children:"\u0623\u0646\u0641 \u0648\u0623\u0630\u0646"}),(0,r.jsx)("option",{value:"\u062c\u0631\u0627\u062d\u0629",children:"\u062c\u0631\u0627\u062d\u0629"}),(0,r.jsx)("option",{value:"\u0646\u0633\u0627\u0621 \u0648\u062a\u0648\u0644\u064a\u062f",children:"\u0646\u0633\u0627\u0621 \u0648\u062a\u0648\u0644\u064a\u062f"}),(0,r.jsx)("option",{value:"\u0639\u0638\u0627\u0645",children:"\u0639\u0638\u0627\u0645"}),(0,r.jsx)("option",{value:"\u062c\u0644\u062f\u064a\u0629",children:"\u062c\u0644\u062f\u064a\u0629"}),(0,r.jsx)("option",{value:"\u0642\u0644\u0628",children:"\u0642\u0644\u0628"}),(0,r.jsx)("option",{value:"\u0623\u0639\u0635\u0627\u0628",children:"\u0623\u0639\u0635\u0627\u0628"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 *"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:l.phone,onChange:m,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u0645\u0646\u0637\u0642\u0629"}),(0,r.jsxs)("select",{name:"area_id",value:l.area_id,onChange:m,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0646\u0637\u0642\u0629"}),n.map((e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u062a\u0635\u0646\u064a\u0641"}),(0,r.jsxs)("select",{name:"classification",value:l.classification,onChange:m,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"A",children:"\u062a\u0635\u0646\u064a\u0641 A - \u0645\u0645\u062a\u0627\u0632"}),(0,r.jsx)("option",{value:"B",children:"\u062a\u0635\u0646\u064a\u0641 B - \u062c\u064a\u062f"}),(0,r.jsx)("option",{value:"C",children:"\u062a\u0635\u0646\u064a\u0641 C - \u0645\u062a\u0648\u0633\u0637"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u0626\u062a\u0645\u0627\u0646\u064a\u0629"}),(0,r.jsxs)("select",{name:"credit_status",value:l.credit_status,onChange:m,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"good",children:"\u062c\u064a\u062f"}),(0,r.jsx)("option",{value:"average",children:"\u0645\u062a\u0648\u0633\u0637"}),(0,r.jsx)("option",{value:"poor",children:"\u0636\u0639\u064a\u0641"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u0647\u062f\u0641 \u0627\u0644\u0634\u0647\u0631\u064a (\u062c.\u0645)"}),(0,r.jsx)("input",{type:"number",name:"monthly_target",value:l.monthly_target,onChange:m,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u0625\u0646\u062c\u0627\u0632 \u0627\u0644\u0634\u0647\u0631\u064a (\u062c.\u0645)"}),(0,r.jsx)("input",{type:"number",name:"monthly_achieved",value:l.monthly_achieved,onChange:m,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 *"}),(0,r.jsx)("textarea",{name:"address",value:l.address,onChange:m,rows:"3",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u062a\u0641\u0635\u064a\u0644\u064a \u0644\u0644\u0639\u064a\u0627\u062f\u0629...",required:!0})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:l.is_active,onChange:m,className:"w-4 h-4 text-blue-600 rounded"}),(0,r.jsx)("label",{htmlFor:"is_active",className:"text-sm font-medium",children:"\u0639\u064a\u0627\u062f\u0629 \u0646\u0634\u0637\u0629"})]}),(0,r.jsxs)("div",{className:"flex gap-3 pt-6",children:[(0,r.jsx)("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-blue-600 to-green-600 text-white py-3 rounded-lg hover:from-blue-700 hover:to-green-700 transition-all",children:t?"\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0639\u064a\u0627\u062f\u0629":"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u064a\u0627\u062f\u0629"}),(0,r.jsx)("button",{type:"button",onClick:a,className:"flex-1 bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700 transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})]})})})},m=e=>{let{user:t,language:n,isRTL:s}=e;const[m,u]=(0,i.useState)([]),[x,h]=(0,i.useState)([]),[g,p]=(0,i.useState)(!0),[v,b]=(0,i.useState)(""),[y,j]=(0,i.useState)("all"),[_,f]=(0,i.useState)("all"),[w,N]=(0,i.useState)("all"),[k,C]=(0,i.useState)(!1),[A,S]=(0,i.useState)(!1),[D,T]=(0,i.useState)(null),{t:I}=(0,a.Bd)(n),P="https://3cda3dc5-f9f2-4f37-9cc1-77fdfe8786ca.preview.emergentagent.com/api",this.isEnabled=!0,this.currentPosition=null,this.retryQueue=[]}async getCurrentPosition(){if(!navigator.geolocation)return console.warn("Geolocation is not supported"),null;try{const t=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:15e3,maximumAge:3e5})}));this.currentPosition={latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,altitude:t.coords.altitude,speed:t.coords.speed,heading:t.coords.heading,timestamp:(new Date).toISOString()};try{const e=await this.getAddressFromCoordinates(t.coords.latitude,t.coords.longitude);this.currentPosition.address=e.formatted_address,this.currentPosition.city=e.city,this.currentPosition.area=e.area,this.currentPosition.country=e.country}catch(e){console.warn("Failed to get address from coordinates:",e),this.currentPosition.address="".concat(t.coords.latitude.toFixed(4),", ").concat(t.coords.longitude.toFixed(4))}return this.currentPosition}catch(e){return console.warn("Failed to get current position:",e),null}}async getAddressFromCoordinates(e,t){const n="AIzaSyDzxZjDxPdcrnGKb66mT5BIvQzQWcnLp70";try{const s=await fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e,",").concat(t,"&key=").concat(n,"&language=ar")),i=await s.json();if(i.results&&i.results.length>0){const e=i.results[0];return{formatted_address:e.formatted_address,city:this.extractAddressComponent(e,"locality")||this.extractAddressComponent(e,"administrative_area_level_2"),area:this.extractAddressComponent(e,"administrative_area_level_3")||this.extractAddressComponent(e,"sublocality"),country:this.extractAddressComponent(e,"country")||"\u0645\u0635\u0631"}}}catch(s){console.warn("Geocoding failed:",s)}return{formatted_address:"".concat(e.toFixed(4),", ").concat(t.toFixed(4)),city:"",area:"",country:"\u0645\u0635\u0631"}}extractAddressComponent(e,t){const n=e.address_components.find((e=>e.types.includes(t)));return n?n.long_name:""}getDeviceInfo(){const e=navigator.userAgent;return{device_type:this.getDeviceType(),operating_system:this.getOperatingSystem(),browser:this.getBrowserInfo(),browser_version:this.getBrowserVersion(),user_agent:e,screen_resolution:"".concat(window.screen.width,"x").concat(window.screen.height),viewport_size:"".concat(window.innerWidth,"x").concat(window.innerHeight),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,online:navigator.onLine}}getDeviceType(){const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"}getOperatingSystem(){const e=navigator.userAgent,t=[{name:"Windows 11",regex:/Windows NT 10\.0.*rv:91/},{name:"Windows 10",regex:/Windows NT 10\.0/},{name:"Windows 8.1",regex:/Windows NT 6\.3/},{name:"Windows 8",regex:/Windows NT 6\.2/},{name:"Windows 7",regex:/Windows NT 6\.1/},{name:"macOS",regex:/Mac OS X/},{name:"iOS",regex:/(iPhone|iPad|iPod)/},{name:"Android",regex:/Android/},{name:"Linux",regex:/Linux/},{name:"Unix",regex:/X11/}];for(const n of t)if(n.regex.test(e))return n.name;return"Unknown"}getBrowserInfo(){const e=navigator.userAgent,t=[{name:"Chrome",regex:/Chrome/},{name:"Firefox",regex:/Firefox/},{name:"Safari",regex:/Safari/},{name:"Edge",regex:/Edge/},{name:"Opera",regex:/Opera/},{name:"Internet Explorer",regex:/MSIE/}];for(const n of t)if(n.regex.test(e))return n.name;return"Unknown"}getBrowserVersion(){const e=navigator.userAgent.match(/(Chrome|Firefox|Safari|Edge|Opera)\/(\d+\.\d+)/);return e?e[2]:"Unknown"}async logActivity(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(this.isEnabled)try{var c;const l=localStorage.getItem("access_token");if(!l)return void console.warn("No access token available for activity logging");const d={type:e,action:t,target_type:n,target_id:a,target_name:r,location:await this.getCurrentPosition(),device_info:this.getDeviceInfo(),details:(0,s.A)((0,s.A)({},o),{},{page_url:window.location.href,page_title:document.title,referrer:document.referrer,session_storage_length:sessionStorage.length,local_storage_length:localStorage.length}),metadata:{logged_at:(new Date).toISOString(),user_agent:navigator.userAgent,connection_type:(null===(c=navigator.connection)||void 0===c?void 0:c.effectiveType)||"unknown",battery_level:navigator.getBattery?await navigator.getBattery().then((e=>e.level)):null}},m=await i.A.post("".concat(this.API,"/activities"),d,{headers:{Authorization:"Bearer ".concat(l),"Content-Type":"application/json"},timeout:1e4});return console.log("Activity logged successfully:",m.data),m.data}catch(l){console.error("Failed to log activity:",l),this.retryQueue.push({type:e,action:t,targetType:n,targetId:a,targetName:r,details:o,timestamp:(new Date).toISOString(),retryCount:0}),this.scheduleRetry()}}scheduleRetry(){0!==this.retryQueue.length&&setTimeout((async()=>{const e=this.retryQueue.shift();if(e&&e.retryCount<3){e.retryCount++;try{await this.logActivity(e.type,e.action,e.targetType,e.targetId,e.targetName,e.details)}catch(t){e.retryCount<3&&this.retryQueue.push(e)}}}),5e3)}async logVisitRegistration(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.logActivity("visit_registration","\u062a\u0633\u062c\u064a\u0644 \u0632\u064a\u0627\u0631\u0629 \u0639\u064a\u0627\u062f\u0629","clinic",e,t,(0,s.A)({visit_duration:n.duration||null,doctor_present:n.doctorPresent||null,samples_given:n.samplesGiven||0,notes:n.notes||"",visit_type:n.type||"routine"},n))}async logClinicRegistration(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.logActivity("clinic_registration","\u062a\u0633\u062c\u064a\u0644 \u0639\u064a\u0627\u062f\u0629 \u062c\u062f\u064a\u062f\u0629","clinic",e,t,(0,s.A)({doctor_name:n.doctorName||"",specialty:n.specialty||"",classification:n.classification||"",phone:n.phone||"",address:n.address||""},n))}async logOrderCreation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.logActivity("order_creation","\u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u062c\u062f\u064a\u062f","order",e,"\u0637\u0644\u0628 \u0631\u0642\u0645 ".concat(e),(0,s.A)({order_value:t.totalValue||0,items_count:t.itemsCount||0,clinic_name:t.clinicName||"",payment_method:t.paymentMethod||""},t))}async logProductUpdate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.logActivity("product_update","\u062a\u062d\u062f\u064a\u062b \u0645\u0646\u062a\u062c","product",e,t,(0,s.A)({old_price:n.oldPrice||null,new_price:n.newPrice||null,change_reason:n.changeReason||"",update_type:n.updateType||"general"},n))}async logUserCreation(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.logActivity("user_creation","\u0625\u0646\u0634\u0627\u0621 \u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f","user",e,t,(0,s.A)({user_role:n.role||"",department:n.department||"",permissions:n.permissions||[]},n))}async logSystemAccess(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.logActivity("system_access","\u062f\u062e\u0648\u0644 \u0642\u0633\u0645 ".concat(e),"system",e,"\u0642\u0633\u0645 ".concat(e),(0,s.A)({access_time:(new Date).toISOString(),previous_section:t.previousSection||"",access_method:t.accessMethod||"navigation"},t))}async logLogin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.logActivity("login","\u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644","system","login","\u0646\u0638\u0627\u0645 EP Group",(0,s.A)({login_method:e.method||"password",biometric_verified:e.biometricVerified||!1,failed_attempts:e.failedAttempts||0,remember_me:e.rememberMe||!1},e))}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}clearRetryQueue(){this.retryQueue=[]}}}}]);
//# sourceMappingURL=299.4822d298.chunk.js.map