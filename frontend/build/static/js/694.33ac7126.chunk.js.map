{"version":3,"file":"static/js/694.33ac7126.chunk.js","mappings":"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","sources":["components/Visits/NewVisitForm.js","components/Visits/VisitManagement.js","utils/activityLogger.js"],"sourcesContent":["// New Visit Registration Form - نموذج تسجيل الزيارة الجديد\nimport React, { useState, useEffect } from 'react';\nimport { useTranslation } from '../../localization/translations.js';\nimport { activityLogger } from '../../utils/activityLogger.js';\nimport axios from 'axios';\n\nconst NewVisitForm = ({ user, language, isRTL, onClose, onSave }) => {\n  const [formData, setFormData] = useState({\n    clinic_id: '',\n    visit_date: new Date().toISOString().split('T')[0],\n    visit_time: new Date().toTimeString().split(' ')[0].substring(0,5),\n    managers: [], // Multiple managers selection\n    visit_effectiveness: '', // فعالية الزيارة\n    order_status: '', // حالة الطلب\n    visit_notes: '',\n    products_discussed: [],\n    samples_given: [],\n    next_visit_date: ''\n  });\n  \n  const [clinics, setClinics] = useState([]);\n  const [managers, setManagers] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [currentLocation, setCurrentLocation] = useState(null);\n  const [locationLoading, setLocationLoading] = useState(false);\n  const [loading, setLoading] = useState(false);\n  \n  const { t } = useTranslation(language);\n  const API = (process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001') + '/api';\n\n  useEffect(() => {\n    fetchClinics();\n    fetchManagers();\n    fetchProducts();\n    getCurrentLocation();\n  }, []);\n\n  const getCurrentLocation = () => {\n    setLocationLoading(true);\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setCurrentLocation({\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n            accuracy: position.coords.accuracy,\n            timestamp: new Date().toISOString()\n          });\n          console.log('✅ Location obtained for visit:', position.coords);\n          setLocationLoading(false);\n        },\n        (error) => {\n          console.error('❌ Location error:', error);\n          alert('لا يمكن الحصول على الموقع الحالي. الموقع مطلوب لتسجيل الزيارة.');\n          setLocationLoading(false);\n        },\n        { enableHighAccuracy: true, timeout: 15000, maximumAge: 60000 }\n      );\n    } else {\n      alert('المتصفح لا يدعم خدمات الموقع');\n      setLocationLoading(false);\n    }\n  };\n\n  const fetchClinics = async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      const response = await axios.get(`${API}/clinics`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setClinics(response.data || []);\n    } catch (error) {\n      console.error('Error fetching clinics:', error);\n      // Mock data for development\n      setClinics([\n        {\n          id: 'clinic-001',\n          name: 'عيادة الدكتور أحمد محمد',\n          doctor_name: 'د. أحمد محمد علي',\n          specialization: 'باطنة عامة',\n          classification: 'A',\n          address: 'شارع الجمهورية، المنصورة'\n        },\n        {\n          id: 'clinic-002', \n          name: 'مركز النيل الطبي',\n          doctor_name: 'د. فاطمة سعد',\n          specialization: 'أمراض قلب',\n          classification: 'B',\n          address: 'شارع النيل، القاهرة'\n        }\n      ]);\n    }\n  };\n\n  const fetchManagers = async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      const response = await axios.get(`${API}/users?role=manager,district_manager,gm`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setManagers(response.data || []);\n    } catch (error) {\n      console.error('Error fetching managers:', error);\n      // Mock data\n      setManagers([\n        { id: 'mgr-001', full_name: 'أحمد المدير', role: 'district_manager' },\n        { id: 'mgr-002', full_name: 'سارة مديرة المبيعات', role: 'manager' }\n      ]);\n    }\n  };\n\n  const fetchProducts = async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      const response = await axios.get(`${API}/products`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setProducts(response.data || []);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n      // Mock data\n      setProducts([\n        { id: 'prod-001', name: 'أموكسيسيلين 500mg', unit: 'ڤايل' },\n        { id: 'prod-002', name: 'فيتامين د3', unit: 'علبة' }\n      ]);\n    }\n  };\n\n  const handleInputChange = (field, value) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n  const handleManagerSelection = (managerId) => {\n    setFormData(prev => ({\n      ...prev,\n      managers: prev.managers.includes(managerId)\n        ? prev.managers.filter(id => id !== managerId)\n        : [...prev.managers, managerId]\n    }));\n  };\n\n  const handleProductSelection = (productId) => {\n    setFormData(prev => ({\n      ...prev,\n      products_discussed: prev.products_discussed.includes(productId)\n        ? prev.products_discussed.filter(id => id !== productId)\n        : [...prev.products_discussed, productId]\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    if (!currentLocation) {\n      alert('يجب الحصول على الموقع الحالي قبل تسجيل الزيارة');\n      getCurrentLocation();\n      return;\n    }\n\n    if (!formData.clinic_id) {\n      alert('يرجى اختيار عيادة');\n      return;\n    }\n\n    if (formData.managers.length === 0) {\n      alert('يرجى اختيار مدير واحد على الأقل');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const visitData = {\n        ...formData,\n        medical_rep_id: user.id,\n        medical_rep_name: user.full_name,\n        location: currentLocation,\n        visit_datetime: `${formData.visit_date}T${formData.visit_time}:00.000Z`,\n        created_at: new Date().toISOString(),\n        status: 'completed'\n      };\n\n      const token = localStorage.getItem('access_token');\n      const response = await axios.post(`${API}/visits`, visitData, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n\n      // Log the visit activity\n      await activityLogger.logVisit(response.data.id, formData.clinic_id, {\n        clinic_name: clinics.find(c => c.id === formData.clinic_id)?.name,\n        visit_effectiveness: formData.visit_effectiveness,\n        order_status: formData.order_status,\n        managers_notified: formData.managers,\n        products_discussed: formData.products_discussed,\n        location: currentLocation,\n        rep_name: user.full_name,\n        rep_role: user.role\n      });\n\n      alert('تم تسجيل الزيارة بنجاح');\n      onSave && onSave(response.data);\n      onClose();\n      \n    } catch (error) {\n      console.error('Error creating visit:', error);\n      alert('حدث خطأ أثناء تسجيل الزيارة');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white/10 backdrop-blur-lg rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-white/20\">\n        <div className=\"p-6\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center\">\n                <span className=\"text-2xl text-white\">🏥</span>\n              </div>\n              <div>\n                <h2 className=\"text-2xl font-bold text-white\">تسجيل زيارة جديدة</h2>\n                <p className=\"text-sm text-white/70\">تسجيل زيارة للعيادة مع تتبع الموقع</p>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center gap-3\">\n              {/* Location Status */}\n              <div className={`flex items-center gap-2 px-3 py-2 rounded-lg ${\n                currentLocation ? 'bg-green-500/20 text-green-300' : 'bg-red-500/20 text-red-300'\n              }`}>\n                <span>{locationLoading ? '⏳' : currentLocation ? '📍' : '❌'}</span>\n                <span className=\"text-xs\">\n                  {locationLoading ? 'جاري تحديد الموقع...' : \n                   currentLocation ? 'تم تحديد الموقع' : 'فشل في تحديد الموقع'}\n                </span>\n              </div>\n              \n              <button\n                onClick={onClose}\n                className=\"text-white/70 hover:text-white text-2xl\"\n              >\n                ✕\n              </button>\n            </div>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Basic Visit Info */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              {/* Clinic Selection */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  اختيار العيادة *\n                </label>\n                <select\n                  value={formData.clinic_id}\n                  onChange={(e) => handleInputChange('clinic_id', e.target.value)}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-white\"\n                  required\n                >\n                  <option value=\"\">اختر العيادة</option>\n                  {clinics.map(clinic => (\n                    <option key={clinic.id} value={clinic.id} className=\"text-black\">\n                      {clinic.name} - {clinic.doctor_name}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              {/* Visit Date */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  تاريخ الزيارة *\n                </label>\n                <input\n                  type=\"date\"\n                  value={formData.visit_date}\n                  onChange={(e) => handleInputChange('visit_date', e.target.value)}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-white\"\n                  required\n                />\n              </div>\n\n              {/* Visit Time */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  وقت الزيارة *\n                </label>\n                <input\n                  type=\"time\"\n                  value={formData.visit_time}\n                  onChange={(e) => handleInputChange('visit_time', e.target.value)}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-white\"\n                  required\n                />\n              </div>\n\n              {/* Visit Effectiveness */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  فعالية الزيارة *\n                </label>\n                <select\n                  value={formData.visit_effectiveness}\n                  onChange={(e) => handleInputChange('visit_effectiveness', e.target.value)}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-white\"\n                  required\n                >\n                  <option value=\"\">اختر فعالية الزيارة</option>\n                  <option value=\"excellent\" className=\"text-black\">ممتازة</option>\n                  <option value=\"very_good\" className=\"text-black\">جيدة جداً</option>\n                  <option value=\"good\" className=\"text-black\">جيدة</option>\n                  <option value=\"average\" className=\"text-black\">متوسطة</option>\n                  <option value=\"poor\" className=\"text-black\">ضعيفة</option>\n                </select>\n              </div>\n\n              {/* Order Status */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  حالة الطلب *\n                </label>\n                <select\n                  value={formData.order_status}\n                  onChange={(e) => handleInputChange('order_status', e.target.value)}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-white\"\n                  required\n                >\n                  <option value=\"\">اختر حالة الطلب</option>\n                  <option value=\"ordered\" className=\"text-black\">تم الطلب</option>\n                  <option value=\"interested\" className=\"text-black\">مهتم</option>\n                  <option value=\"considering\" className=\"text-black\">تحت الدراسة</option>\n                  <option value=\"no_order\" className=\"text-black\">لا يوجد طلب</option>\n                  <option value=\"follow_up\" className=\"text-black\">متابعة لاحقة</option>\n                </select>\n              </div>\n\n              {/* Next Visit Date */}\n              <div>\n                <label className=\"block text-sm font-medium text-white mb-2\">\n                  تاريخ الزيارة القادمة\n                </label>\n                <input\n                  type=\"date\"\n                  value={formData.next_visit_date}\n                  onChange={(e) => handleInputChange('next_visit_date', e.target.value)}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-white\"\n                />\n              </div>\n            </div>\n\n            {/* Managers Selection */}\n            <div>\n              <label className=\"block text-sm font-medium text-white mb-3\">\n                اختيار المدراء للإشعار * (متعدد)\n              </label>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                {managers.map(manager => (\n                  <label key={manager.id} className=\"flex items-center gap-3 p-3 bg-white/5 rounded-lg border border-white/10 cursor-pointer hover:bg-white/10 transition-colors\">\n                    <input\n                      type=\"checkbox\"\n                      checked={formData.managers.includes(manager.id)}\n                      onChange={() => handleManagerSelection(manager.id)}\n                      className=\"w-5 h-5 text-green-600 rounded border-2 border-white/30\"\n                    />\n                    <div className=\"flex-1\">\n                      <div className=\"text-white font-medium\">{manager.full_name}</div>\n                      <div className=\"text-white/60 text-xs\">{manager.role}</div>\n                    </div>\n                  </label>\n                ))}\n              </div>\n            </div>\n\n            {/* Products Discussed */}\n            <div>\n              <label className=\"block text-sm font-medium text-white mb-3\">\n                المنتجات التي تم مناقشتها\n              </label>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-32 overflow-y-auto\">\n                {products.map(product => (\n                  <label key={product.id} className=\"flex items-center gap-3 p-2 bg-white/5 rounded-lg border border-white/10 cursor-pointer hover:bg-white/10 transition-colors\">\n                    <input\n                      type=\"checkbox\"\n                      checked={formData.products_discussed.includes(product.id)}\n                      onChange={() => handleProductSelection(product.id)}\n                      className=\"w-4 h-4 text-green-600 rounded border-2 border-white/30\"\n                    />\n                    <div className=\"flex-1\">\n                      <div className=\"text-white text-sm\">{product.name}</div>\n                      <div className=\"text-white/60 text-xs\">{product.unit}</div>\n                    </div>\n                  </label>\n                ))}\n              </div>\n            </div>\n\n            {/* Visit Notes */}\n            <div>\n              <label className=\"block text-sm font-medium text-white mb-2\">\n                ملاحظات الزيارة\n              </label>\n              <textarea\n                value={formData.visit_notes}\n                onChange={(e) => handleInputChange('visit_notes', e.target.value)}\n                rows=\"4\"\n                className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-white resize-none\"\n                placeholder=\"أضف ملاحظات حول الزيارة...\"\n              />\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex gap-4 pt-4\">\n              <button\n                type=\"submit\"\n                disabled={loading || !currentLocation}\n                className=\"flex-1 bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-lg hover:from-green-700 hover:to-green-800 transition-all duration-300 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n              >\n                {loading ? (\n                  <>\n                    <div className=\"animate-spin rounded-full h-5 w-5 border-2 border-white/30 border-t-white\"></div>\n                    جاري الحفظ...\n                  </>\n                ) : (\n                  <>\n                    <span>💾</span>\n                    تسجيل الزيارة\n                  </>\n                )}\n              </button>\n              \n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium\"\n              >\n                إلغاء\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default NewVisitForm;","// Visit Management System - نظام إدارة الزيارات المحسن\nimport React, { useState, useEffect } from 'react';\nimport { useTranslation } from '../../localization/translations.js';\nimport { activityLogger } from '../../utils/activityLogger.js';\nimport NewVisitForm from './NewVisitForm.js';\nimport axios from 'axios';\n\nconst VisitManagement = ({ user, language, isRTL }) => {\n  const [activeTab, setActiveTab] = useState('visits');\n  const [visits, setVisits] = useState([]);\n  const [loginLogs, setLoginLogs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showNewVisitModal, setShowNewVisitModal] = useState(false);\n  const [selectedVisit, setSelectedVisit] = useState(null);\n  const [showVisitDetails, setShowVisitDetails] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState('all');\n  const [filterDate, setFilterDate] = useState('');\n  \n  const { t } = useTranslation(language);\n  const API = (process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001') + '/api';\n  \n  // Check user permissions for GPS viewing\n  const canViewGPS = ['admin', 'gm'].includes(user?.role);\n  const canViewAllVisits = ['admin', 'gm', 'district_manager', 'manager'].includes(user?.role);\n\n  useEffect(() => {\n    fetchVisitData();\n    if (canViewAllVisits) {\n      fetchLoginLogs();\n    }\n    \n    // Log section access\n    activityLogger.logSystemAccess('إدارة الزيارات', {\n      previousSection: sessionStorage.getItem('previousSection') || '',\n      accessMethod: 'navigation',\n      userRole: user?.role,\n      canViewGPS: canViewGPS\n    });\n    \n    sessionStorage.setItem('previousSection', 'إدارة الزيارات');\n  }, []);\n\n  const fetchVisitData = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('access_token');\n      \n      // Fetch visits based on user role\n      let visitsUrl = `${API}/visits`;\n      if (!canViewAllVisits) {\n        // Medical reps only see their own visits\n        visitsUrl += `?rep_id=${user.id}`;\n      }\n      \n      const response = await axios.get(visitsUrl, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      setVisits(response.data || []);\n    } catch (error) {\n      console.error('Error fetching visits:', error);\n      // Mock data for development\n      setVisits([\n        {\n          id: 'visit-001',\n          clinic_name: 'عيادة الدكتور أحمد محمد',\n          doctor_name: 'د. أحمد محمد علي',\n          medical_rep_name: 'محمد المندوب',\n          visit_date: '2024-01-15T10:30:00Z',\n          visit_effectiveness: 'excellent',\n          order_status: 'ordered',\n          location: {\n            latitude: 30.0444,\n            longitude: 31.2357,\n            address: 'المنصورة، مصر'\n          },\n          managers_notified: ['أحمد المدير', 'سارة مديرة المبيعات'],\n          products_discussed: ['أموكسيسيلين 500mg', 'فيتامين د3'],\n          visit_notes: 'زيارة ناجحة مع طلب منتجات جديدة',\n          status: 'completed'\n        },\n        {\n          id: 'visit-002',\n          clinic_name: 'مركز النيل الطبي',\n          doctor_name: 'د. فاطمة سعد',\n          medical_rep_name: 'أحمد المندوب',\n          visit_date: '2024-01-14T14:15:00Z',\n          visit_effectiveness: 'good',\n          order_status: 'interested',\n          location: {\n            latitude: 30.0626,\n            longitude: 31.2497,\n            address: 'القاهرة، مصر'\n          },\n          managers_notified: ['أحمد المدير'],\n          products_discussed: ['أنسولين طويل المفعول'],\n          visit_notes: 'الطبيب مهتم ولكن يحتاج وقت للقرار',\n          status: 'completed'\n        }\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchLoginLogs = async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      const response = await axios.get(`${API}/login-logs`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      setLoginLogs(response.data || []);\n    } catch (error) {\n      console.error('Error fetching login logs:', error);\n      // Mock data\n      setLoginLogs([\n        {\n          id: 'log-001',\n          user_name: 'محمد المندوب',\n          user_role: 'medical_rep',\n          login_time: '2024-01-15T08:30:00Z',\n          ip_address: '192.168.1.100',\n          device_type: 'Mobile - Android',\n          location: {\n            latitude: 30.0444,\n            longitude: 31.2357,\n            address: 'المنصورة، مصر'\n          },\n          biometric_status: 'verified',\n          selfie_status: 'captured'\n        }\n      ]);\n    }\n  };\n\n  const handleNewVisit = () => {\n    setShowNewVisitModal(true);\n  };\n\n  const handleVisitSaved = (newVisit) => {\n    setVisits(prev => [newVisit, ...prev]);\n    fetchVisitData(); // Refresh the list\n  };\n\n  const handleVisitClick = (visit) => {\n    setSelectedVisit(visit);\n    setShowVisitDetails(true);\n  };\n\n  const getEffectivenessColor = (effectiveness) => {\n    const colors = {\n      'excellent': 'bg-green-500/20 text-green-300 border-green-500/30',\n      'very_good': 'bg-lime-500/20 text-lime-300 border-lime-500/30',\n      'good': 'bg-blue-500/20 text-blue-300 border-blue-500/30',\n      'average': 'bg-yellow-500/20 text-yellow-300 border-yellow-500/30',\n      'poor': 'bg-red-500/20 text-red-300 border-red-500/30'\n    };\n    return colors[effectiveness] || 'bg-gray-500/20 text-gray-300 border-gray-500/30';\n  };\n\n  const getOrderStatusColor = (status) => {\n    const colors = {\n      'ordered': 'bg-green-500/20 text-green-300',\n      'interested': 'bg-blue-500/20 text-blue-300',\n      'considering': 'bg-yellow-500/20 text-yellow-300',\n      'no_order': 'bg-red-500/20 text-red-300',\n      'follow_up': 'bg-purple-500/20 text-purple-300'\n    };\n    return colors[status] || 'bg-gray-500/20 text-gray-300';\n  };\n\n  const getStatusLabel = (status) => {\n    const labels = {\n      'ordered': 'تم الطلب',\n      'interested': 'مهتم',\n      'considering': 'تحت الدراسة',\n      'no_order': 'لا يوجد طلب',\n      'follow_up': 'متابعة لاحقة'\n    };\n    return labels[status] || status;\n  };\n\n  const getEffectivenessLabel = (effectiveness) => {\n    const labels = {\n      'excellent': 'ممتازة',\n      'very_good': 'جيدة جداً',\n      'good': 'جيدة',\n      'average': 'متوسطة',\n      'poor': 'ضعيفة'\n    };\n    return labels[effectiveness] || effectiveness;\n  };\n\n  // Filter visits based on search and filters\n  const filteredVisits = visits.filter(visit => {\n    const matchesSearch = visit.clinic_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         visit.doctor_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         visit.medical_rep_name?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesStatus = filterStatus === 'all' || visit.order_status === filterStatus;\n    \n    const matchesDate = !filterDate || visit.visit_date?.split('T')[0] === filterDate;\n    \n    return matchesSearch && matchesStatus && matchesDate;\n  });\n\n  return (\n    <div className=\"visit-management-container\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center\">\n              <span className=\"text-2xl text-white\">🏥</span>\n            </div>\n            <div>\n              <h1 className=\"text-3xl font-bold\">إدارة الزيارات</h1>\n              <p className=\"text-lg opacity-75\">متابعة زيارات المندوبين الطبيين للعيادات</p>\n            </div>\n          </div>\n          \n          {/* Action Buttons */}\n          <div className=\"flex gap-3\">\n            {user?.role === 'medical_rep' && (\n              <button\n                onClick={handleNewVisit}\n                className=\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 font-medium\"\n              >\n                <span>➕</span>\n                زيارة جديدة\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"mb-6\">\n        <div className=\"flex gap-1 bg-white/10 backdrop-blur-lg rounded-lg p-1 border border-white/20\">\n          <button\n            onClick={() => setActiveTab('visits')}\n            className={`px-6 py-3 rounded-lg font-medium transition-colors ${\n              activeTab === 'visits' \n                ? 'bg-green-600 text-white' \n                : 'text-white/70 hover:text-white hover:bg-white/10'\n            }`}\n          >\n            📋 سجل الزيارات\n          </button>\n          \n          {canViewAllVisits && (\n            <button\n              onClick={() => setActiveTab('login-logs')}\n              className={`px-6 py-3 rounded-lg font-medium transition-colors ${\n                activeTab === 'login-logs' \n                  ? 'bg-green-600 text-white' \n                  : 'text-white/70 hover:text-white hover:bg-white/10'\n              }`}\n            >\n              🔐 سجل تسجيل الدخول\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Search and Filters */}\n      {activeTab === 'visits' && (\n        <div className=\"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4\">\n          {/* Search */}\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              placeholder=\"البحث في الزيارات...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full px-4 py-3 pl-12 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-white\"\n            />\n            <span className=\"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400\">\n              🔍\n            </span>\n          </div>\n          \n          {/* Status Filter */}\n          <select\n            value={filterStatus}\n            onChange={(e) => setFilterStatus(e.target.value)}\n            className=\"px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-white\"\n          >\n            <option value=\"all\" className=\"text-black\">جميع الحالات</option>\n            <option value=\"ordered\" className=\"text-black\">تم الطلب</option>\n            <option value=\"interested\" className=\"text-black\">مهتم</option>\n            <option value=\"considering\" className=\"text-black\">تحت الدراسة</option>\n            <option value=\"no_order\" className=\"text-black\">لا يوجد طلب</option>\n            <option value=\"follow_up\" className=\"text-black\">متابعة لاحقة</option>\n          </select>\n          \n          {/* Date Filter */}\n          <input\n            type=\"date\"\n            value={filterDate}\n            onChange={(e) => setFilterDate(e.target.value)}\n            className=\"px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-white\"\n          />\n        </div>\n      )}\n\n      {/* Content based on active tab */}\n      {activeTab === 'visits' && (\n        <VisitsList \n          visits={filteredVisits}\n          loading={loading}\n          onVisitClick={handleVisitClick}\n          canViewGPS={canViewGPS}\n          getEffectivenessColor={getEffectivenessColor}\n          getOrderStatusColor={getOrderStatusColor}\n          getStatusLabel={getStatusLabel}\n          getEffectivenessLabel={getEffectivenessLabel}\n        />\n      )}\n\n      {activeTab === 'login-logs' && canViewAllVisits && (\n        <LoginLogsList \n          loginLogs={loginLogs}\n          loading={loading}\n          canViewGPS={canViewGPS}\n        />\n      )}\n\n      {/* New Visit Modal */}\n      {showNewVisitModal && (\n        <NewVisitForm\n          user={user}\n          language={language}\n          isRTL={isRTL}\n          onClose={() => setShowNewVisitModal(false)}\n          onSave={handleVisitSaved}\n        />\n      )}\n\n      {/* Visit Details Modal */}\n      {showVisitDetails && selectedVisit && (\n        <VisitDetailsModal\n          visit={selectedVisit}\n          onClose={() => setShowVisitDetails(false)}\n          canViewGPS={canViewGPS}\n          getEffectivenessColor={getEffectivenessColor}\n          getOrderStatusColor={getOrderStatusColor}\n          getStatusLabel={getStatusLabel}\n          getEffectivenessLabel={getEffectivenessLabel}\n        />\n      )}\n    </div>\n  );\n};\n\n// Visits List Component\nconst VisitsList = ({ \n  visits, \n  loading, \n  onVisitClick, \n  canViewGPS, \n  getEffectivenessColor, \n  getOrderStatusColor, \n  getStatusLabel, \n  getEffectivenessLabel \n}) => {\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4\"></div>\n          <p>جاري تحميل الزيارات...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (visits.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <div className=\"text-6xl mb-4\">🏥</div>\n        <h3 className=\"text-xl font-bold mb-2\">لا توجد زيارات</h3>\n        <p className=\"text-gray-600\">لم يتم العثور على زيارات مطابقة للبحث</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n      {visits.map((visit) => (\n        <div\n          key={visit.id}\n          onClick={() => onVisitClick(visit)}\n          className=\"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300 hover:scale-105 hover:shadow-xl cursor-pointer\"\n        >\n          {/* Visit Header */}\n          <div className=\"flex items-start justify-between mb-4\">\n            <div className=\"flex-1\">\n              <h3 className=\"font-bold text-lg text-white mb-1\">{visit.clinic_name}</h3>\n              <p className=\"text-white/70 text-sm mb-2\">{visit.doctor_name}</p>\n              <p className=\"text-white/60 text-xs\">بواسطة: {visit.medical_rep_name}</p>\n            </div>\n            \n            {canViewGPS && visit.location && (\n              <div className=\"text-green-400 text-lg\" title=\"الموقع متاح\">\n                📍\n              </div>\n            )}\n          </div>\n\n          {/* Visit Info */}\n          <div className=\"space-y-3\">\n            {/* Date and Time */}\n            <div className=\"flex items-center gap-2 text-white/80 text-sm\">\n              <span>📅</span>\n              <span>\n                {new Date(visit.visit_date).toLocaleDateString('ar-EG')} - \n                {new Date(visit.visit_date).toLocaleTimeString('ar-EG', { \n                  hour: '2-digit', \n                  minute: '2-digit' \n                })}\n              </span>\n            </div>\n\n            {/* Effectiveness */}\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-white/70 text-sm\">الفعالية:</span>\n              <span className={`px-3 py-1 rounded-full text-xs font-medium border ${getEffectivenessColor(visit.visit_effectiveness)}`}>\n                {getEffectivenessLabel(visit.visit_effectiveness)}\n              </span>\n            </div>\n\n            {/* Order Status */}\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-white/70 text-sm\">حالة الطلب:</span>\n              <span className={`px-3 py-1 rounded-full text-xs font-medium ${getOrderStatusColor(visit.order_status)}`}>\n                {getStatusLabel(visit.order_status)}\n              </span>\n            </div>\n\n            {/* Managers */}\n            {visit.managers_notified && visit.managers_notified.length > 0 && (\n              <div className=\"flex items-start gap-2\">\n                <span className=\"text-white/70 text-sm\">المدراء:</span>\n                <div className=\"flex-1\">\n                  {visit.managers_notified.slice(0, 2).map((manager, index) => (\n                    <span key={index} className=\"text-blue-300 text-xs bg-blue-500/20 px-2 py-1 rounded mr-1\">\n                      {manager}\n                    </span>\n                  ))}\n                  {visit.managers_notified.length > 2 && (\n                    <span className=\"text-white/60 text-xs\">+{visit.managers_notified.length - 2}</span>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Products Count */}\n            {visit.products_discussed && visit.products_discussed.length > 0 && (\n              <div className=\"flex items-center gap-2 text-white/70 text-sm\">\n                <span>💊</span>\n                <span>{visit.products_discussed.length} منتج تم مناقشته</span>\n              </div>\n            )}\n          </div>\n\n          {/* Visit Notes Preview */}\n          {visit.visit_notes && (\n            <div className=\"mt-4 pt-4 border-t border-white/10\">\n              <p className=\"text-white/60 text-sm line-clamp-2\">\n                {visit.visit_notes}\n              </p>\n            </div>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n};\n\n// Login Logs List Component\nconst LoginLogsList = ({ loginLogs, loading, canViewGPS }) => {\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto mb-4\"></div>\n          <p>جاري تحميل سجل تسجيل الدخول...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20\">\n      <h3 className=\"text-xl font-bold text-white mb-6 flex items-center gap-2\">\n        <span>🔐</span>\n        سجل تسجيل الدخول\n      </h3>\n      \n      <div className=\"space-y-4\">\n        {loginLogs.map((log) => (\n          <div key={log.id} className=\"bg-white/5 rounded-lg p-4 border border-white/10\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {/* User Info */}\n              <div>\n                <div className=\"font-medium text-white\">{log.user_name}</div>\n                <div className=\"text-white/60 text-sm\">{log.user_role}</div>\n                <div className=\"text-white/70 text-sm\">\n                  {new Date(log.login_time).toLocaleString('ar-EG')}\n                </div>\n              </div>\n              \n              {/* Device & IP */}\n              <div>\n                <div className=\"text-white/70 text-sm\">IP: {log.ip_address}</div>\n                <div className=\"text-white/70 text-sm\">{log.device_type}</div>\n                <div className=\"flex items-center gap-2 mt-1\">\n                  <span className={`px-2 py-1 rounded text-xs ${\n                    log.biometric_status === 'verified' ? 'bg-green-500/20 text-green-300' : 'bg-red-500/20 text-red-300'\n                  }`}>\n                    📱 {log.biometric_status === 'verified' ? 'تم التحقق البيومتري' : 'لا يوجد تحقق بيومتري'}\n                  </span>\n                </div>\n              </div>\n              \n              {/* Location */}\n              <div>\n                {canViewGPS && log.location ? (\n                  <div>\n                    <div className=\"text-white/70 text-sm flex items-center gap-1\">\n                      <span>📍</span>\n                      {log.location.address}\n                    </div>\n                    <div className=\"text-white/60 text-xs\">\n                      {log.location.latitude.toFixed(4)}, {log.location.longitude.toFixed(4)}\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"text-white/50 text-sm\">الموقع محجوب</div>\n                )}\n                \n                <div className=\"flex items-center gap-2 mt-1\">\n                  <span className={`px-2 py-1 rounded text-xs ${\n                    log.selfie_status === 'captured' ? 'bg-blue-500/20 text-blue-300' : 'bg-gray-500/20 text-gray-300'\n                  }`}>\n                    📸 {log.selfie_status === 'captured' ? 'تم التقاط صورة شخصية' : 'لا توجد صورة شخصية'}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\n// Visit Details Modal Component\nconst VisitDetailsModal = ({ \n  visit, \n  onClose, \n  canViewGPS, \n  getEffectivenessColor, \n  getOrderStatusColor, \n  getStatusLabel, \n  getEffectivenessLabel \n}) => {\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white/10 backdrop-blur-lg rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-white/20\">\n        <div className=\"p-6\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center\">\n                <span className=\"text-2xl text-white\">🏥</span>\n              </div>\n              <div>\n                <h2 className=\"text-2xl font-bold text-white\">{visit.clinic_name}</h2>\n                <p className=\"text-white/70\">{visit.doctor_name}</p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-white/70 hover:text-white text-2xl\"\n            >\n              ✕\n            </button>\n          </div>\n\n          {/* Visit Details Grid */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6\">\n            {/* Basic Info */}\n            <div className=\"bg-white/5 rounded-lg p-6\">\n              <h3 className=\"font-bold text-lg text-white mb-4 flex items-center gap-2\">\n                <span>📋</span>\n                معلومات الزيارة\n              </h3>\n              \n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-white/70\">المندوب:</span>\n                  <span className=\"text-white font-medium\">{visit.medical_rep_name}</span>\n                </div>\n                \n                <div className=\"flex justify-between\">\n                  <span className=\"text-white/70\">التاريخ:</span>\n                  <span className=\"text-white\">{new Date(visit.visit_date).toLocaleDateString('ar-EG')}</span>\n                </div>\n                \n                <div className=\"flex justify-between\">\n                  <span className=\"text-white/70\">الوقت:</span>\n                  <span className=\"text-white\">\n                    {new Date(visit.visit_date).toLocaleTimeString('ar-EG', { \n                      hour: '2-digit', \n                      minute: '2-digit' \n                    })}\n                  </span>\n                </div>\n                \n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-white/70\">الفعالية:</span>\n                  <span className={`px-3 py-1 rounded-full text-xs font-medium border ${getEffectivenessColor(visit.visit_effectiveness)}`}>\n                    {getEffectivenessLabel(visit.visit_effectiveness)}\n                  </span>\n                </div>\n                \n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-white/70\">حالة الطلب:</span>\n                  <span className={`px-3 py-1 rounded-full text-xs font-medium ${getOrderStatusColor(visit.order_status)}`}>\n                    {getStatusLabel(visit.order_status)}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {/* Location Info (GPS for admin only) */}\n            <div className=\"bg-white/5 rounded-lg p-6\">\n              <h3 className=\"font-bold text-lg text-white mb-4 flex items-center gap-2\">\n                <span>📍</span>\n                معلومات الموقع\n              </h3>\n              \n              {canViewGPS && visit.location ? (\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/70\">العنوان:</span>\n                    <span className=\"text-white text-sm\">{visit.location.address}</span>\n                  </div>\n                  \n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/70\">خط العرض:</span>\n                    <span className=\"text-white font-mono text-sm\">{visit.location.latitude}</span>\n                  </div>\n                  \n                  <div className=\"flex justify-between\">\n                    <span className=\"text-white/70\">خط الطول:</span>\n                    <span className=\"text-white font-mono text-sm\">{visit.location.longitude}</span>\n                  </div>\n                  \n                  {/* Google Maps Link */}\n                  <div className=\"pt-3\">\n                    <a\n                      href={`https://maps.google.com/?q=${visit.location.latitude},${visit.location.longitude}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm flex items-center gap-2 w-full justify-center\"\n                    >\n                      <span>🗺️</span>\n                      عرض على الخريطة\n                    </a>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"text-center text-white/50 py-8\">\n                  <span className=\"text-4xl block mb-2\">🔒</span>\n                  {canViewGPS ? 'معلومات الموقع غير متاحة' : 'غير مصرح لك بعرض معلومات الموقع'}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Additional Details */}\n          <div className=\"space-y-6\">\n            {/* Managers */}\n            {visit.managers_notified && visit.managers_notified.length > 0 && (\n              <div className=\"bg-white/5 rounded-lg p-6\">\n                <h3 className=\"font-bold text-lg text-white mb-4 flex items-center gap-2\">\n                  <span>👔</span>\n                  المدراء المبلغين\n                </h3>\n                <div className=\"flex flex-wrap gap-2\">\n                  {visit.managers_notified.map((manager, index) => (\n                    <span key={index} className=\"bg-blue-500/20 text-blue-300 px-3 py-1 rounded-full text-sm border border-blue-500/30\">\n                      {manager}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Products Discussed */}\n            {visit.products_discussed && visit.products_discussed.length > 0 && (\n              <div className=\"bg-white/5 rounded-lg p-6\">\n                <h3 className=\"font-bold text-lg text-white mb-4 flex items-center gap-2\">\n                  <span>💊</span>\n                  المنتجات المناقشة\n                </h3>\n                <div className=\"flex flex-wrap gap-2\">\n                  {visit.products_discussed.map((product, index) => (\n                    <span key={index} className=\"bg-purple-500/20 text-purple-300 px-3 py-1 rounded-full text-sm border border-purple-500/30\">\n                      {product}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Visit Notes */}\n            {visit.visit_notes && (\n              <div className=\"bg-white/5 rounded-lg p-6\">\n                <h3 className=\"font-bold text-lg text-white mb-4 flex items-center gap-2\">\n                  <span>📝</span>\n                  ملاحظات الزيارة\n                </h3>\n                <p className=\"text-white/80 leading-relaxed\">{visit.visit_notes}</p>\n              </div>\n            )}\n          </div>\n\n          {/* Close Button */}\n          <div className=\"flex justify-end pt-6\">\n            <button\n              onClick={onClose}\n              className=\"px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium\"\n            >\n              إغلاق\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VisitManagement;","// Activity Logger Utility - أداة تسجيل الأنشطة\n// المطلوب: تسجيل تلقائي لجميع الأنشطة مع GPS والتفاصيل\n\nimport axios from 'axios';\n\nclass ActivityLogger {\n  constructor() {\n    this.API = (process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001') + '/api';\n    this.isEnabled = true;\n    this.currentPosition = null;\n    this.retryQueue = [];\n  }\n\n  // الحصول على الموقع الحالي\n  async getCurrentPosition() {\n    if (!navigator.geolocation) {\n      console.warn('Geolocation is not supported');\n      return null;\n    }\n\n    try {\n      const position = await new Promise((resolve, reject) => {\n        navigator.geolocation.getCurrentPosition(\n          resolve,\n          reject,\n          {\n            enableHighAccuracy: true,\n            timeout: 15000,\n            maximumAge: 300000 // 5 minutes cache\n          }\n        );\n      });\n\n      this.currentPosition = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        accuracy: position.coords.accuracy,\n        altitude: position.coords.altitude,\n        speed: position.coords.speed,\n        heading: position.coords.heading,\n        timestamp: new Date().toISOString()\n      };\n\n      // محاولة الحصول على العنوان\n      try {\n        const address = await this.getAddressFromCoordinates(\n          position.coords.latitude,\n          position.coords.longitude\n        );\n        this.currentPosition.address = address.formatted_address;\n        this.currentPosition.city = address.city;\n        this.currentPosition.area = address.area;\n        this.currentPosition.country = address.country;\n      } catch (error) {\n        console.warn('Failed to get address from coordinates:', error);\n        this.currentPosition.address = `${position.coords.latitude.toFixed(4)}, ${position.coords.longitude.toFixed(4)}`;\n      }\n\n      return this.currentPosition;\n    } catch (error) {\n      console.warn('Failed to get current position:', error);\n      return null;\n    }\n  }\n\n  // تحويل الإحداثيات إلى عنوان\n  async getAddressFromCoordinates(lat, lng) {\n    const GOOGLE_MAPS_API_KEY = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\n    \n    if (!GOOGLE_MAPS_API_KEY) {\n      return {\n        formatted_address: `${lat.toFixed(4)}, ${lng.toFixed(4)}`,\n        city: '',\n        area: '',\n        country: 'مصر'\n      };\n    }\n\n    try {\n      const response = await fetch(\n        `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=${GOOGLE_MAPS_API_KEY}&language=ar`\n      );\n      const data = await response.json();\n      \n      if (data.results && data.results.length > 0) {\n        const result = data.results[0];\n        return {\n          formatted_address: result.formatted_address,\n          city: this.extractAddressComponent(result, 'locality') || \n                this.extractAddressComponent(result, 'administrative_area_level_2'),\n          area: this.extractAddressComponent(result, 'administrative_area_level_3') ||\n                this.extractAddressComponent(result, 'sublocality'),\n          country: this.extractAddressComponent(result, 'country') || 'مصر'\n        };\n      }\n    } catch (error) {\n      console.warn('Geocoding failed:', error);\n    }\n\n    return {\n      formatted_address: `${lat.toFixed(4)}, ${lng.toFixed(4)}`,\n      city: '',\n      area: '',\n      country: 'مصر'\n    };\n  }\n\n  // استخراج مكونات العنوان\n  extractAddressComponent(result, type) {\n    const component = result.address_components.find(\n      comp => comp.types.includes(type)\n    );\n    return component ? component.long_name : '';\n  }\n\n  // الحصول على معلومات الجهاز\n  getDeviceInfo() {\n    const ua = navigator.userAgent;\n    \n    return {\n      device_type: this.getDeviceType(),\n      operating_system: this.getOperatingSystem(),\n      browser: this.getBrowserInfo(),\n      browser_version: this.getBrowserVersion(),\n      user_agent: ua,\n      screen_resolution: `${window.screen.width}x${window.screen.height}`,\n      viewport_size: `${window.innerWidth}x${window.innerHeight}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      language: navigator.language,\n      online: navigator.onLine\n    };\n  }\n\n  getDeviceType() {\n    const ua = navigator.userAgent;\n    if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) {\n      return 'tablet';\n    } else if (/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) {\n      return 'mobile';\n    }\n    return 'desktop';\n  }\n\n  getOperatingSystem() {\n    const ua = navigator.userAgent;\n    const os = [\n      { name: 'Windows 11', regex: /Windows NT 10\\.0.*rv:91/ },\n      { name: 'Windows 10', regex: /Windows NT 10\\.0/ },\n      { name: 'Windows 8.1', regex: /Windows NT 6\\.3/ },\n      { name: 'Windows 8', regex: /Windows NT 6\\.2/ },\n      { name: 'Windows 7', regex: /Windows NT 6\\.1/ },\n      { name: 'macOS', regex: /Mac OS X/ },\n      { name: 'iOS', regex: /(iPhone|iPad|iPod)/ },\n      { name: 'Android', regex: /Android/ },\n      { name: 'Linux', regex: /Linux/ },\n      { name: 'Unix', regex: /X11/ }\n    ];\n\n    for (const o of os) {\n      if (o.regex.test(ua)) {\n        return o.name;\n      }\n    }\n    return 'Unknown';\n  }\n\n  getBrowserInfo() {\n    const ua = navigator.userAgent;\n    const browsers = [\n      { name: 'Chrome', regex: /Chrome/ },\n      { name: 'Firefox', regex: /Firefox/ },\n      { name: 'Safari', regex: /Safari/ },\n      { name: 'Edge', regex: /Edge/ },\n      { name: 'Opera', regex: /Opera/ },\n      { name: 'Internet Explorer', regex: /MSIE/ }\n    ];\n\n    for (const browser of browsers) {\n      if (browser.regex.test(ua)) {\n        return browser.name;\n      }\n    }\n    return 'Unknown';\n  }\n\n  getBrowserVersion() {\n    const ua = navigator.userAgent;\n    const match = ua.match(/(Chrome|Firefox|Safari|Edge|Opera)\\/(\\d+\\.\\d+)/);\n    return match ? match[2] : 'Unknown';\n  }\n\n  // تسجيل نشاط\n  async logActivity(type, action, targetType = null, targetId = null, targetName = null, details = {}) {\n    if (!this.isEnabled) return;\n\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) {\n        console.warn('No access token available for activity logging');\n        return;\n      }\n\n      // الحصول على الموقع (optional)\n      const location = await this.getCurrentPosition();\n\n      const activityData = {\n        type,\n        action,\n        target_type: targetType,\n        target_id: targetId,\n        target_name: targetName,\n        location: location,\n        device_info: this.getDeviceInfo(),\n        details: {\n          ...details,\n          page_url: window.location.href,\n          page_title: document.title,\n          referrer: document.referrer,\n          session_storage_length: sessionStorage.length,\n          local_storage_length: localStorage.length\n        },\n        metadata: {\n          logged_at: new Date().toISOString(),\n          user_agent: navigator.userAgent,\n          connection_type: navigator.connection?.effectiveType || 'unknown',\n          battery_level: navigator.getBattery ? await navigator.getBattery().then(b => b.level) : null\n        }\n      };\n\n      const response = await axios.post(`${this.API}/activities`, activityData, {\n        headers: { \n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        timeout: 10000\n      });\n\n      console.log('Activity logged successfully:', response.data);\n      return response.data;\n\n    } catch (error) {\n      console.error('Failed to log activity:', error);\n      \n      // إضافة إلى queue للمحاولة مرة أخرى لاحقاً\n      this.retryQueue.push({\n        type, action, targetType, targetId, targetName, details,\n        timestamp: new Date().toISOString(),\n        retryCount: 0\n      });\n\n      // محاولة إعادة الإرسال بعد فترة\n      this.scheduleRetry();\n    }\n  }\n\n  // جدولة إعادة المحاولة\n  scheduleRetry() {\n    if (this.retryQueue.length === 0) return;\n\n    setTimeout(async () => {\n      const failedActivity = this.retryQueue.shift();\n      if (failedActivity && failedActivity.retryCount < 3) {\n        failedActivity.retryCount++;\n        try {\n          await this.logActivity(\n            failedActivity.type,\n            failedActivity.action,\n            failedActivity.targetType,\n            failedActivity.targetId,\n            failedActivity.targetName,\n            failedActivity.details\n          );\n        } catch (error) {\n          if (failedActivity.retryCount < 3) {\n            this.retryQueue.push(failedActivity);\n          }\n        }\n      }\n    }, 5000); // محاولة مرة أخرى بعد 5 ثوان\n  }\n\n  // تسجيل أنشطة محددة\n  async logVisitRegistration(clinicId, clinicName, visitDetails = {}) {\n    return this.logActivity(\n      'visit_registration',\n      'تسجيل زيارة عيادة',\n      'clinic',\n      clinicId,\n      clinicName,\n      {\n        visit_duration: visitDetails.duration || null,\n        doctor_present: visitDetails.doctorPresent || null,\n        samples_given: visitDetails.samplesGiven || 0,\n        notes: visitDetails.notes || '',\n        visit_type: visitDetails.type || 'routine',\n        ...visitDetails\n      }\n    );\n  }\n\n  async logClinicRegistration(clinicId, clinicName, clinicDetails = {}) {\n    return this.logActivity(\n      'clinic_registration',\n      'تسجيل عيادة جديدة',\n      'clinic',\n      clinicId,\n      clinicName,\n      {\n        doctor_name: clinicDetails.doctorName || '',\n        specialty: clinicDetails.specialty || '',\n        classification: clinicDetails.classification || '',\n        phone: clinicDetails.phone || '',\n        address: clinicDetails.address || '',\n        ...clinicDetails\n      }\n    );\n  }\n\n  async logOrderCreation(orderId, orderDetails = {}) {\n    return this.logActivity(\n      'order_creation',\n      'إنشاء طلب جديد',\n      'order',\n      orderId,\n      `طلب رقم ${orderId}`,\n      {\n        order_value: orderDetails.totalValue || 0,\n        items_count: orderDetails.itemsCount || 0,\n        clinic_name: orderDetails.clinicName || '',\n        payment_method: orderDetails.paymentMethod || '',\n        ...orderDetails\n      }\n    );\n  }\n\n  async logProductUpdate(productId, productName, updateDetails = {}) {\n    return this.logActivity(\n      'product_update',\n      'تحديث منتج',\n      'product',\n      productId,\n      productName,\n      {\n        old_price: updateDetails.oldPrice || null,\n        new_price: updateDetails.newPrice || null,\n        change_reason: updateDetails.changeReason || '',\n        update_type: updateDetails.updateType || 'general',\n        ...updateDetails\n      }\n    );\n  }\n\n  async logUserCreation(userId, userName, userDetails = {}) {\n    return this.logActivity(\n      'user_creation',\n      'إنشاء مستخدم جديد',\n      'user',\n      userId,\n      userName,\n      {\n        user_role: userDetails.role || '',\n        department: userDetails.department || '',\n        permissions: userDetails.permissions || [],\n        ...userDetails\n      }\n    );\n  }\n\n  async logSystemAccess(section, sectionDetails = {}) {\n    return this.logActivity(\n      'system_access',\n      `دخول قسم ${section}`,\n      'system',\n      section,\n      `قسم ${section}`,\n      {\n        access_time: new Date().toISOString(),\n        previous_section: sectionDetails.previousSection || '',\n        access_method: sectionDetails.accessMethod || 'navigation',\n        ...sectionDetails\n      }\n    );\n  }\n\n  async logLogin(loginDetails = {}) {\n    return this.logActivity(\n      'login',\n      'تسجيل دخول',\n      'system',\n      'login',\n      'نظام EP Group',\n      {\n        login_method: loginDetails.method || 'password',\n        biometric_verified: loginDetails.biometricVerified || false,\n        failed_attempts: loginDetails.failedAttempts || 0,\n        remember_me: loginDetails.rememberMe || false,\n        ...loginDetails\n      }\n    );\n  }\n\n  // تعطيل/تفعيل التسجيل\n  enable() {\n    this.isEnabled = true;\n  }\n\n  disable() {\n    this.isEnabled = false;\n  }\n\n  // مسح queue إعادة المحاولة\n  clearRetryQueue() {\n    this.retryQueue = [];\n  }\n}\n\n// إنشاء instance واحد للاستخدام في جميع أنحاء التطبيق\nexport const activityLogger = new ActivityLogger();\n\nexport default activityLogger;"],"names":["_ref","user","language","isRTL","onClose","onSave","formData","setFormData","useState","clinic_id","visit_date","Date","toISOString","split","visit_time","toTimeString","substring","managers","visit_effectiveness","order_status","visit_notes","products_discussed","samples_given","next_visit_date","clinics","setClinics","setManagers","products","setProducts","currentLocation","setCurrentLocation","locationLoading","setLocationLoading","loading","setLoading","t","useTranslation","API","useEffect","fetchClinics","fetchManagers","fetchProducts","getCurrentLocation","navigator","geolocation","getCurrentPosition","position","latitude","coords","longitude","accuracy","timestamp","console","log","error","alert","enableHighAccuracy","timeout","maximumAge","async","token","localStorage","getItem","response","axios","get","concat","headers","Authorization","data","id","name","doctor_name","specialization","classification","address","full_name","role","unit","handleInputChange","field","value","prev","_objectSpread","_jsx","className","children","_jsxs","onClick","onSubmit","e","preventDefault","length","_clinics$find","visitData","medical_rep_id","medical_rep_name","location","visit_datetime","created_at","status","post","activityLogger","logVisit","clinic_name","find","c","managers_notified","rep_name","rep_role","onChange","target","required","map","clinic","type","manager","checked","includes","handleManagerSelection","managerId","filter","product","handleProductSelection","productId","rows","placeholder","disabled","_Fragment","VisitsList","_ref2","visits","onVisitClick","canViewGPS","getEffectivenessColor","getOrderStatusColor","getStatusLabel","getEffectivenessLabel","visit","title","toLocaleDateString","toLocaleTimeString","hour","minute","slice","index","LoginLogsList","_ref3","loginLogs","user_name","user_role","login_time","toLocaleString","ip_address","device_type","biometric_status","toFixed","selfie_status","VisitDetailsModal","_ref4","href","rel","activeTab","setActiveTab","setVisits","setLoginLogs","showNewVisitModal","setShowNewVisitModal","selectedVisit","setSelectedVisit","showVisitDetails","setShowVisitDetails","searchTerm","setSearchTerm","filterStatus","setFilterStatus","filterDate","setFilterDate","canViewAllVisits","fetchVisitData","fetchLoginLogs","logSystemAccess","previousSection","sessionStorage","accessMethod","userRole","setItem","visitsUrl","effectiveness","filteredVisits","_visit$clinic_name","_visit$doctor_name","_visit$medical_rep_na","_visit$visit_date","matchesSearch","toLowerCase","matchesStatus","matchesDate","handleNewVisit","NewVisitForm","newVisit","constructor","this","isEnabled","currentPosition","retryQueue","warn","Promise","resolve","reject","altitude","speed","heading","getAddressFromCoordinates","formatted_address","city","area","country","lat","lng","GOOGLE_MAPS_API_KEY","process","fetch","json","results","result","extractAddressComponent","component","address_components","comp","types","long_name","getDeviceInfo","ua","userAgent","getDeviceType","operating_system","getOperatingSystem","browser","getBrowserInfo","browser_version","getBrowserVersion","user_agent","screen_resolution","window","screen","width","height","viewport_size","innerWidth","innerHeight","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","online","onLine","test","os","regex","o","browsers","match","logActivity","action","targetType","arguments","undefined","targetId","targetName","details","_navigator$connection","activityData","target_type","target_id","target_name","device_info","page_url","page_title","document","referrer","session_storage_length","local_storage_length","metadata","logged_at","connection_type","connection","effectiveType","battery_level","getBattery","then","b","level","push","retryCount","scheduleRetry","setTimeout","failedActivity","shift","logVisitRegistration","clinicId","clinicName","visitDetails","visit_duration","duration","doctor_present","doctorPresent","samplesGiven","notes","visit_type","logClinicRegistration","clinicDetails","doctorName","specialty","phone","logOrderCreation","orderId","orderDetails","order_value","totalValue","items_count","itemsCount","payment_method","paymentMethod","logProductUpdate","productName","updateDetails","old_price","oldPrice","new_price","newPrice","change_reason","changeReason","update_type","updateType","logUserCreation","userId","userName","userDetails","department","permissions","section","sectionDetails","access_time","previous_section","access_method","logLogin","loginDetails","login_method","method","biometric_verified","biometricVerified","failed_attempts","failedAttempts","remember_me","rememberMe","enable","disable","clearRetryQueue"],"sourceRoot":""}