{"version":3,"file":"static/js/982.ad54840e.chunk.js","mappings":"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","sources":["components/Products/ProductManagement.js","utils/activityLogger.js"],"sourcesContent":["// Enhanced Product Management Component - إدارة المنتجات المحسنة\nimport React, { useState, useEffect } from 'react';\nimport { useTranslation } from '../../localization/translations.js';\nimport axios from 'axios';\nimport { activityLogger } from '../../utils/activityLogger.js';\n\nconst ProductManagement = ({ user, language, isRTL }) => {\n  const [products, setProducts] = useState([]);\n  const [lines, setLines] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showProductModal, setShowProductModal] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterCategory, setFilterCategory] = useState('all');\n  const [filterLine, setFilterLine] = useState('all');\n  \n  const { t } = useTranslation(language);\n  const API = (process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001') + '/api';\n\n  // Check if user can see prices\n  const canSeePrices = user && (\n    user.role === 'admin' || \n    user.role === 'gm' || \n    user.role === 'accounting' || \n    user.role === 'finance' ||\n    ['admin', 'gm', 'accounting', 'finance'].includes(user.role)\n  );\n\n  useEffect(() => {\n    fetchProducts();\n    fetchLines();\n    \n    // Log system access\n    activityLogger.logSystemAccess('إدارة المنتجات', {\n      previousSection: sessionStorage.getItem('previousSection') || '',\n      accessMethod: 'navigation',\n      canSeePrices: canSeePrices\n    });\n    \n    sessionStorage.setItem('previousSection', 'إدارة المنتجات');\n  }, []);\n\n  const fetchLines = async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      const response = await axios.get(`${API}/lines`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setLines(response.data || []);\n    } catch (error) {\n      console.error('Error fetching lines:', error);\n      setLines([]);\n    }\n  };\n\n  const fetchProducts = async () => {\n    try {\n      const token = localStorage.getItem('access_token');\n      const response = await axios.get(`${API}/products`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setProducts(response.data || []);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n      // Mock data for development\n      setProducts([\n        {\n          id: 'prod-001',\n          name: 'أموكسيسيلين 500mg',\n          description: 'مضاد حيوي واسع المجال',\n          category: 'مضادات حيوية',\n          unit: 'ڤايل',\n          line_id: 'line-001',\n          line_name: 'خط القاهرة الكبرى',\n          price: 25.50,\n          price_type: 'per_vial',\n          current_stock: 150,\n          min_stock: 20,\n          is_active: true,\n          created_at: '2024-01-01T10:00:00Z'\n        },\n        {\n          id: 'prod-002',\n          name: 'فيتامين د3',\n          description: 'مكمل غذائي لتقوية العظام',\n          category: 'فيتامينات',\n          unit: 'علبة',\n          line_id: 'line-002',\n          line_name: 'خط الإسكندرية',\n          price: 120.00,\n          price_type: 'per_box',\n          current_stock: 80,\n          min_stock: 15,\n          is_active: true,\n          created_at: '2024-01-02T10:00:00Z'\n        },\n        {\n          id: 'prod-003',\n          name: 'أنسولين طويل المفعول',\n          description: 'علاج السكري النوع الأول والثاني',\n          category: 'هرمونات',\n          unit: 'قلم',\n          line_id: 'line-001',\n          line_name: 'خط القاهرة الكبرى',\n          price: 85.00,\n          price_type: 'per_pen',\n          current_stock: 45,\n          min_stock: 10,\n          is_active: true,\n          created_at: '2024-01-03T10:00:00Z'\n        }\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCreateProduct = async (productData) => {\n    try {\n      const token = localStorage.getItem('access_token');\n      console.log('🔧 Creating product with data:', productData);\n      \n      const response = await axios.post(`${API}/products`, productData, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      console.log('✅ Product created successfully:', response.data);\n      \n      // تسجيل النشاط\n      await activityLogger.logActivity(\n        'product_creation',\n        'إنشاء منتج جديد',\n        'product',\n        response.data.id,\n        productData.name,\n        {\n          price: productData.price,\n          unit: productData.unit,\n          line_id: productData.line_id,\n          category: productData.category,\n          stock_quantity: productData.stock_quantity || 0,\n          created_by_role: user?.role\n        }\n      );\n      \n      fetchProducts();\n      setShowProductModal(false);\n      alert('تم إنشاء المنتج بنجاح');\n    } catch (error) {\n      console.error('❌ Error creating product:', error);\n      const errorMessage = error.response?.data?.detail || 'حدث خطأ أثناء إنشاء المنتج';\n      alert(`خطأ في إنشاء المنتج: ${errorMessage}`);\n    }\n  };\n\n  const handleUpdateProduct = async (productId, productData) => {\n    try {\n      const currentProduct = products.find(p => p.id === productId);\n      const token = localStorage.getItem('access_token');\n      console.log('🔧 Updating product:', productId, 'with data:', productData);\n      \n      const response = await axios.put(`${API}/products/${productId}`, productData, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      console.log('✅ Product updated successfully:', response.data);\n      \n      // تسجيل النشاط\n      await activityLogger.logProductUpdate(\n        productId,\n        currentProduct?.name || productData.name,\n        {\n          old_price: currentProduct?.price,\n          new_price: productData.price,\n          old_unit: currentProduct?.unit,\n          new_unit: productData.unit,\n          changeReason: 'تحديث يدوي من واجهة الإدارة',\n          updateType: 'manual_update',\n          updated_fields: Object.keys(productData),\n          updated_by_role: user?.role\n        }\n      );\n      \n      fetchProducts();\n      setShowProductModal(false);\n      alert('تم تحديث المنتج بنجاح');\n    } catch (error) {\n      console.error('❌ Error updating product:', error);\n      const errorMessage = error.response?.data?.detail || 'حدث خطأ أثناء تحديث المنتج';\n      alert(`خطأ في تحديث المنتج: ${errorMessage}`);\n    }\n  };\n\n  const handleDeleteProduct = async (productId) => {\n    const productToDelete = products.find(p => p.id === productId);\n    \n    if (window.confirm('هل أنت متأكد من حذف هذا المنتج؟')) {\n      try {\n        const token = localStorage.getItem('access_token');\n        console.log('🔧 Deleting product:', productId);\n        \n        const response = await axios.delete(`${API}/products/${productId}`, {\n          headers: { Authorization: `Bearer ${token}` }\n        });\n        \n        console.log('✅ Product deleted successfully:', response.data);\n        \n        // تسجيل النشاط\n        await activityLogger.logActivity(\n          'product_deletion',\n          'حذف منتج',\n          'product',\n          productId,\n          productToDelete?.name || `منتج ${productId}`,\n          {\n            deleted_product_name: productToDelete?.name,\n            deleted_product_price: productToDelete?.price,\n            deleted_product_unit: productToDelete?.unit,\n            deletion_reason: 'حذف يدوي من واجهة الإدارة',\n            deleted_by_role: user?.role,\n            stock_at_deletion: productToDelete?.stock_quantity || 0\n          }\n        );\n        \n        fetchProducts();\n        alert('تم حذف المنتج بنجاح');\n      } catch (error) {\n        console.error('❌ Error deleting product:', error);\n        const errorMessage = error.response?.data?.detail || 'حدث خطأ أثناء حذف المنتج';\n        alert(`خطأ في حذف المنتج: ${errorMessage}`);\n      }\n    }\n  };\n\n  // Filter products\n  const filteredProducts = products.filter(product => {\n    const matchesSearch = product.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         product.description?.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = filterCategory === 'all' || product.category === filterCategory;\n    const matchesLine = filterLine === 'all' || product.line_id === filterLine;\n    \n    return matchesSearch && matchesCategory && matchesLine;\n  });\n\n  // Get unique categories\n  const categories = [...new Set(products.map(p => p.category).filter(Boolean))];\n\n  const getStockStatus = (product) => {\n    if (product.current_stock <= product.min_stock) return 'critical';\n    if (product.current_stock <= product.min_stock * 2) return 'low';\n    return 'good';\n  };\n\n  const getStockColor = (status) => {\n    switch (status) {\n      case 'critical': return 'bg-red-500/20 text-red-300 border-red-500/30';\n      case 'low': return 'bg-yellow-500/20 text-yellow-300 border-yellow-500/30';\n      default: return 'bg-green-500/20 text-green-300 border-green-500/30';\n    }\n  };\n\n  const getPriceTypeLabel = (priceType) => {\n    const labels = {\n      'per_vial': 'سعر الڤايل',\n      'per_box': 'سعر العلبة',\n      'per_pen': 'سعر القلم',\n      'per_tube': 'سعر الأنبوب',\n      'per_bottle': 'سعر الزجاجة'\n    };\n    return labels[priceType] || 'سعر الوحدة';\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n          <p>جاري تحميل المنتجات...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"product-management-container\">\n      {/* Header */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center\">\n              <span className=\"text-2xl text-white\">📦</span>\n            </div>\n            <div>\n              <h1 className=\"text-3xl font-bold\">{t('products', 'title')}</h1>\n              <p className=\"text-lg opacity-75\">إدارة شاملة للمنتجات مع التحكم في الأسعار والمخزون</p>\n            </div>\n          </div>\n          \n          <button\n            onClick={() => {\n              setSelectedProduct(null);\n              setShowProductModal(true);\n              console.log('🔧 Opening product modal for new product');\n            }}\n            className=\"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 font-medium\"\n          >\n            <span>➕</span>\n            إضافة منتج جديد\n          </button>\n        </div>\n      </div>\n\n      {/* Stats Summary */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\">\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n          <div className=\"text-2xl font-bold\">{products.length}</div>\n          <div className=\"text-sm opacity-75\">إجمالي المنتجات</div>\n        </div>\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n          <div className=\"text-2xl font-bold\">{products.filter(p => p.is_active).length}</div>\n          <div className=\"text-sm opacity-75\">منتجات نشطة</div>\n        </div>\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n          <div className=\"text-2xl font-bold\">{products.filter(p => getStockStatus(p) === 'critical').length}</div>\n          <div className=\"text-sm opacity-75\">مخزون حرج</div>\n        </div>\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20\">\n          <div className=\"text-2xl font-bold\">{categories.length}</div>\n          <div className=\"text-sm opacity-75\">فئات المنتجات</div>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 mb-6\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium mb-2\">البحث</label>\n            <input\n              type=\"text\"\n              placeholder=\"ابحث عن المنتجات...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n            />\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-2\">الفئة</label>\n            <select\n              value={filterCategory}\n              onChange={(e) => setFilterCategory(e.target.value)}\n              className=\"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n            >\n              <option value=\"all\">جميع الفئات</option>\n              {categories.map(category => (\n                <option key={category} value={category}>{category}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium mb-2\">الخط</label>\n            <select\n              value={filterLine}\n              onChange={(e) => setFilterLine(e.target.value)}\n              className=\"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n            >\n              <option value=\"all\">جميع الخطوط</option>\n              {lines.map(line => (\n                <option key={line.id} value={line.id}>{line.name}</option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Products Table */}\n      <div className=\"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-white/10 bg-white/5\">\n                <th className=\"px-6 py-4 text-right text-sm font-medium\">المنتج</th>\n                <th className=\"px-6 py-4 text-right text-sm font-medium\">الفئة</th>\n                <th className=\"px-6 py-4 text-right text-sm font-medium\">الخط</th>\n                <th className=\"px-6 py-4 text-right text-sm font-medium\">الوحدة</th>\n                {canSeePrices && (\n                  <th className=\"px-6 py-4 text-right text-sm font-medium\">السعر</th>\n                )}\n                <th className=\"px-6 py-4 text-right text-sm font-medium\">المخزون</th>\n                <th className=\"px-6 py-4 text-right text-sm font-medium\">الحالة</th>\n                <th className=\"px-6 py-4 text-right text-sm font-medium\">الإجراءات</th>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredProducts.map((product) => {\n                const stockStatus = getStockStatus(product);\n                return (\n                  <tr key={product.id} className=\"border-b border-white/5 hover:bg-white/5 transition-colors\">\n                    <td className=\"px-6 py-4\">\n                      <div className=\"font-medium\">{product.name}</div>\n                      <div className=\"text-sm opacity-75\">{product.description}</div>\n                    </td>\n                    <td className=\"px-6 py-4 text-sm\">\n                      <span className=\"px-2 py-1 bg-blue-500/20 text-blue-300 rounded-full text-xs\">\n                        {product.category || '-'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4 text-sm\">\n                      {product.line_name || 'غير محدد'}\n                    </td>\n                    <td className=\"px-6 py-4 text-sm\">\n                      <span className=\"px-2 py-1 bg-gray-500/20 text-gray-300 rounded text-xs\">\n                        {product.unit}\n                      </span>\n                    </td>\n                    {canSeePrices && (\n                      <td className=\"px-6 py-4 text-sm\">\n                        <div className=\"flex flex-col\">\n                          <span className=\"font-medium\">{product.price} ج.م</span>\n                          <span className=\"text-xs opacity-60\">\n                            {getPriceTypeLabel(product.price_type)}\n                          </span>\n                        </div>\n                      </td>\n                    )}\n                    <td className=\"px-6 py-4 text-sm\">\n                      <div className={`inline-block px-3 py-1 rounded-lg border text-center ${getStockColor(stockStatus)}`}>\n                        <div className=\"font-medium\">{product.current_stock}</div>\n                        <div className=\"text-xs\">الحد الأدنى: {product.min_stock}</div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 text-sm\">\n                      <span className={`inline-block px-2 py-1 rounded-full text-xs ${\n                        product.is_active ? 'bg-green-500/20 text-green-300' : 'bg-red-500/20 text-red-300'\n                      }`}>\n                        {product.is_active ? 'نشط' : 'غير نشط'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex gap-2\">\n                        <button\n                          onClick={() => {\n                            setSelectedProduct(product);\n                            setShowProductModal(true);\n                          }}\n                          className=\"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-xs\"\n                        >\n                          تعديل\n                        </button>\n                        <button\n                          onClick={() => handleDeleteProduct(product.id)}\n                          className=\"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-xs\"\n                        >\n                          حذف\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {filteredProducts.length === 0 && (\n        <div className=\"text-center py-12\">\n          <div className=\"text-6xl mb-4\">📦</div>\n          <h3 className=\"text-xl font-bold mb-2\">لا توجد منتجات</h3>\n          <p className=\"text-gray-600\">لم يتم العثور على منتجات مطابقة للبحث</p>\n        </div>\n      )}\n\n      {/* Product Modal */}\n      {showProductModal && (\n        <ProductModal\n          product={selectedProduct}\n          lines={lines}\n          onClose={() => setShowProductModal(false)}\n          onSave={selectedProduct ? \n            (data) => handleUpdateProduct(selectedProduct.id, data) : \n            handleCreateProduct\n          }\n          language={language}\n        />\n      )}\n    </div>\n  );\n};\n\n// Product Modal Component\nconst ProductModal = ({ product, lines, onClose, onSave, language }) => {\n  const [formData, setFormData] = useState({\n    name: product?.name || '',\n    description: product?.description || '',\n    category: product?.category || '',\n    unit: product?.unit || 'ڤايل',\n    line_id: product?.line_id || '',\n    price: product?.price || '',\n    price_type: product?.price_type || 'per_vial',\n    current_stock: product?.current_stock || '',\n    min_stock: product?.min_stock || 10,\n    is_active: product?.is_active !== undefined ? product.is_active : true\n  });\n\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    // Convert numeric fields\n    const processedData = {\n      ...formData,\n      price: parseFloat(formData.price),\n      current_stock: parseInt(formData.current_stock),\n      min_stock: parseInt(formData.min_stock)\n    };\n    \n    onSave(processedData);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white/10 backdrop-blur-lg rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-white/20\">\n        <div className=\"p-6\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <h3 className=\"text-2xl font-bold\">\n              {product ? 'تعديل المنتج' : 'إضافة منتج جديد'}\n            </h3>\n            <button onClick={onClose} className=\"text-white/70 hover:text-white text-2xl\">\n              ✕\n            </button>\n          </div>\n\n          {/* Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">اسم المنتج *</label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  value={formData.name}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">الفئة *</label>\n                <input\n                  type=\"text\"\n                  name=\"category\"\n                  value={formData.category}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                  placeholder=\"مضادات حيوية، فيتامينات، إلخ\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">الخط</label>\n                <select\n                  name=\"line_id\"\n                  value={formData.line_id}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                >\n                  <option value=\"\">اختر الخط</option>\n                  {lines.map(line => (\n                    <option key={line.id} value={line.id}>{line.name}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">وحدة القياس *</label>\n                <select\n                  name=\"unit\"\n                  value={formData.unit}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                  required\n                >\n                  <option value=\"ڤايل\">ڤايل</option>\n                  <option value=\"علبة\">علبة</option>\n                  <option value=\"قلم\">قلم</option>\n                  <option value=\"أنبوب\">أنبوب</option>\n                  <option value=\"زجاجة\">زجاجة</option>\n                  <option value=\"كيس\">كيس</option>\n                  <option value=\"شريط\">شريط</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">السعر (ج.م) *</label>\n                <input\n                  type=\"number\"\n                  step=\"0.01\"\n                  name=\"price\"\n                  value={formData.price}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">نوع السعر</label>\n                <select\n                  name=\"price_type\"\n                  value={formData.price_type}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                >\n                  <option value=\"per_vial\">سعر الڤايل</option>\n                  <option value=\"per_box\">سعر العلبة</option>\n                  <option value=\"per_pen\">سعر القلم</option>\n                  <option value=\"per_tube\">سعر الأنبوب</option>\n                  <option value=\"per_bottle\">سعر الزجاجة</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">الكمية الحالية</label>\n                <input\n                  type=\"number\"\n                  name=\"current_stock\"\n                  value={formData.current_stock}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium mb-2\">الحد الأدنى للمخزون</label>\n                <input\n                  type=\"number\"\n                  name=\"min_stock\"\n                  value={formData.min_stock}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">الوصف</label>\n              <textarea\n                name=\"description\"\n                value={formData.description}\n                onChange={handleInputChange}\n                rows=\"3\"\n                className=\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n                placeholder=\"وصف تفصيلي للمنتج...\"\n              />\n            </div>\n\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"checkbox\"\n                id=\"is_active\"\n                name=\"is_active\"\n                checked={formData.is_active}\n                onChange={handleInputChange}\n                className=\"w-4 h-4 text-purple-600 rounded\"\n              />\n              <label htmlFor=\"is_active\" className=\"text-sm font-medium\">\n                منتج نشط\n              </label>\n            </div>\n\n            {/* Submit Buttons */}\n            <div className=\"flex gap-3 pt-6\">\n              <button\n                type=\"submit\"\n                className=\"flex-1 bg-gradient-to-r from-purple-600 to-purple-700 text-white py-3 rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all\"\n              >\n                {product ? 'تحديث المنتج' : 'إضافة المنتج'}\n              </button>\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"flex-1 bg-gray-600 text-white py-3 rounded-lg hover:bg-gray-700 transition-colors\"\n              >\n                إلغاء\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductManagement;","// Activity Logger Utility - أداة تسجيل الأنشطة\n// المطلوب: تسجيل تلقائي لجميع الأنشطة مع GPS والتفاصيل\n\nimport axios from 'axios';\n\nclass ActivityLogger {\n  constructor() {\n    this.API = (process.env.REACT_APP_BACKEND_URL || 'http://localhost:8001') + '/api';\n    this.isEnabled = true;\n    this.currentPosition = null;\n    this.retryQueue = [];\n  }\n\n  // الحصول على الموقع الحالي\n  async getCurrentPosition() {\n    if (!navigator.geolocation) {\n      console.warn('Geolocation is not supported');\n      return null;\n    }\n\n    try {\n      const position = await new Promise((resolve, reject) => {\n        navigator.geolocation.getCurrentPosition(\n          resolve,\n          reject,\n          {\n            enableHighAccuracy: true,\n            timeout: 15000,\n            maximumAge: 300000 // 5 minutes cache\n          }\n        );\n      });\n\n      this.currentPosition = {\n        latitude: position.coords.latitude,\n        longitude: position.coords.longitude,\n        accuracy: position.coords.accuracy,\n        altitude: position.coords.altitude,\n        speed: position.coords.speed,\n        heading: position.coords.heading,\n        timestamp: new Date().toISOString()\n      };\n\n      // محاولة الحصول على العنوان\n      try {\n        const address = await this.getAddressFromCoordinates(\n          position.coords.latitude,\n          position.coords.longitude\n        );\n        this.currentPosition.address = address.formatted_address;\n        this.currentPosition.city = address.city;\n        this.currentPosition.area = address.area;\n        this.currentPosition.country = address.country;\n      } catch (error) {\n        console.warn('Failed to get address from coordinates:', error);\n        this.currentPosition.address = `${position.coords.latitude.toFixed(4)}, ${position.coords.longitude.toFixed(4)}`;\n      }\n\n      return this.currentPosition;\n    } catch (error) {\n      console.warn('Failed to get current position:', error);\n      return null;\n    }\n  }\n\n  // تحويل الإحداثيات إلى عنوان\n  async getAddressFromCoordinates(lat, lng) {\n    const GOOGLE_MAPS_API_KEY = process.env.REACT_APP_GOOGLE_MAPS_API_KEY;\n    \n    if (!GOOGLE_MAPS_API_KEY) {\n      return {\n        formatted_address: `${lat.toFixed(4)}, ${lng.toFixed(4)}`,\n        city: '',\n        area: '',\n        country: 'مصر'\n      };\n    }\n\n    try {\n      const response = await fetch(\n        `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lng}&key=${GOOGLE_MAPS_API_KEY}&language=ar`\n      );\n      const data = await response.json();\n      \n      if (data.results && data.results.length > 0) {\n        const result = data.results[0];\n        return {\n          formatted_address: result.formatted_address,\n          city: this.extractAddressComponent(result, 'locality') || \n                this.extractAddressComponent(result, 'administrative_area_level_2'),\n          area: this.extractAddressComponent(result, 'administrative_area_level_3') ||\n                this.extractAddressComponent(result, 'sublocality'),\n          country: this.extractAddressComponent(result, 'country') || 'مصر'\n        };\n      }\n    } catch (error) {\n      console.warn('Geocoding failed:', error);\n    }\n\n    return {\n      formatted_address: `${lat.toFixed(4)}, ${lng.toFixed(4)}`,\n      city: '',\n      area: '',\n      country: 'مصر'\n    };\n  }\n\n  // استخراج مكونات العنوان\n  extractAddressComponent(result, type) {\n    const component = result.address_components.find(\n      comp => comp.types.includes(type)\n    );\n    return component ? component.long_name : '';\n  }\n\n  // الحصول على معلومات الجهاز\n  getDeviceInfo() {\n    const ua = navigator.userAgent;\n    \n    return {\n      device_type: this.getDeviceType(),\n      operating_system: this.getOperatingSystem(),\n      browser: this.getBrowserInfo(),\n      browser_version: this.getBrowserVersion(),\n      user_agent: ua,\n      screen_resolution: `${window.screen.width}x${window.screen.height}`,\n      viewport_size: `${window.innerWidth}x${window.innerHeight}`,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      language: navigator.language,\n      online: navigator.onLine\n    };\n  }\n\n  getDeviceType() {\n    const ua = navigator.userAgent;\n    if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) {\n      return 'tablet';\n    } else if (/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) {\n      return 'mobile';\n    }\n    return 'desktop';\n  }\n\n  getOperatingSystem() {\n    const ua = navigator.userAgent;\n    const os = [\n      { name: 'Windows 11', regex: /Windows NT 10\\.0.*rv:91/ },\n      { name: 'Windows 10', regex: /Windows NT 10\\.0/ },\n      { name: 'Windows 8.1', regex: /Windows NT 6\\.3/ },\n      { name: 'Windows 8', regex: /Windows NT 6\\.2/ },\n      { name: 'Windows 7', regex: /Windows NT 6\\.1/ },\n      { name: 'macOS', regex: /Mac OS X/ },\n      { name: 'iOS', regex: /(iPhone|iPad|iPod)/ },\n      { name: 'Android', regex: /Android/ },\n      { name: 'Linux', regex: /Linux/ },\n      { name: 'Unix', regex: /X11/ }\n    ];\n\n    for (const o of os) {\n      if (o.regex.test(ua)) {\n        return o.name;\n      }\n    }\n    return 'Unknown';\n  }\n\n  getBrowserInfo() {\n    const ua = navigator.userAgent;\n    const browsers = [\n      { name: 'Chrome', regex: /Chrome/ },\n      { name: 'Firefox', regex: /Firefox/ },\n      { name: 'Safari', regex: /Safari/ },\n      { name: 'Edge', regex: /Edge/ },\n      { name: 'Opera', regex: /Opera/ },\n      { name: 'Internet Explorer', regex: /MSIE/ }\n    ];\n\n    for (const browser of browsers) {\n      if (browser.regex.test(ua)) {\n        return browser.name;\n      }\n    }\n    return 'Unknown';\n  }\n\n  getBrowserVersion() {\n    const ua = navigator.userAgent;\n    const match = ua.match(/(Chrome|Firefox|Safari|Edge|Opera)\\/(\\d+\\.\\d+)/);\n    return match ? match[2] : 'Unknown';\n  }\n\n  // تسجيل نشاط\n  async logActivity(type, action, targetType = null, targetId = null, targetName = null, details = {}) {\n    if (!this.isEnabled) return;\n\n    try {\n      const token = localStorage.getItem('access_token');\n      if (!token) {\n        console.warn('No access token available for activity logging');\n        return;\n      }\n\n      // الحصول على الموقع (optional)\n      const location = await this.getCurrentPosition();\n\n      const activityData = {\n        type,\n        action,\n        target_type: targetType,\n        target_id: targetId,\n        target_name: targetName,\n        location: location,\n        device_info: this.getDeviceInfo(),\n        details: {\n          ...details,\n          page_url: window.location.href,\n          page_title: document.title,\n          referrer: document.referrer,\n          session_storage_length: sessionStorage.length,\n          local_storage_length: localStorage.length\n        },\n        metadata: {\n          logged_at: new Date().toISOString(),\n          user_agent: navigator.userAgent,\n          connection_type: navigator.connection?.effectiveType || 'unknown',\n          battery_level: navigator.getBattery ? await navigator.getBattery().then(b => b.level) : null\n        }\n      };\n\n      const response = await axios.post(`${this.API}/activities`, activityData, {\n        headers: { \n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        timeout: 10000\n      });\n\n      console.log('Activity logged successfully:', response.data);\n      return response.data;\n\n    } catch (error) {\n      console.error('Failed to log activity:', error);\n      \n      // إضافة إلى queue للمحاولة مرة أخرى لاحقاً\n      this.retryQueue.push({\n        type, action, targetType, targetId, targetName, details,\n        timestamp: new Date().toISOString(),\n        retryCount: 0\n      });\n\n      // محاولة إعادة الإرسال بعد فترة\n      this.scheduleRetry();\n    }\n  }\n\n  // جدولة إعادة المحاولة\n  scheduleRetry() {\n    if (this.retryQueue.length === 0) return;\n\n    setTimeout(async () => {\n      const failedActivity = this.retryQueue.shift();\n      if (failedActivity && failedActivity.retryCount < 3) {\n        failedActivity.retryCount++;\n        try {\n          await this.logActivity(\n            failedActivity.type,\n            failedActivity.action,\n            failedActivity.targetType,\n            failedActivity.targetId,\n            failedActivity.targetName,\n            failedActivity.details\n          );\n        } catch (error) {\n          if (failedActivity.retryCount < 3) {\n            this.retryQueue.push(failedActivity);\n          }\n        }\n      }\n    }, 5000); // محاولة مرة أخرى بعد 5 ثوان\n  }\n\n  // تسجيل أنشطة محددة\n  async logVisitRegistration(clinicId, clinicName, visitDetails = {}) {\n    return this.logActivity(\n      'visit_registration',\n      'تسجيل زيارة عيادة',\n      'clinic',\n      clinicId,\n      clinicName,\n      {\n        visit_duration: visitDetails.duration || null,\n        doctor_present: visitDetails.doctorPresent || null,\n        samples_given: visitDetails.samplesGiven || 0,\n        notes: visitDetails.notes || '',\n        visit_type: visitDetails.type || 'routine',\n        ...visitDetails\n      }\n    );\n  }\n\n  async logClinicRegistration(clinicId, clinicName, clinicDetails = {}) {\n    return this.logActivity(\n      'clinic_registration',\n      'تسجيل عيادة جديدة',\n      'clinic',\n      clinicId,\n      clinicName,\n      {\n        doctor_name: clinicDetails.doctorName || '',\n        specialty: clinicDetails.specialty || '',\n        classification: clinicDetails.classification || '',\n        phone: clinicDetails.phone || '',\n        address: clinicDetails.address || '',\n        ...clinicDetails\n      }\n    );\n  }\n\n  async logOrderCreation(orderId, orderDetails = {}) {\n    return this.logActivity(\n      'order_creation',\n      'إنشاء طلب جديد',\n      'order',\n      orderId,\n      `طلب رقم ${orderId}`,\n      {\n        order_value: orderDetails.totalValue || 0,\n        items_count: orderDetails.itemsCount || 0,\n        clinic_name: orderDetails.clinicName || '',\n        payment_method: orderDetails.paymentMethod || '',\n        ...orderDetails\n      }\n    );\n  }\n\n  async logProductUpdate(productId, productName, updateDetails = {}) {\n    return this.logActivity(\n      'product_update',\n      'تحديث منتج',\n      'product',\n      productId,\n      productName,\n      {\n        old_price: updateDetails.oldPrice || null,\n        new_price: updateDetails.newPrice || null,\n        change_reason: updateDetails.changeReason || '',\n        update_type: updateDetails.updateType || 'general',\n        ...updateDetails\n      }\n    );\n  }\n\n  async logUserCreation(userId, userName, userDetails = {}) {\n    return this.logActivity(\n      'user_creation',\n      'إنشاء مستخدم جديد',\n      'user',\n      userId,\n      userName,\n      {\n        user_role: userDetails.role || '',\n        department: userDetails.department || '',\n        permissions: userDetails.permissions || [],\n        ...userDetails\n      }\n    );\n  }\n\n  async logSystemAccess(section, sectionDetails = {}) {\n    return this.logActivity(\n      'system_access',\n      `دخول قسم ${section}`,\n      'system',\n      section,\n      `قسم ${section}`,\n      {\n        access_time: new Date().toISOString(),\n        previous_section: sectionDetails.previousSection || '',\n        access_method: sectionDetails.accessMethod || 'navigation',\n        ...sectionDetails\n      }\n    );\n  }\n\n  async logLogin(loginDetails = {}) {\n    return this.logActivity(\n      'login',\n      'تسجيل دخول',\n      'system',\n      'login',\n      'نظام EP Group',\n      {\n        login_method: loginDetails.method || 'password',\n        biometric_verified: loginDetails.biometricVerified || false,\n        failed_attempts: loginDetails.failedAttempts || 0,\n        remember_me: loginDetails.rememberMe || false,\n        ...loginDetails\n      }\n    );\n  }\n\n  // تعطيل/تفعيل التسجيل\n  enable() {\n    this.isEnabled = true;\n  }\n\n  disable() {\n    this.isEnabled = false;\n  }\n\n  // مسح queue إعادة المحاولة\n  clearRetryQueue() {\n    this.retryQueue = [];\n  }\n}\n\n// إنشاء instance واحد للاستخدام في جميع أنحاء التطبيق\nexport const activityLogger = new ActivityLogger();\n\nexport default activityLogger;"],"names":["ProductModal","_ref2","product","lines","onClose","onSave","language","formData","setFormData","useState","name","description","category","unit","line_id","price","price_type","current_stock","min_stock","is_active","undefined","handleInputChange","e","value","type","checked","target","prev","_objectSpread","_jsx","className","children","_jsxs","onClick","onSubmit","preventDefault","processedData","parseFloat","parseInt","onChange","required","placeholder","map","line","id","step","rows","htmlFor","_ref","user","isRTL","products","setProducts","setLines","loading","setLoading","showProductModal","setShowProductModal","selectedProduct","setSelectedProduct","searchTerm","setSearchTerm","filterCategory","setFilterCategory","filterLine","setFilterLine","t","useTranslation","API","canSeePrices","role","includes","useEffect","fetchProducts","fetchLines","activityLogger","logSystemAccess","previousSection","sessionStorage","getItem","accessMethod","setItem","async","token","localStorage","response","axios","get","concat","headers","Authorization","data","error","console","line_name","created_at","filteredProducts","filter","_product$name","_product$description","matchesSearch","toLowerCase","matchesCategory","matchesLine","categories","Set","p","Boolean","getStockStatus","getStockColor","status","log","length","stockStatus","priceType","productToDelete","find","productId","window","confirm","delete","logActivity","deleted_product_name","deleted_product_price","deleted_product_unit","deletion_reason","deleted_by_role","stock_at_deletion","stock_quantity","alert","_error$response3","_error$response3$data","errorMessage","detail","handleDeleteProduct","productData","currentProduct","put","logProductUpdate","old_price","new_price","old_unit","new_unit","changeReason","updateType","updated_fields","Object","keys","updated_by_role","_error$response2","_error$response2$data","handleUpdateProduct","post","created_by_role","_error$response","_error$response$data","constructor","this","isEnabled","currentPosition","retryQueue","getCurrentPosition","navigator","geolocation","warn","position","Promise","resolve","reject","enableHighAccuracy","timeout","maximumAge","latitude","coords","longitude","accuracy","altitude","speed","heading","timestamp","Date","toISOString","address","getAddressFromCoordinates","formatted_address","city","area","country","toFixed","lat","lng","GOOGLE_MAPS_API_KEY","process","fetch","json","results","result","extractAddressComponent","component","address_components","comp","types","long_name","getDeviceInfo","ua","userAgent","device_type","getDeviceType","operating_system","getOperatingSystem","browser","getBrowserInfo","browser_version","getBrowserVersion","user_agent","screen_resolution","screen","width","height","viewport_size","innerWidth","innerHeight","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","online","onLine","test","os","regex","o","browsers","match","action","targetType","arguments","targetId","targetName","details","_navigator$connection","activityData","target_type","target_id","target_name","location","device_info","page_url","href","page_title","document","title","referrer","session_storage_length","local_storage_length","metadata","logged_at","connection_type","connection","effectiveType","battery_level","getBattery","then","b","level","push","retryCount","scheduleRetry","setTimeout","failedActivity","shift","logVisitRegistration","clinicId","clinicName","visitDetails","visit_duration","duration","doctor_present","doctorPresent","samples_given","samplesGiven","notes","visit_type","logClinicRegistration","clinicDetails","doctor_name","doctorName","specialty","classification","phone","logOrderCreation","orderId","orderDetails","order_value","totalValue","items_count","itemsCount","clinic_name","payment_method","paymentMethod","productName","updateDetails","oldPrice","newPrice","change_reason","update_type","logUserCreation","userId","userName","userDetails","user_role","department","permissions","section","sectionDetails","access_time","previous_section","access_method","logLogin","loginDetails","login_method","method","biometric_verified","biometricVerified","failed_attempts","failedAttempts","remember_me","rememberMe","enable","disable","clearRetryQueue"],"sourceRoot":""}