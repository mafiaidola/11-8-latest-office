"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[680],{680:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});var r=s(424),a=s(474),n=s(722),i=s(269),o=s(579);const l=e=>{var t,s,l,c,d;let{user:g,language:u,isRTL:m}=e;const[h,x]=(0,r.useState)([]),[p,v]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),[f,_]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),[N,A]=(0,r.useState)(""),[S,C]=(0,r.useState)([]),[k,P]=(0,r.useState)(!1),{t:I}=(0,a.Bd)(u);(0,r.useEffect)((()=>{T(),i.a.logSystemAccess("\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",{previousSection:sessionStorage.getItem("previousSection")||"",accessMethod:"navigation",userRole:null===g||void 0===g?void 0:g.role}),sessionStorage.setItem("previousSection","\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646")}),[]);const T=async()=>{j(!0);try{const e=localStorage.getItem("access_token"),t=await n.A.get("".concat("https://6fc37004-de78-473a-b926-f0438820a235.preview.emergentagent.com/api","/admin/users"),{headers:{Authorization:"Bearer ".concat(e)}});t.data&&Array.isArray(t.data)?x(t.data):x([{id:"user_001",full_name:"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f \u0639\u0644\u064a",username:"ahmed.mohamed",email:"ahmed@epgroup.com",phone:"+201234567890",role:"medical_rep",area:"\u0627\u0644\u0642\u0627\u0647\u0631\u0629 - \u0645\u062f\u064a\u0646\u0629 \u0646\u0635\u0631",status:"active",stats_last_30_days:{visits:45,orders:12,revenue:45e3,rating:4.8,performance_percentage:87}},{id:"user_002",full_name:"\u0641\u0627\u0637\u0645\u0629 \u0623\u062d\u0645\u062f \u0627\u0644\u0633\u064a\u062f",username:"fatima.ahmed",email:"fatima@epgroup.com",phone:"+201098765432",role:"admin",area:"\u0627\u0644\u0625\u0633\u0643\u0646\u062f\u0631\u064a\u0629",status:"active",stats_last_30_days:{visits:0,orders:0,revenue:0,rating:5,performance_percentage:95}}])}catch(e){console.error("Error loading users:",e),x([{id:"user_001",full_name:"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f \u0639\u0644\u064a",username:"ahmed.mohamed",email:"ahmed@epgroup.com",phone:"+201234567890",role:"medical_rep",area:"\u0627\u0644\u0642\u0627\u0647\u0631\u0629 - \u0645\u062f\u064a\u0646\u0629 \u0646\u0635\u0631",status:"active",stats_last_30_days:{visits:45,orders:12,revenue:45e3,rating:4.8,performance_percentage:87}}])}finally{j(!1)}},O=e=>({admin:"ar"===u?"\u0645\u062f\u064a\u0631 \u0627\u0644\u0646\u0638\u0627\u0645":"Admin",manager:"ar"===u?"\u0645\u062f\u064a\u0631":"Manager",medical_rep:"ar"===u?"\u0645\u0646\u062f\u0648\u0628 \u0637\u0628\u064a":"Medical Rep",accountant:"ar"===u?"\u0645\u062d\u0627\u0633\u0628":"Accountant",warehouse_keeper:"ar"===u?"\u0623\u0645\u064a\u0646 \u0645\u062e\u0632\u0646":"Warehouse Keeper"}[e]||e),E=e=>({admin:"text-red-300",manager:"text-purple-300",medical_rep:"text-blue-300",accountant:"text-green-300",warehouse_keeper:"text-orange-300"}[e]||"text-gray-300"),F=h.filter((e=>{var t,s,r;return(null===(t=e.full_name)||void 0===t?void 0:t.toLowerCase().includes(N.toLowerCase()))||(null===(s=e.username)||void 0===s?void 0:s.toLowerCase().includes(N.toLowerCase()))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(N.toLowerCase()))}));return(0,o.jsxs)("div",{className:"user-management-container p-6 space-y-6",dir:m?"rtl":"ltr",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"ar"===u?"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646":"User Management"}),(0,o.jsx)("p",{className:"text-lg opacity-75",children:"ar"===u?"\u0625\u062f\u0627\u0631\u0629 \u0634\u0627\u0645\u0644\u0629 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645":"Comprehensive management of all system users"})]}),(0,o.jsx)("div",{className:"flex items-center gap-4",children:(0,o.jsxs)("button",{onClick:()=>_(!0),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-300 flex items-center gap-2 font-medium shadow-lg",children:[(0,o.jsx)("span",{children:"\u2795"}),"ar"===u?"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f":"Add New User"]})})]}),(0,o.jsxs)("div",{className:"search-section bg-white/5 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,o.jsx)("div",{className:"flex items-center gap-4 mb-4",children:(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)("input",{type:"text",placeholder:"ar"===u?"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646...":"Search users...",value:N,onChange:e=>A(e.target.value),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 text-white placeholder-white/60"})})}),(0,o.jsx)("div",{className:"text-sm text-white/70",children:"ar"===u?"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646: ".concat(h.length):"Total Users: ".concat(h.length)})]}),w?(0,o.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-white/70",children:"ar"===u?"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646...":"Loading users..."})]})}):(0,o.jsx)("div",{className:"users-grid grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:F.map((e=>{var t,s,r,a,n;return(0,o.jsxs)("div",{className:"user-card bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300 hover:scale-105 hover:shadow-xl",children:[(0,o.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)("input",{type:"checkbox",checked:S.includes(e.id),onChange:()=>{return t=e.id,void C((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},className:"w-5 h-5 text-blue-600 rounded border-2 border-white/30"}),(0,o.jsxs)("div",{className:"relative",children:[e.photo?(0,o.jsx)("img",{src:e.photo,alt:e.full_name,className:"w-16 h-16 rounded-full object-cover border-3 border-white/30 shadow-lg"}):(0,o.jsx)("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 flex items-center justify-center text-white font-bold text-xl shadow-lg border-3 border-white/30",children:(null===(t=e.full_name)||void 0===t?void 0:t.charAt(0))||(null===(s=e.username)||void 0===s?void 0:s.charAt(0))||"\u061f"}),(0,o.jsx)("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full border-2 border-white ".concat("active"===e.status?"bg-green-500":"inactive"===e.status?"bg-gray-500":"bg-red-500"," shadow-lg")})]}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h3",{className:"text-lg font-bold text-white",children:e.full_name}),(0,o.jsxs)("p",{className:"text-sm text-white/70",children:["@",e.username]}),(0,o.jsx)("div",{className:"flex items-center gap-2 mt-2",children:(0,o.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold border ".concat((n=e.role,{admin:"bg-red-500/20 border-red-500/30",manager:"bg-purple-500/20 border-purple-500/30",medical_rep:"bg-blue-500/20 border-blue-500/30",accountant:"bg-green-500/20 border-green-500/30",warehouse_keeper:"bg-orange-500/20 border-orange-500/30"}[n]||"bg-gray-500/20 border-gray-500/30")," ").concat(E(e.role)),children:O(e.role)})})]})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,o.jsxs)("div",{className:"bg-green-500/10 rounded-xl p-4 border border-green-500/20",children:[(0,o.jsx)("div",{className:"text-2xl font-bold text-green-400",children:(null===(r=e.stats_last_30_days)||void 0===r?void 0:r.visits)||0}),(0,o.jsx)("div",{className:"text-xs text-green-200/80",children:"\u0632\u064a\u0627\u0631\u0629 \u0634\u0647\u0631\u064a\u0627\u064b"})]}),(0,o.jsxs)("div",{className:"bg-blue-500/10 rounded-xl p-4 border border-blue-500/20",children:[(0,o.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:(null===(a=e.stats_last_30_days)||void 0===a?void 0:a.orders)||0}),(0,o.jsx)("div",{className:"text-xs text-blue-200/80",children:"\u0637\u0644\u0628 \u0634\u0647\u0631\u064a\u0627\u064b"})]})]}),(0,o.jsx)("div",{className:"bg-white/5 rounded-xl p-4 mb-4 border border-white/10",children:(0,o.jsxs)("div",{className:"space-y-2 text-sm",children:[e.email&&(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("span",{className:"text-blue-400",children:"\ud83d\udce7"}),(0,o.jsx)("span",{className:"text-white/80",children:e.email})]}),e.phone&&(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("span",{className:"text-green-400",children:"\ud83d\udcf1"}),(0,o.jsx)("span",{className:"text-white/80",children:e.phone})]}),e.area&&(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("span",{className:"text-yellow-400",children:"\ud83d\udccd"}),(0,o.jsx)("span",{className:"text-white/80",children:e.area})]})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,o.jsxs)("button",{onClick:()=>(e=>{v(e),b(!0)})(e),className:"bg-blue-600 text-white py-2 px-3 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium flex items-center justify-center gap-1",children:[(0,o.jsx)("span",{children:"\ud83d\udcca"}),"\u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644"]}),(0,o.jsxs)("button",{onClick:()=>{return t=e.id,console.log("Edit user:",t),void alert("\u062a\u062d\u0631\u064a\u0631 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0642\u064a\u062f \u0627\u0644\u062a\u0637\u0648\u064a\u0631");var t},className:"bg-green-600 text-white py-2 px-3 rounded-lg hover:bg-green-700 transition-colors text-sm font-medium flex items-center justify-center gap-1",children:[(0,o.jsx)("span",{children:"\u270f\ufe0f"}),"\u062a\u0639\u062f\u064a\u0644"]}),(0,o.jsxs)("button",{onClick:()=>{return t=e.id,console.log("Delete user:",t),void alert("\u062d\u0630\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0642\u064a\u062f \u0627\u0644\u062a\u0637\u0648\u064a\u0631");var t},className:"bg-red-600 text-white py-2 px-3 rounded-lg hover:bg-red-700 transition-colors text-sm font-medium flex items-center justify-center gap-1",children:[(0,o.jsx)("span",{children:"\ud83d\uddd1\ufe0f"}),"\u062d\u0630\u0641"]})]})]},e.id)}))}),y&&p&&(0,o.jsx)("div",{className:"modal-overlay",children:(0,o.jsxs)("div",{className:"modal-content max-w-4xl",children:[(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsxs)("h3",{className:"text-2xl font-bold",children:["\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: ",p.full_name]}),(0,o.jsx)("button",{onClick:()=>b(!1),className:"modal-close",children:"\xd7"})]}),(0,o.jsx)("div",{className:"modal-body",children:(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h4",{className:"text-lg font-semibold",children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0627\u0644\u0627\u0633\u0645:"})," ",p.full_name]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645:"})," ",p.username]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a:"})," ",p.email]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0627\u0644\u0647\u0627\u062a\u0641:"})," ",p.phone]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0627\u0644\u062f\u0648\u0631:"})," ",O(p.role)]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0627\u0644\u0645\u0646\u0637\u0642\u0629:"})," ",p.area]})]})]}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h4",{className:"text-lg font-semibold",children:"\u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a \u0627\u0644\u0623\u062f\u0627\u0621"}),(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a (\u0622\u062e\u0631 30 \u064a\u0648\u0645):"})," ",(null===(t=p.stats_last_30_days)||void 0===t?void 0:t.visits)||0]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0627\u0644\u0637\u0644\u0628\u0627\u062a (\u0622\u062e\u0631 30 \u064a\u0648\u0645):"})," ",(null===(s=p.stats_last_30_days)||void 0===s?void 0:s.orders)||0]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a (\u0622\u062e\u0631 30 \u064a\u0648\u0645):"})," ",(null===(l=p.stats_last_30_days)||void 0===l?void 0:l.revenue)||0," \u062c.\u0645"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0627\u0644\u062a\u0642\u064a\u064a\u0645:"})," ",(null===(c=p.stats_last_30_days)||void 0===c?void 0:c.rating)||0,"/5"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"\u0646\u0633\u0628\u0629 \u0627\u0644\u0623\u062f\u0627\u0621:"})," ",(null===(d=p.stats_last_30_days)||void 0===d?void 0:d.performance_percentage)||0,"%"]})]})]})]})}),(0,o.jsx)("div",{className:"modal-footer",children:(0,o.jsx)("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"\u0625\u063a\u0644\u0627\u0642"})})]})})]})}},269:(e,t,s)=>{s.d(t,{a:()=>n});var r=s(555),a=s(722);const n=new class{constructor(){this.API="https://6fc37004-de78-473a-b926-f0438820a235.preview.emergentagent.com/api",this.isEnabled=!0,this.currentPosition=null,this.retryQueue=[]}async getCurrentPosition(){if(!navigator.geolocation)return console.warn("Geolocation is not supported"),null;try{const t=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:15e3,maximumAge:3e5})}));this.currentPosition={latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,altitude:t.coords.altitude,speed:t.coords.speed,heading:t.coords.heading,timestamp:(new Date).toISOString()};try{const e=await this.getAddressFromCoordinates(t.coords.latitude,t.coords.longitude);this.currentPosition.address=e.formatted_address,this.currentPosition.city=e.city,this.currentPosition.area=e.area,this.currentPosition.country=e.country}catch(e){console.warn("Failed to get address from coordinates:",e),this.currentPosition.address="".concat(t.coords.latitude.toFixed(4),", ").concat(t.coords.longitude.toFixed(4))}return this.currentPosition}catch(e){return console.warn("Failed to get current position:",e),null}}async getAddressFromCoordinates(e,t){const s="AIzaSyDzxZjDxPdcrnGKb66mT5BIvQzQWcnLp70";try{const r=await fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e,",").concat(t,"&key=").concat(s,"&language=ar")),a=await r.json();if(a.results&&a.results.length>0){const e=a.results[0];return{formatted_address:e.formatted_address,city:this.extractAddressComponent(e,"locality")||this.extractAddressComponent(e,"administrative_area_level_2"),area:this.extractAddressComponent(e,"administrative_area_level_3")||this.extractAddressComponent(e,"sublocality"),country:this.extractAddressComponent(e,"country")||"\u0645\u0635\u0631"}}}catch(r){console.warn("Geocoding failed:",r)}return{formatted_address:"".concat(e.toFixed(4),", ").concat(t.toFixed(4)),city:"",area:"",country:"\u0645\u0635\u0631"}}extractAddressComponent(e,t){const s=e.address_components.find((e=>e.types.includes(t)));return s?s.long_name:""}getDeviceInfo(){const e=navigator.userAgent;return{device_type:this.getDeviceType(),operating_system:this.getOperatingSystem(),browser:this.getBrowserInfo(),browser_version:this.getBrowserVersion(),user_agent:e,screen_resolution:"".concat(window.screen.width,"x").concat(window.screen.height),viewport_size:"".concat(window.innerWidth,"x").concat(window.innerHeight),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,language:navigator.language,online:navigator.onLine}}getDeviceType(){const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"}getOperatingSystem(){const e=navigator.userAgent,t=[{name:"Windows 11",regex:/Windows NT 10\.0.*rv:91/},{name:"Windows 10",regex:/Windows NT 10\.0/},{name:"Windows 8.1",regex:/Windows NT 6\.3/},{name:"Windows 8",regex:/Windows NT 6\.2/},{name:"Windows 7",regex:/Windows NT 6\.1/},{name:"macOS",regex:/Mac OS X/},{name:"iOS",regex:/(iPhone|iPad|iPod)/},{name:"Android",regex:/Android/},{name:"Linux",regex:/Linux/},{name:"Unix",regex:/X11/}];for(const s of t)if(s.regex.test(e))return s.name;return"Unknown"}getBrowserInfo(){const e=navigator.userAgent,t=[{name:"Chrome",regex:/Chrome/},{name:"Firefox",regex:/Firefox/},{name:"Safari",regex:/Safari/},{name:"Edge",regex:/Edge/},{name:"Opera",regex:/Opera/},{name:"Internet Explorer",regex:/MSIE/}];for(const s of t)if(s.regex.test(e))return s.name;return"Unknown"}getBrowserVersion(){const e=navigator.userAgent.match(/(Chrome|Firefox|Safari|Edge|Opera)\/(\d+\.\d+)/);return e?e[2]:"Unknown"}async logActivity(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(this.isEnabled)try{var l;const c=localStorage.getItem("access_token");if(!c)return void console.warn("No access token available for activity logging");const d={type:e,action:t,target_type:s,target_id:n,target_name:i,location:await this.getCurrentPosition(),device_info:this.getDeviceInfo(),details:(0,r.A)((0,r.A)({},o),{},{page_url:window.location.href,page_title:document.title,referrer:document.referrer,session_storage_length:sessionStorage.length,local_storage_length:localStorage.length}),metadata:{logged_at:(new Date).toISOString(),user_agent:navigator.userAgent,connection_type:(null===(l=navigator.connection)||void 0===l?void 0:l.effectiveType)||"unknown",battery_level:navigator.getBattery?await navigator.getBattery().then((e=>e.level)):null}},g=await a.A.post("".concat(this.API,"/activities"),d,{headers:{Authorization:"Bearer ".concat(c),"Content-Type":"application/json"},timeout:1e4});return console.log("Activity logged successfully:",g.data),g.data}catch(c){console.error("Failed to log activity:",c),this.retryQueue.push({type:e,action:t,targetType:s,targetId:n,targetName:i,details:o,timestamp:(new Date).toISOString(),retryCount:0}),this.scheduleRetry()}}scheduleRetry(){0!==this.retryQueue.length&&setTimeout((async()=>{const e=this.retryQueue.shift();if(e&&e.retryCount<3){e.retryCount++;try{await this.logActivity(e.type,e.action,e.targetType,e.targetId,e.targetName,e.details)}catch(t){e.retryCount<3&&this.retryQueue.push(e)}}}),5e3)}async logVisitRegistration(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.logActivity("visit_registration","\u062a\u0633\u062c\u064a\u0644 \u0632\u064a\u0627\u0631\u0629 \u0639\u064a\u0627\u062f\u0629","clinic",e,t,(0,r.A)({visit_duration:s.duration||null,doctor_present:s.doctorPresent||null,samples_given:s.samplesGiven||0,notes:s.notes||"",visit_type:s.type||"routine"},s))}async logClinicRegistration(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.logActivity("clinic_registration","\u062a\u0633\u062c\u064a\u0644 \u0639\u064a\u0627\u062f\u0629 \u062c\u062f\u064a\u062f\u0629","clinic",e,t,(0,r.A)({doctor_name:s.doctorName||"",specialty:s.specialty||"",classification:s.classification||"",phone:s.phone||"",address:s.address||""},s))}async logOrderCreation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.logActivity("order_creation","\u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u062c\u062f\u064a\u062f","order",e,"\u0637\u0644\u0628 \u0631\u0642\u0645 ".concat(e),(0,r.A)({order_value:t.totalValue||0,items_count:t.itemsCount||0,clinic_name:t.clinicName||"",payment_method:t.paymentMethod||""},t))}async logProductUpdate(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.logActivity("product_update","\u062a\u062d\u062f\u064a\u062b \u0645\u0646\u062a\u062c","product",e,t,(0,r.A)({old_price:s.oldPrice||null,new_price:s.newPrice||null,change_reason:s.changeReason||"",update_type:s.updateType||"general"},s))}async logUserCreation(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.logActivity("user_creation","\u0625\u0646\u0634\u0627\u0621 \u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f","user",e,t,(0,r.A)({user_role:s.role||"",department:s.department||"",permissions:s.permissions||[]},s))}async logSystemAccess(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.logActivity("system_access","\u062f\u062e\u0648\u0644 \u0642\u0633\u0645 ".concat(e),"system",e,"\u0642\u0633\u0645 ".concat(e),(0,r.A)({access_time:(new Date).toISOString(),previous_section:t.previousSection||"",access_method:t.accessMethod||"navigation"},t))}async logLogin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.logActivity("login","\u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644","system","login","\u0646\u0638\u0627\u0645 EP Group",(0,r.A)({login_method:e.method||"password",biometric_verified:e.biometricVerified||!1,failed_attempts:e.failedAttempts||0,remember_me:e.rememberMe||!1},e))}enable(){this.isEnabled=!0}disable(){this.isEnabled=!1}clearRetryQueue(){this.retryQueue=[]}}}}]);
//# sourceMappingURL=680.87cba220.chunk.js.map