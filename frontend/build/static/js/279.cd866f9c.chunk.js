"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[279],{279:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});var i=s(424),a=s(474),l=s(722),r=s(579);const n=e=>{var t,s;let{user:n,language:d,isRTL:c}=e;const[o,x]=(0,i.useState)("overview"),[m,h]=(0,i.useState)([]),[g,p]=(0,i.useState)([]),[u,v]=(0,i.useState)(null),[b,j]=(0,i.useState)(!0),[N,f]=(0,i.useState)("all"),[y,w]=(0,i.useState)("today"),[_,k]=(0,i.useState)(""),[S,O]=(0,i.useState)(null),[D,C]=(0,i.useState)(!1),{t:A}=(0,a.Bd)(d),L="https://0f12410c-0263-44c4-80bc-ce88c1050ca0.preview.emergentagent.com/api",P="AIzaSyDzxZjDxPdcrnGKb66mT5BIvQzQWcnLp70";(0,i.useEffect)((()=>{F()}),[]);const F=async()=>{try{j(!0);const e=localStorage.getItem("access_token"),t={Authorization:"Bearer ".concat(e)},[s,i,a]=await Promise.allSettled([l.A.get("".concat(L,"/admin/activities?limit=100"),{headers:t}),l.A.get("".concat(L,"/admin/activities/stats"),{headers:t}),l.A.get("".concat(L,"/admin/gps-tracking?limit=50"),{headers:t})]);"fulfilled"===s.status?h(s.value.data):(console.warn("\u0641\u0634\u0644 \u0641\u064a \u062c\u0644\u0628 \u0627\u0644\u0623\u0646\u0634\u0637\u0629:",s.reason),h([])),"fulfilled"===i.status?v(i.value.data):console.warn("\u0641\u0634\u0644 \u0641\u064a \u062c\u0644\u0628 \u0627\u0644\u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a:",i.reason),"fulfilled"===a.status?p(a.value.data):(console.warn("\u0641\u0634\u0644 \u0641\u064a \u062c\u0644\u0628 \u0633\u062c\u0644\u0627\u062a GPS:",a.reason),p([]))}catch(e){console.error("\u062e\u0637\u0623 \u0641\u064a \u062c\u0644\u0628 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0623\u0646\u0634\u0637\u0629:",e),I()}finally{j(!1)}},I=()=>{const e=[{id:"act-001",type:"visit_registration",action:"\u062a\u0633\u062c\u064a\u0644 \u0632\u064a\u0627\u0631\u0629 \u0639\u064a\u0627\u062f\u0629",user_id:"user-001",user_name:"\u0645\u062d\u0645\u062f \u0639\u0644\u064a \u0623\u062d\u0645\u062f",user_role:"medical_rep",target_type:"clinic",target_id:"clinic-001",target_name:"\u0639\u064a\u0627\u062f\u0629 \u0627\u0644\u062f\u0643\u062a\u0648\u0631 \u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f",timestamp:(new Date).toISOString(),location:{latitude:30.0444,longitude:31.2357,address:"\u0634\u0627\u0631\u0639 \u0627\u0644\u0646\u064a\u0644\u060c \u0627\u0644\u0645\u0639\u0627\u062f\u064a\u060c \u0627\u0644\u0642\u0627\u0647\u0631\u0629",accuracy:15},details:{visit_duration:45,order_created:!0,order_value:1250,notes:"\u0632\u064a\u0627\u0631\u0629 \u0631\u0648\u062a\u064a\u0646\u064a\u0629\u060c \u062a\u0645 \u0639\u0631\u0636 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u062c\u062f\u064a\u062f\u0629"},device_info:{device_type:"mobile",operating_system:"Android 12",browser:"Chrome",ip_address:"192.168.1.100"}},{id:"act-002",type:"clinic_registration",action:"\u062a\u0633\u062c\u064a\u0644 \u0639\u064a\u0627\u062f\u0629 \u062c\u062f\u064a\u062f\u0629",user_id:"user-001",user_name:"\u0645\u062d\u0645\u062f \u0639\u0644\u064a \u0623\u062d\u0645\u062f",user_role:"medical_rep",target_type:"clinic",target_id:"clinic-004",target_name:"\u0639\u064a\u0627\u062f\u0629 \u0627\u0644\u062f\u0643\u062a\u0648\u0631 \u0633\u0627\u0645\u064a \u062d\u0633\u0646",timestamp:new Date(Date.now()-72e5).toISOString(),location:{latitude:30.0626,longitude:31.2497,address:"\u0645\u062f\u064a\u0646\u0629 \u0646\u0635\u0631\u060c \u0627\u0644\u0642\u0627\u0647\u0631\u0629",accuracy:12},details:{doctor_name:"\u062f. \u0633\u0627\u0645\u064a \u062d\u0633\u0646",specialty:"\u0623\u0637\u0641\u0627\u0644",classification:"B",phone:"01234567890"},device_info:{device_type:"mobile",operating_system:"Android 12",browser:"Chrome",ip_address:"192.168.1.100"}},{id:"act-003",type:"order_creation",action:"\u0625\u0646\u0634\u0627\u0621 \u0637\u0644\u0628 \u062c\u062f\u064a\u062f",user_id:"user-002",user_name:"\u0633\u0627\u0631\u0629 \u0645\u062d\u0645\u0648\u062f \u0639\u0644\u064a",user_role:"medical_rep",target_type:"order",target_id:"order-001",target_name:"\u0637\u0644\u0628 \u0631\u0642\u0645 ORD-2024-001",timestamp:new Date(Date.now()-144e5).toISOString(),location:{latitude:30.0131,longitude:31.2089,address:"\u0627\u0644\u062c\u064a\u0632\u0629",accuracy:20},details:{order_value:2500,items_count:8,clinic_name:"\u0639\u064a\u0627\u062f\u0629 \u0627\u0644\u062f\u0643\u062a\u0648\u0631 \u0645\u062d\u0645\u062f \u062d\u0633\u0646",payment_method:"credit"},device_info:{device_type:"mobile",operating_system:"iOS 16",browser:"Safari",ip_address:"192.168.1.102"}}];h(e),v({total_activities:e.length,today_activities:e.filter((e=>new Date(e.timestamp).toDateString()===(new Date).toDateString())).length,week_activities:e.length,month_activities:e.length,activities_by_type:{visit_registration:1,clinic_registration:1,order_creation:1},activities_by_user:{"\u0645\u062d\u0645\u062f \u0639\u0644\u064a \u0623\u062d\u0645\u062f":2,"\u0633\u0627\u0631\u0629 \u0645\u062d\u0645\u0648\u062f \u0639\u0644\u064a":1},most_active_locations:[{location:"\u0634\u0627\u0631\u0639 \u0627\u0644\u0646\u064a\u0644\u060c \u0627\u0644\u0645\u0639\u0627\u062f\u064a\u060c \u0627\u0644\u0642\u0627\u0647\u0631\u0629",count:1},{location:"\u0645\u062f\u064a\u0646\u0629 \u0646\u0635\u0631\u060c \u0627\u0644\u0642\u0627\u0647\u0631\u0629",count:1}],peak_hours:[{hour:(new Date).getHours(),count:3}]})},M=async(e,t)=>{try{0;const s=await fetch("https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e,",").concat(t,"&key=").concat(P,"&language=ar")),i=await s.json();return i.results&&i.results.length>0?i.results[0].formatted_address:"".concat(e.toFixed(4),", ").concat(t.toFixed(4))}catch(s){return console.error("\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0639\u0646\u0648\u0627\u0646:",s),"".concat(e.toFixed(4),", ").concat(t.toFixed(4))}},G=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"},T=()=>{const e=navigator.userAgent;return-1!==e.indexOf("Windows NT 10.0")?"Windows 10":-1!==e.indexOf("Windows NT 6.2")?"Windows 8":-1!==e.indexOf("Windows NT 6.1")?"Windows 7":-1!==e.indexOf("Windows NT 6.0")?"Windows Vista":-1!==e.indexOf("Windows NT 5.1")?"Windows XP":-1!==e.indexOf("Windows NT 5.0")?"Windows 2000":-1!==e.indexOf("Mac")?"Mac/iOS":-1!==e.indexOf("X11")?"UNIX":-1!==e.indexOf("Linux")?"Linux":-1!==e.indexOf("Android")?"Android":"Unknown"},W=()=>{const e=navigator.userAgent;return e.indexOf("Chrome")>-1?"Chrome":e.indexOf("Firefox")>-1?"Firefox":e.indexOf("Safari")>-1?"Safari":e.indexOf("Edge")>-1?"Edge":e.indexOf("Opera")>-1?"Opera":"Unknown"},U=e=>({visit_registration:"\ud83c\udfe5",clinic_registration:"\u2795",order_creation:"\ud83d\udccb",order_approval:"\u2705",order_rejection:"\u274c",product_update:"\ud83d\udce6",user_creation:"\ud83d\udc64",login:"\ud83d\udd10",logout:"\ud83d\udeaa",payment_record:"\ud83d\udcb0",invoice_creation:"\ud83e\uddfe",system_access:"\ud83d\udda5\ufe0f",report_generation:"\ud83d\udcca"}[e]||"\ud83d\udccb"),E=e=>({visit_registration:"bg-blue-500/20 text-blue-300 border-blue-500/30",clinic_registration:"bg-green-500/20 text-green-300 border-green-500/30",order_creation:"bg-indigo-500/20 text-indigo-300 border-indigo-500/30",order_approval:"bg-purple-500/20 text-purple-300 border-purple-500/30",order_rejection:"bg-red-500/20 text-red-300 border-red-500/30",product_update:"bg-orange-500/20 text-orange-300 border-orange-500/30",user_creation:"bg-teal-500/20 text-teal-300 border-teal-500/30",login:"bg-gray-500/20 text-gray-300 border-gray-500/30",logout:"bg-pink-500/20 text-pink-300 border-pink-500/30",payment_record:"bg-emerald-500/20 text-emerald-300 border-emerald-500/30",invoice_creation:"bg-yellow-500/20 text-yellow-300 border-yellow-500/30",system_access:"bg-violet-500/20 text-violet-300 border-violet-500/30",report_generation:"bg-cyan-500/20 text-cyan-300 border-cyan-500/30"}[e]||"bg-gray-500/20 text-gray-300 border-gray-500/30"),R=e=>new Date(e).toLocaleString("ar-EG",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}),z=e=>{const t=new Date,s=new Date(e),i=Math.floor((t-s)/1e3);return i<60?"\u0645\u0646\u0630 \u062f\u0642\u0627\u0626\u0642 \u0642\u0644\u064a\u0644\u0629":i<3600?"\u0645\u0646\u0630 ".concat(Math.floor(i/60)," \u062f\u0642\u064a\u0642\u0629"):i<86400?"\u0645\u0646\u0630 ".concat(Math.floor(i/3600)," \u0633\u0627\u0639\u0629"):"\u0645\u0646\u0630 ".concat(Math.floor(i/86400)," \u064a\u0648\u0645")},B=m.filter((e=>{const t="all"===N||e.type===N,s=e.action.toLowerCase().includes(_.toLowerCase())||e.user_name.toLowerCase().includes(_.toLowerCase())||e.target_name&&e.target_name.toLowerCase().includes(_.toLowerCase()),i=new Date(e.timestamp),a=new Date,l=new Date(a);l.setDate(l.getDate()-1);const r=new Date(a);r.setDate(r.getDate()-7);let n=!0;switch(y){case"today":n=i.toDateString()===a.toDateString();break;case"yesterday":n=i.toDateString()===l.toDateString();break;case"week":n=i>=r;break;case"month":const e=new Date(a);e.setMonth(e.getMonth()-1),n=i>=e;break;default:n=!0}return t&&s&&n})),J=e=>{O(e)},K=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";try{const t={activities:B,stats:u,exported_at:(new Date).toISOString(),exported_by:(null===n||void 0===n?void 0:n.full_name)||(null===n||void 0===n?void 0:n.username),filters:{filterType:N,filterDate:y,searchTerm:_}},s="activity_report_".concat((new Date).toISOString().split("T")[0],".").concat(e);if("json"===e){const e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),i=URL.createObjectURL(e),a=document.createElement("a");a.href=i,a.download=s,a.click(),URL.revokeObjectURL(i)}else if("csv"===e){const e=["\u0627\u0644\u0646\u0648\u0639,\u0627\u0644\u0625\u062c\u0631\u0627\u0621,\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645,\u0627\u0644\u062f\u0648\u0631,\u0627\u0644\u0647\u062f\u0641,\u0627\u0644\u0648\u0642\u062a,\u0627\u0644\u0645\u0648\u0642\u0639,\u0627\u0644\u062c\u0647\u0627\u0632",...B.map((e=>{var t,s;return[e.type,e.action,e.user_name,e.user_role,e.target_name||"",R(e.timestamp),(null===(t=e.location)||void 0===t?void 0:t.address)||"",(null===(s=e.device_info)||void 0===s?void 0:s.operating_system)||""].join(",")}))].join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.download=s.replace(".json",".csv"),a.click(),URL.revokeObjectURL(i)}await async function(e,t,s,i,a){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};try{if(!navigator.geolocation)throw new Error("Geolocation is not supported");const n=await new Promise(((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})})),d={type:e,action:t,target_type:s,target_id:i,target_name:a,location:{latitude:n.coords.latitude,longitude:n.coords.longitude,accuracy:n.coords.accuracy,address:await M(n.coords.latitude,n.coords.longitude)},device_info:{device_type:G(),operating_system:T(),browser:W(),screen_resolution:"".concat(window.screen.width,"x").concat(window.screen.height)},details:r},c=localStorage.getItem("access_token");await l.A.post("".concat(L,"/activities"),d,{headers:{Authorization:"Bearer ".concat(c)}}),await F()}catch(n){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0646\u0634\u0627\u0637:",n)}}("report_generation","\u062a\u0635\u062f\u064a\u0631 \u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0623\u0646\u0634\u0637\u0629 (".concat(e.toUpperCase(),")"),"system","activity_report",s,{format:e,activities_count:B.length,filters_applied:{filterType:N,filterDate:y,searchTerm:_}})}catch(t){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a:",t)}};return b?(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-white",children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0623\u0646\u0634\u0637\u0629..."}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"\u064a\u062a\u0645 \u062c\u0644\u0628 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0646 \u0627\u0644\u062e\u0627\u062f\u0645..."})]})}):(0,r.jsxs)("div",{className:"activity-tracking-container min-h-screen",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl text-white",children:"\ud83d\udcca"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white",children:"\u062a\u062a\u0628\u0639 \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0648\u0627\u0644\u062d\u0631\u0643\u0627\u062a"}),(0,r.jsx)("p",{className:"text-lg opacity-75",children:"\u0645\u0631\u0627\u0642\u0628\u0629 \u0634\u0627\u0645\u0644\u0629 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0645\u0639 \u062a\u062a\u0628\u0639 \u0627\u0644\u0645\u0648\u0642\u0639 \u0648\u0627\u0644\u0648\u0642\u062a - \u0644\u0644\u0623\u062f\u0645\u0646 \u0641\u0642\u0637"})]})]})}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 mb-6",children:[(0,r.jsx)("div",{className:"flex border-b border-white/10 overflow-x-auto",children:[{id:"overview",name:"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629",icon:"\ud83d\udcca",description:"\u0645\u0644\u062e\u0635 \u0634\u0627\u0645\u0644 \u0644\u0644\u0623\u0646\u0634\u0637\u0629"},{id:"all_activities",name:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0634\u0637\u0629",icon:"\ud83d\udccb",description:"\u0642\u0627\u0626\u0645\u0629 \u062a\u0641\u0635\u064a\u0644\u064a\u0629 \u0628\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0634\u0637\u0629"},{id:"gps_tracking",name:"\u062a\u062a\u0628\u0639 GPS",icon:"\ud83d\udef0\ufe0f",description:"\u0633\u062c\u0644\u0627\u062a \u0627\u0644\u0645\u0648\u0627\u0642\u0639 \u0648\u0627\u0644\u062d\u0631\u0643\u0629"},{id:"map_view",name:"\u0639\u0631\u0636 \u0627\u0644\u062e\u0631\u064a\u0637\u0629",icon:"\ud83d\uddfa\ufe0f",description:"\u062e\u0631\u064a\u0637\u0629 \u062a\u0641\u0627\u0639\u0644\u064a\u0629 \u0644\u0644\u0645\u0648\u0627\u0642\u0639"}].map((e=>(0,r.jsxs)("button",{onClick:()=>x(e.id),className:"flex items-center gap-2 px-6 py-4 font-medium transition-all duration-300 whitespace-nowrap ".concat(o===e.id?"text-indigo-300 border-b-2 border-indigo-400 bg-white/5":"text-white/70 hover:text-white hover:bg-white/5"),title:e.description,children:[(0,r.jsx)("span",{className:"text-lg",children:e.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:e.name}),(0,r.jsx)("div",{className:"text-xs opacity-60",children:e.description})]})]},e.id)))}),(0,r.jsxs)("div",{className:"p-6",children:["overview"===o&&(()=>{var e;const t=(null===u||void 0===u?void 0:u.total_activities)||m.length,s=(null===u||void 0===u?void 0:u.today_activities)||m.filter((e=>new Date(e.timestamp).toDateString()===(new Date).toDateString())).length,i=(null===u||void 0===u?void 0:u.week_activities)||m.length,a=(null===u||void 0===u?void 0:u.month_activities)||m.length;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500/20 to-blue-600/20 rounded-lg",children:(0,r.jsx)("span",{className:"text-2xl",children:"\ud83d\udcca"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-blue-400",children:t}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0646\u0634\u0637\u0629"}),(0,r.jsx)("div",{className:"text-xs text-blue-300 mt-1",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u062a\u0631\u0627\u062a"})]})]})}),(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500/20 to-green-600/20 rounded-lg",children:(0,r.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-400",children:s}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:"\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u064a\u0648\u0645"}),(0,r.jsx)("div",{className:"text-xs text-green-300 mt-1",children:z((new Date).toISOString())})]})]})}),(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-500/20 to-purple-600/20 rounded-lg",children:(0,r.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-purple-400",children:i}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:"\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0623\u0633\u0628\u0648\u0639"}),(0,r.jsx)("div",{className:"text-xs text-purple-300 mt-1",children:"\u0622\u062e\u0631 7 \u0623\u064a\u0627\u0645"})]})]})}),(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20 hover:bg-white/15 transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-3 bg-gradient-to-br from-orange-500/20 to-orange-600/20 rounded-lg",children:(0,r.jsx)("span",{className:"text-2xl",children:"\ud83d\uddd3\ufe0f"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-400",children:a}),(0,r.jsx)("div",{className:"text-sm opacity-75",children:"\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0634\u0647\u0631"}),(0,r.jsx)("div",{className:"text-xs text-orange-300 mt-1",children:"\u0622\u062e\u0631 30 \u064a\u0648\u0645"})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udcc8"}),"\u062a\u0648\u0632\u064a\u0639 \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u062d\u0633\u0628 \u0627\u0644\u0646\u0648\u0639"]}),(0,r.jsx)("div",{className:"space-y-3",children:Object.entries((null===u||void 0===u?void 0:u.activities_by_type)||{}).map((e=>{let[s,i]=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-lg",children:U(s)}),(0,r.jsx)("span",{className:"text-sm",children:s.replace("_"," ")})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-24 bg-white/10 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-500",style:{width:"".concat(i/t*100,"%")}})}),(0,r.jsx)("span",{className:"text-sm font-medium w-8 text-right",children:i})]})]},s)}))})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udc65"}),"\u0623\u0643\u062b\u0631 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0646\u0634\u0627\u0637\u0627\u064b"]}),(0,r.jsx)("div",{className:"space-y-3",children:Object.entries((null===u||void 0===u?void 0:u.activities_by_user)||{}).slice(0,5).map((e=>{let[t,s]=e;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500/20 to-purple-600/20 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm",children:"\ud83d\udc64"})}),(0,r.jsx)("span",{className:"text-sm font-medium",children:t})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-20 bg-white/10 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-full transition-all duration-500",style:{width:"".concat(s/Math.max(...Object.values((null===u||void 0===u?void 0:u.activities_by_user)||{}))*100,"%")}})}),(0,r.jsx)("span",{className:"text-sm font-medium w-8 text-right",children:s})]})]},t)}))})]})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\u23f0"}),"\u0622\u062e\u0631 \u0627\u0644\u0623\u0646\u0634\u0637\u0629"]}),(0,r.jsx)("button",{onClick:()=>x("all_activities"),className:"text-sm text-blue-400 hover:text-blue-300 transition-colors",children:"\u0639\u0631\u0636 \u0627\u0644\u0643\u0644 \u2192"})]}),(0,r.jsx)("div",{className:"space-y-3",children:m.slice(0,5).map((e=>{var t;return(0,r.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",onClick:()=>J(e),children:[(0,r.jsx)("div",{className:"text-2xl",children:U(e.type)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.action}),(0,r.jsxs)("div",{className:"text-sm opacity-75",children:[e.user_name," - ",e.target_name]}),(0,r.jsxs)("div",{className:"text-xs opacity-60 flex items-center gap-2 mt-1",children:[(0,r.jsx)("span",{children:"\ud83d\udccd"}),(0,r.jsx)("span",{children:(null===(t=e.location)||void 0===t?void 0:t.address)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,r.jsx)("span",{children:"\u2022"}),(0,r.jsx)("span",{children:z(e.timestamp)})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("span",{className:"px-3 py-1 rounded-lg border text-xs ".concat(E(e.type)),children:e.type.replace("_"," ")}),(0,r.jsx)("div",{className:"text-xs opacity-60 mt-1",children:R(e.timestamp)})]})]},e.id)}))})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\uddfa\ufe0f"}),"\u0623\u0643\u062b\u0631 \u0627\u0644\u0645\u0648\u0627\u0642\u0639 \u0646\u0634\u0627\u0637\u0627\u064b"]}),(null===u||void 0===u||null===(e=u.most_active_locations)||void 0===e?void 0:e.length)>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.most_active_locations.slice(0,6).map(((e,t)=>(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"\ud83d\udccd"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:e.location})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-xs opacity-75",children:"\u0639\u062f\u062f \u0627\u0644\u0623\u0646\u0634\u0637\u0629"}),(0,r.jsx)("span",{className:"text-sm font-bold text-blue-400",children:e.count})]})]},t)))}):(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\uddfa\ufe0f"}),(0,r.jsx)("p",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0648\u0627\u0642\u0639 \u0645\u062a\u0627\u062d\u0629"})]}),(0,r.jsx)("div",{className:"mt-4 text-center",children:(0,r.jsxs)("button",{onClick:()=>C(!0),className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 flex items-center gap-2 mx-auto",children:[(0,r.jsx)("span",{children:"\ud83d\uddfa\ufe0f"}),"\u0639\u0631\u0636 \u0627\u0644\u062e\u0631\u064a\u0637\u0629 \u0627\u0644\u062a\u0641\u0627\u0639\u0644\u064a\u0629"]})})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\u26a1"}),"\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0633\u0631\u064a\u0639\u0629"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>K("json"),className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-3 rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-300 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udcca"}),(0,r.jsx)("span",{children:"\u062a\u0635\u062f\u064a\u0631 JSON"})]}),(0,r.jsxs)("button",{onClick:()=>K("csv"),className:"bg-gradient-to-r from-green-600 to-teal-600 text-white px-4 py-3 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-300 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udcc8"}),(0,r.jsx)("span",{children:"\u062a\u0635\u062f\u064a\u0631 CSV"})]}),(0,r.jsxs)("button",{onClick:()=>F(),className:"bg-gradient-to-r from-orange-600 to-red-600 text-white px-4 py-3 rounded-lg hover:from-orange-700 hover:to-red-700 transition-all duration-300 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udd04"}),(0,r.jsx)("span",{children:"\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"})]}),(0,r.jsxs)("button",{onClick:()=>x("gps_tracking"),className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-4 py-3 rounded-lg hover:from-blue-700 hover:to-cyan-700 transition-all duration-300 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udef0\ufe0f"}),(0,r.jsx)("span",{children:"\u062a\u062a\u0628\u0639 GPS"})]})]})]})]})})(),"all_activities"===o&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u0628\u062d\u062b"}),(0,r.jsx)("input",{type:"text",placeholder:"\u0627\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0623\u0646\u0634\u0637\u0629...",value:_,onChange:e=>k(e.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0646\u0634\u0627\u0637"}),(0,r.jsxs)("select",{value:N,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0634\u0637\u0629"}),(0,r.jsx)("option",{value:"visit_registration",children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0632\u064a\u0627\u0631\u0627\u062a"}),(0,r.jsx)("option",{value:"clinic_registration",children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0639\u064a\u0627\u062f\u0627\u062a"}),(0,r.jsx)("option",{value:"order_creation",children:"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0637\u0644\u0628\u0627\u062a"}),(0,r.jsx)("option",{value:"order_approval",children:"\u0627\u0639\u062a\u0645\u0627\u062f \u0627\u0644\u0637\u0644\u0628\u0627\u062a"}),(0,r.jsx)("option",{value:"product_update",children:"\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,r.jsx)("option",{value:"user_creation",children:"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"}),(0,r.jsx)("option",{value:"login",children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"}),(0,r.jsx)("option",{value:"system_access",children:"\u062f\u062e\u0648\u0644 \u0627\u0644\u0646\u0638\u0627\u0645"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064a\u0629"}),(0,r.jsxs)("select",{value:y,onChange:e=>w(e.target.value),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"today",children:"\u0627\u0644\u064a\u0648\u0645"}),(0,r.jsx)("option",{value:"yesterday",children:"\u0623\u0645\u0633"}),(0,r.jsx)("option",{value:"week",children:"\u0647\u0630\u0627 \u0627\u0644\u0623\u0633\u0628\u0648\u0639"}),(0,r.jsx)("option",{value:"month",children:"\u0647\u0630\u0627 \u0627\u0644\u0634\u0647\u0631"}),(0,r.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u062a\u0631\u0627\u062a"})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{onClick:()=>{k(""),f("all"),w("today")},className:"w-full bg-gray-600/50 text-white px-4 py-2 rounded-lg hover:bg-gray-600/70 transition-colors",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646"})}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsxs)("button",{onClick:F,className:"w-full bg-blue-600/50 text-white px-4 py-2 rounded-lg hover:bg-blue-600/70 transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udd04"}),"\u062a\u062d\u062f\u064a\u062b"]})})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center justify-between text-sm opacity-75",children:[(0,r.jsxs)("div",{children:["\u0639\u0631\u0636 ",B.length," \u0645\u0646 \u0623\u0635\u0644 ",m.length," \u0646\u0634\u0627\u0637"]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("button",{onClick:()=>K("json"),className:"flex items-center gap-1 text-blue-400 hover:text-blue-300",children:[(0,r.jsx)("span",{children:"\ud83d\udcbe"}),"\u062a\u0635\u062f\u064a\u0631 JSON"]}),(0,r.jsxs)("button",{onClick:()=>K("csv"),className:"flex items-center gap-1 text-green-400 hover:text-green-300",children:[(0,r.jsx)("span",{children:"\ud83d\udcca"}),"\u062a\u0635\u062f\u064a\u0631 CSV"]})]})]})]}),(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-white/10 bg-white/5",children:[(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0646\u0634\u0627\u0637"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0647\u062f\u0641"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0648\u0642\u062a"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0645\u0648\u0642\u0639"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u062c\u0647\u0627\u0632"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,r.jsx)("tbody",{children:B.map(((e,t)=>{var s,i,a,l,n,d,c,o,x;return(0,r.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",style:{animationDelay:"".concat(.05*t,"s")},children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"text-xl",children:U(e.type)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-white",children:e.action}),(0,r.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs mt-1 ".concat(E(e.type)),children:e.type.replace("_"," ")})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500/20 to-purple-600/20 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm",children:"\ud83d\udc64"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium text-white",children:e.user_name}),(0,r.jsx)("div",{className:"text-sm opacity-75 capitalize",children:null===(s=e.user_role)||void 0===s?void 0:s.replace("_"," ")})]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("div",{className:"font-medium text-white",children:e.target_name||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,r.jsx)("div",{className:"text-sm opacity-75 capitalize",children:null===(i=e.target_type)||void 0===i?void 0:i.replace("_"," ")})]}),(0,r.jsxs)("td",{className:"px-6 py-4 text-sm",children:[(0,r.jsx)("div",{className:"text-white",children:R(e.timestamp)}),(0,r.jsx)("div",{className:"text-xs opacity-60",children:z(e.timestamp)})]}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm max-w-xs",children:e.location?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[(0,r.jsx)("span",{children:"\ud83d\udccd"}),(0,r.jsx)("span",{className:"text-xs truncate",children:e.location.address})]}),(0,r.jsxs)("div",{className:"text-xs opacity-60",children:["\u062f\u0642\u0629: ",(null===(a=e.location.accuracy)||void 0===a?void 0:a.toFixed(1))||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f\u0629","\u0645"]}),e.location.latitude&&e.location.longitude&&(0,r.jsxs)("div",{className:"text-xs opacity-60 mt-1",children:[e.location.latitude.toFixed(4),", ",e.location.longitude.toFixed(4)]})]}):(0,r.jsx)("span",{className:"text-gray-500",children:"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"})}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-white",children:(null===(l=e.device_info)||void 0===l?void 0:l.operating_system)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,r.jsx)("div",{className:"text-xs opacity-60",children:(null===(n=e.device_info)||void 0===n?void 0:n.browser)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,r.jsx)("div",{className:"text-xs opacity-60",children:(null===(d=e.device_info)||void 0===d?void 0:d.device_type)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(null===(c=e.device_info)||void 0===c?void 0:c.ip_address)&&(0,r.jsxs)("div",{className:"text-xs opacity-50",children:["IP: ",e.device_info.ip_address]})]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>J(e),className:"px-3 py-1 bg-blue-600/50 text-white rounded hover:bg-blue-600/70 transition-colors text-xs",title:"\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0643\u0627\u0645\u0644\u0629",children:"\u062a\u0641\u0627\u0635\u064a\u0644"}),(null===(o=e.location)||void 0===o?void 0:o.latitude)&&(null===(x=e.location)||void 0===x?void 0:x.longitude)&&(0,r.jsx)("button",{onClick:()=>{if(P){const t="https://www.google.com/maps?q=".concat(e.location.latitude,",").concat(e.location.longitude);window.open(t,"_blank")}else alert("\u0627\u0644\u0645\u0648\u0642\u0639: ".concat(e.location.latitude,", ").concat(e.location.longitude))},className:"px-3 py-1 bg-green-600/50 text-white rounded hover:bg-green-600/70 transition-colors text-xs",title:"\u0639\u0631\u0636 \u0639\u0644\u0649 \u0627\u0644\u062e\u0631\u064a\u0637\u0629",children:"\u062e\u0631\u064a\u0637\u0629"})]})})]},e.id)}))})]})})}),0===B.length&&(0,r.jsxs)("div",{className:"text-center py-12 bg-white/5 rounded-xl",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udccb"}),(0,r.jsx)("h3",{className:"text-xl font-bold mb-2 text-white",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0646\u0634\u0637\u0629"}),(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0623\u0646\u0634\u0637\u0629 \u0645\u0637\u0627\u0628\u0642\u0629 \u0644\u0644\u0641\u0644\u062a\u0631\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629"}),(0,r.jsx)("button",{onClick:()=>{k(""),f("all"),w("all")},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u0627\u0644\u0641\u0644\u0627\u062a\u0631"})]}),B.length>50&&(0,r.jsxs)("div",{className:"flex justify-center items-center gap-4 py-4",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"\u0627\u0644\u0633\u0627\u0628\u0642"}),(0,r.jsx)("span",{className:"text-sm opacity-75",children:"\u0627\u0644\u0635\u0641\u062d\u0629 1 \u0645\u0646 1"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors",children:"\u0627\u0644\u062a\u0627\u0644\u064a"})]})]}),"gps_tracking"===o&&(()=>{var e;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[(0,r.jsxs)("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udef0\ufe0f"}),"\u0645\u0644\u062e\u0635 \u062a\u062a\u0628\u0639 GPS"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"\ud83d\udccd"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0646\u0642\u0627\u0637"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:g.length})]}),(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"\ud83d\udeb6"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"\u0627\u0644\u0645\u0633\u0627\u0641\u0629 \u0627\u0644\u0645\u0642\u062f\u0631\u0629"})]}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[g.reduce(((e,t)=>e+(t.distance_from_last||0)),0).toFixed(1)," \u0643\u0645"]})]}),(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"\u23f1\ufe0f"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u062f\u0642\u0629"})]}),(0,r.jsxs)("div",{className:"text-2xl font-bold text-purple-400",children:[g.length>0?(g.reduce(((e,t)=>{var s;return e+((null===(s=t.location)||void 0===s?void 0:s.accuracy)||0)}),0)/g.length).toFixed(1):0,"\u0645"]})]}),(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-lg",children:"\ud83d\udd04"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:"\u0622\u062e\u0631 \u062a\u062d\u062f\u064a\u062b"})]}),(0,r.jsx)("div",{className:"text-sm font-bold text-orange-400",children:g.length>0?z(null===(e=g[0])||void 0===e?void 0:e.created_at):"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 overflow-hidden",children:[(0,r.jsx)("div",{className:"p-4 border-b border-white/10",children:(0,r.jsxs)("h3",{className:"text-lg font-bold flex items-center gap-2",children:[(0,r.jsx)("span",{children:"\ud83d\udccb"}),"\u0633\u062c\u0644\u0627\u062a \u062a\u062a\u0628\u0639 GPS \u0627\u0644\u062a\u0641\u0635\u064a\u0644\u064a\u0629"]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-white/10 bg-white/5",children:[(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0645\u0648\u0642\u0639"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0625\u062d\u062f\u0627\u062b\u064a\u0627\u062a"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u062f\u0642\u0629"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0646\u0648\u0639 \u0627\u0644\u062d\u0631\u0643\u0629"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0648\u0642\u062a"}),(0,r.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-200",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,r.jsx)("tbody",{children:g.slice(0,50).map(((e,t)=>{var s,i,a,l,n,d,c,o,x,h,g,p,u,v,b;return(0,r.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500/20 to-blue-600/20 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm",children:"\ud83d\udc64"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-medium text-white",children:["\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 ",e.user_id]}),(0,r.jsxs)("div",{className:"text-xs opacity-60",children:["ID: ",e.user_id.slice(0,8)]})]})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 max-w-xs",children:[(0,r.jsx)("div",{className:"text-sm text-white",children:(null===(s=e.location)||void 0===s?void 0:s.address)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,r.jsx)("div",{className:"text-xs opacity-60",children:(null===(i=e.location)||void 0===i?void 0:i.city)||""})]}),(0,r.jsxs)("td",{className:"px-6 py-4 text-sm",children:[(0,r.jsxs)("div",{className:"font-mono text-white",children:[null===(a=e.location)||void 0===a||null===(l=a.latitude)||void 0===l?void 0:l.toFixed(6),", ",null===(n=e.location)||void 0===n||null===(d=n.longitude)||void 0===d?void 0:d.toFixed(6)]}),(0,r.jsx)("div",{className:"text-xs opacity-60",children:null!==(c=e.location)&&void 0!==c&&c.altitude?"\u0627\u0631\u062a\u0641\u0627\u0639: ".concat(e.location.altitude,"\u0645"):""})]}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,r.jsxs)("span",{className:"px-2 py-1 rounded text-xs ".concat((null===(o=e.location)||void 0===o?void 0:o.accuracy)<=10?"bg-green-500/20 text-green-300":(null===(x=e.location)||void 0===x?void 0:x.accuracy)<=25?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"),children:[(null===(h=e.location)||void 0===h||null===(g=h.accuracy)||void 0===g?void 0:g.toFixed(1))||"\u063a.\u0645","\u0645"]})}),(0,r.jsxs)("td",{className:"px-6 py-4 text-sm",children:[(0,r.jsx)("span",{className:"capitalize text-white",children:e.movement_type||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),e.distance_from_last>0&&(0,r.jsxs)("div",{className:"text-xs opacity-60",children:["\u0645\u0633\u0627\u0641\u0629: ",e.distance_from_last.toFixed(1),"\u0645"]})]}),(0,r.jsxs)("td",{className:"px-6 py-4 text-sm",children:[(0,r.jsx)("div",{className:"text-white",children:R(e.created_at||(null===(p=e.location)||void 0===p?void 0:p.timestamp))}),(0,r.jsx)("div",{className:"text-xs opacity-60",children:z(e.created_at||(null===(u=e.location)||void 0===u?void 0:u.timestamp))})]}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(null===(v=e.location)||void 0===v?void 0:v.latitude)&&(null===(b=e.location)||void 0===b?void 0:b.longitude)&&(0,r.jsx)("button",{onClick:()=>{if(P){const t="https://www.google.com/maps?q=".concat(e.location.latitude,",").concat(e.location.longitude);window.open(t,"_blank")}else alert("\u0627\u0644\u0645\u0648\u0642\u0639: ".concat(e.location.latitude,", ").concat(e.location.longitude))},className:"px-3 py-1 bg-blue-600/50 text-white rounded hover:bg-blue-600/70 transition-colors text-xs",title:"\u0639\u0631\u0636 \u0639\u0644\u0649 \u0627\u0644\u062e\u0631\u064a\u0637\u0629",children:"\u062e\u0631\u064a\u0637\u0629"}),e.activity_id&&(0,r.jsx)("button",{onClick:()=>{const t=m.find((t=>t.id===e.activity_id));t&&J(t)},className:"px-3 py-1 bg-green-600/50 text-white rounded hover:bg-green-600/70 transition-colors text-xs",title:"\u0639\u0631\u0636 \u0627\u0644\u0646\u0634\u0627\u0637 \u0627\u0644\u0645\u0631\u062a\u0628\u0637",children:"\u0646\u0634\u0627\u0637"})]})})]},e.id)}))})]})})]}),0===g.length&&(0,r.jsxs)("div",{className:"text-center py-12 bg-white/5 rounded-xl",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udef0\ufe0f"}),(0,r.jsx)("h3",{className:"text-xl font-bold mb-2 text-white",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0633\u062c\u0644\u0627\u062a GPS"}),(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:"\u0644\u0645 \u064a\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0623\u064a \u0628\u064a\u0627\u0646\u0627\u062a GPS \u062d\u062a\u0649 \u0627\u0644\u0622\u0646"})]})]})})(),"map_view"===o&&(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\uddfa\ufe0f"}),(0,r.jsx)("h3",{className:"text-xl font-bold mb-2 text-white",children:"\u062e\u0631\u064a\u0637\u0629 \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u062a\u0641\u0627\u0639\u0644\u064a\u0629"}),(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0648\u0627\u0644\u062d\u0631\u0643\u0627\u062a \u0639\u0644\u0649 \u062e\u0631\u064a\u0637\u0629 \u062a\u0641\u0627\u0639\u0644\u064a\u0629 \u0645\u0639 Google Maps"}),P?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-green-400 mb-4",children:"\u2705 Google Maps API \u0645\u062a\u0627\u062d - \u064a\u0645\u0643\u0646 \u0639\u0631\u0636 \u0627\u0644\u062e\u0631\u064a\u0637\u0629"}),(0,r.jsx)("div",{className:"bg-gray-800 rounded-lg p-8 mb-4",children:(0,r.jsx)("div",{className:"text-gray-400",children:"[\u0647\u0646\u0627 \u0633\u062a\u0638\u0647\u0631 \u0627\u0644\u062e\u0631\u064a\u0637\u0629 \u0627\u0644\u062a\u0641\u0627\u0639\u0644\u064a\u0629 \u0645\u0639 \u062c\u0645\u064a\u0639 \u0627\u0644\u0646\u0642\u0627\u0637 \u0648\u0627\u0644\u0623\u0646\u0634\u0637\u0629]"})}),(0,r.jsx)("button",{onClick:()=>{alert("\u0633\u064a\u062a\u0645 \u062a\u0637\u0648\u064a\u0631 \u0627\u0644\u062e\u0631\u064a\u0637\u0629 \u0627\u0644\u062a\u0641\u0627\u0639\u0644\u064a\u0629 \u0641\u064a \u0627\u0644\u0625\u0635\u062f\u0627\u0631 \u0627\u0644\u0642\u0627\u062f\u0645")},className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300",children:"\u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u062e\u0631\u064a\u0637\u0629 \u0627\u0644\u062a\u0641\u0627\u0639\u0644\u064a\u0629"})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-orange-400 mb-4",children:"\u26a0\ufe0f \u064a\u062a\u0637\u0644\u0628 Google Maps API Key \u0644\u062a\u0641\u0639\u064a\u0644 \u0647\u0630\u0647 \u0627\u0644\u0645\u064a\u0632\u0629"}),(0,r.jsx)("div",{className:"bg-gray-800/50 rounded-lg p-8 mb-4",children:(0,r.jsx)("div",{className:"text-gray-500",children:"\u0644\u0639\u0631\u0636 \u0627\u0644\u062e\u0631\u064a\u0637\u0629 \u0627\u0644\u062a\u0641\u0627\u0639\u0644\u064a\u0629\u060c \u064a\u0631\u062c\u0649 \u0625\u0636\u0627\u0641\u0629 REACT_APP_GOOGLE_MAPS_API_KEY \u0641\u064a \u0645\u0644\u0641 \u0627\u0644\u0628\u064a\u0626\u0629"})})]}),(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h4",{className:"text-lg font-bold mb-4 text-white",children:"\u0627\u0644\u0645\u0648\u0627\u0642\u0639 \u0627\u0644\u0645\u0633\u062c\u0644\u0629"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.filter((e=>e.location)).slice(0,6).map((e=>{var t,s;return(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:"text-lg",children:U(e.type)}),(0,r.jsx)("span",{className:"text-sm font-medium text-white truncate",children:e.action})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mb-1",children:["\ud83d\udccd ",e.location.address]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 mb-2",children:[null===(t=e.location.latitude)||void 0===t?void 0:t.toFixed(4),", ",null===(s=e.location.longitude)||void 0===s?void 0:s.toFixed(4)]}),(0,r.jsx)("div",{className:"text-xs text-gray-400",children:z(e.timestamp)})]},e.id)}))})]})]})})})]})]}),S&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[(0,r.jsx)("span",{children:U(S.type)}),"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0646\u0634\u0627\u0637"]}),(0,r.jsx)("button",{onClick:()=>O(null),className:"text-gray-400 hover:text-white transition-colors text-2xl",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u0646\u0634\u0627\u0637"}),(0,r.jsx)("div",{className:"text-white font-medium",children:S.action})]}),(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,r.jsx)("div",{className:"text-white font-medium",children:S.user_name}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:S.user_role})]}),(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"\u0627\u0644\u0647\u062f\u0641"}),(0,r.jsx)("div",{className:"text-white font-medium",children:S.target_name||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:S.target_type})]}),(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"\u0627\u0644\u0648\u0642\u062a"}),(0,r.jsx)("div",{className:"text-white font-medium",children:R(S.timestamp)}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:z(S.timestamp)})]})]}),S.location&&(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0648\u0642\u0639"}),(0,r.jsx)("div",{className:"text-white mb-2",children:S.location.address}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["\ud83d\udccd ",null===(t=S.location.latitude)||void 0===t?void 0:t.toFixed(6),", ",null===(s=S.location.longitude)||void 0===s?void 0:s.toFixed(6)]}),(0,r.jsxs)("div",{className:"text-sm text-gray-400",children:["\u062f\u0642\u0629: ",S.location.accuracy,"\u0645"]})]}),S.details&&Object.keys(S.details).length>0&&(0,r.jsxs)("div",{className:"bg-white/5 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-400 mb-2",children:"\u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0625\u0636\u0627\u0641\u064a\u0629"}),(0,r.jsx)("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap",children:JSON.stringify(S.details,null,2)})]})]})]})})})]})}}}]);
//# sourceMappingURL=279.cd866f9c.chunk.js.map